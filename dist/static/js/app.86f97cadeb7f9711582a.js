webpackJsonp([1],{"/BUs":function(e,t,a){"use strict";var s=a("js5j"),i=a("hRKE"),n=a.n(i),o=a("P9l9"),l=a("QI2T"),r={name:"AddressAuth",data:function(){return{pData:{show:!1,activeTab:"firstTab",checked1:[],checked2:[],disabled:!1},data1:[],data2:[],defaultProps:{label:"name",children:"childs"},saveTree1:"",saveTree2:"",boxShow:!0,c1:[],c2:[]}},props:["show","address"],watch:{show:function(e,t){1==e?(this.boxShow=!0,this.pData=this.address,this.$set(this.pData,"show",this.show),this.$set(this.pData,"activeTab","firstTab"),this.$set(this.pData,"checked1",[]),this.$set(this.pData,"checked2",[]),this.$set(this.pData,"disabled",!1),this.c1=[],this.c2=[],this.Initial()):this.pData.show=this.show}},methods:{TreeClick:function(e,t){"firstTab"==this.pData.activeTab?(this.saveTree1=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked1=t.checkedKeys):(this.saveTree2=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked2=t.checkedKeys)},Initial:function(){var e=this;o.u({kind:0}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.AuthTree(t.object,"手机端",0):l({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")}),o.u({kind:1}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.AuthTree(t.object,"PC端",1):l({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")})},handleClick:function(e,t){},AuthTree:function(e,t,a){var s=this;o.f({id:this.pData.sid,permissionType:1,clientType:a}).then(function(a){if(0==(a=PF.JsonFormat(a.data)).status){if(a.object&&0!=a.object.length)for(var i=0;i<a.object.length;i++)"手机端"==t?s.c1.push(a.object[i].sid):"PC端"==t&&s.c2.push(a.object[i].sid),s.Arr(a.object[i],t);else"手机端"==t?s.c1="空值":"PC端"==t&&(s.c2="空值");"手机端"==t?s.data1=e:"PC端"==t&&(s.data2=e)}else l({title:"地点权限列表服务器返回错误",text:a.errorMsg,type:"error"})}).catch(function(e){l("地点权限列表请求服务器失败","","error")})},Arr:function(e,t){for(var a=0;a<e.childs.length;a++)""!=e.childs[a].childs?(this.Arr(e.childs[a],t),"手机端"==t?this.c1.push(e.childs[a].sid):"PC端"==t&&this.c2.push(e.childs[a].sid)):"手机端"==t?(this.pData.checked1.push(e.childs[a].sid),this.c1.push(e.childs[a].sid)):"PC端"==t&&(this.pData.checked2.push(e.childs[a].sid),this.c2.push(e.childs[a].sid))},AddDisabled:function(e){for(var t=0;t<e.childs.length;t++)""!=e.childs[t].childs?(e.childs[t].disabled=!0,this.AddDisabled(e.childs[t])):e.childs[t].disabled=!0},UpData:function(){var e=this;e.pData.disabled=!0,o.A().then(function(t){0==(t=PF.JsonFormat(t.data)).status?(l({title:"更新权限成功",type:"success"}),e.Close()):l({title:"更新权限服务器返回错误",text:t.errorMsg,type:"error"}),e.pData.disabled=!1}).catch(function(t){l("更新权限请求服务器失败","","error"),e.pData.disabled=!1})},Submit:function(e){var t=this,a="",s=0;return!t.pData.disabled&&(!t.pData.disabled&&(""!==t.saveTree1||1!=t.c1.length&&t.c1&&"空值"!=t.c1?""!==t.saveTree2||1!=t.c2.length&&t.c2&&"空值"!=t.c2?"object"==n()(t.saveTree1)&&0==t.saveTree1.length?(l("设置手机端权限","","error"),!1):"object"==n()(t.saveTree2)&&0==t.saveTree2.length?(l("设置PC端权限","","error"),!1):(t.pData.disabled=!0,o.z({id:t.pData.sid,permissionIdList:t.saveTree1?t.saveTree1:t.c1,permissionType:1,clientType:0}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?s++:l({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"}),t.pData.disabled=!1}).catch(function(e){l("保存权限请求服务器失败","","error"),t.pData.disabled=!1}),o.z({id:t.pData.sid,permissionIdList:t.saveTree2?t.saveTree2:t.c2,permissionType:1,clientType:1}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?s++:(l({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"}),t.pData.disabled=!1)}).catch(function(e){l("保存权限请求服务器失败","","error"),t.pData.disabled=!1}),void(a=setInterval(function(){2==s&&(clearInterval(a),l({title:"保存成功",text:"2秒后自动关闭",type:"success",timer:2e3}).then(function(a){if(t.pData.disabled=!1,e)t.Close();else{var s;for(s=0;s<t.data1.length;s++)t.AddDisabled(t.data1[s]),t.data1[s].disabled=!0;for(s=0;s<t.data2.length;s++)t.AddDisabled(t.data2[s]),t.data2[s].disabled=!0;t.boxShow=!1,t.pData.activeTab="firstTab"}}))},500))):(l("设置PC端权限","","error"),!1):(l("设置手机端权限","","error"),!1)))},Close:function(){this.$emit("Close")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show,expression:"pData.show"}],staticClass:"box2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.boxShow,expression:"boxShow"}],staticClass:"box2con change"},[a("h3",[e._v("地点："+e._s(e.pData.name)+"，功能权限")]),e._v(" "),a("div",{staticClass:"plane3"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PC权限",name:"secondTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr35",attrs:{type:"button",disabled:e.pData.disabled},on:{click:function(t){e.Submit(!1)}}},[e._v("更新")]),e._v(" "),a("a",{staticClass:"pointer mr35",attrs:{type:"button",disabled:e.pData.disabled},on:{click:function(t){e.Submit(!0)}}},[e._v("确定")]),e._v(" "),a("a",{staticClass:"pointer",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])]),e._v(" "),e.boxShow?e._e():a("div",{staticClass:"box2con change"},[a("h3",[e._v("更新功能权限")]),e._v(" "),a("div",{staticClass:"text-center blue mb25"},[e._v("权限将更新到最新正在使用的权限版本，是否更新？")]),e._v(" "),a("div",{staticClass:"plane4"},[a("div",{staticClass:"w45p l ml20"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"w45p r mr20"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"PC权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr35 mt20",attrs:{type:"button",disabled:e.pData.disabled},on:{click:e.UpData}},[e._v("立即更新")]),e._v(" "),a("a",{staticClass:"pointer",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[]},d=a("vSla")(r,c,!1,null,null,null).exports,u=a("QI2T"),p={name:"Address",data:function(){return{pData:{show:!1,class:""},search:{pageNo:1},dataList:""}},components:{page:s.a,addressAuth:d},mounted:function(){this.Initial()},methods:{Initial:function(){var e=this;e.dataList="",o.a({pageNo:e.search.pageNo}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):u({title:"地点列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){u("地点列表请求服务器失败","","error")})},EditAuth:function(e){this.pData.show=!0,this.pData.address=e},Close:function(e){this.pData.show=!1}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(1)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(2),e._v(" "),e._l(e.dataList,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",{domProps:{innerHTML:e._s(t.description)}}),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.EditAuth(t)}}},[e._v("编辑权限")])])])})],2)]):e._e()]),e._v(" "),a("addressAuth",{attrs:{show:e.pData.show,address:e.pData.address},on:{Close:e.Close}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("地点管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("地点")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("描述")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("操作")])])}]},m=a("vSla")(p,h,!1,null,null,null);t.a=m.exports},"/y7I":function(e,t){},"0+jS":function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"appShopList",data:function(){return{pData:{appId:this.$route.query.appId},search:{pageNo:1,shopId:"",shopName:"",provinceEncode:"",cityEncode:""},data:{province:"",city:""},dataList:""}},components:{page:s.a},mounted:function(){this.Initial()},methods:{Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,document.querySelector("#shopId").value="",document.querySelector("#shopName").value="",this.search.provinceEncode="",this.search.cityEncode="",this.Initial()},Initial:function(){var e=this;e.dataList="",e.search.shopId=document.querySelector("#shopId").value,e.search.shopName=document.querySelector("#shopName").value,i.b({pageNo:e.search.pageNo,shopId:e.search.shopId,shopName:e.search.shopName,provinceEncode:e.search.provinceEncode,cityEncode:e.search.cityEncode}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):n({title:"商家列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家列表请求服务器失败","","error")})},Info:function(e,t){e?this.$router.push({path:"/game/gameInfo",query:{gameId:e.gameId,editFlag:e.editFlag,status:t}}):this.$router.push({name:"GameInfo"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("form",[e._m(1),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("商家区域：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.provinceEncode,expression:"search.provinceEncode"}],staticClass:"w100",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"provinceEncode",t.target.multiple?a:a[0])},function(t){e.ChangeCity(e.search.provinceEncode)}]}},[a("option",{attrs:{value:""}},[e._v("--省--")]),e._v(" "),e._l(e.data.province,function(t){return a("option",{key:t.$index,domProps:{value:t.encoding,selected:t.selected}},[e._v(e._s(t.name))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.cityEncode,expression:"search.cityEncode"}],staticClass:"w100",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"cityEncode",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("--市--")]),e._v(" "),e._l(e.data.city,function(t){return a("option",{key:t.$index,domProps:{value:t.encoding}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn l w85 mr15",attrs:{type:"button"},on:{click:e.Search}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")]),e._v(" "),a("button",{staticClass:"btn2 l w85",attrs:{type:"button"},on:{click:e.Reset}},[e._v("清空")])])])]),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(3)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(4),e._v(" "),e._l(e.dataList.objects,function(t){return a("tr",{key:t.$index},[a("td",[e._v("霸屏")]),e._v(" "),a("td",[e._v("8")]),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.Info(t,"info")}}},[e._v("功能管理")]),e._v(" "),a("a",{on:{click:function(a){e.Info(t,"edit")}}},[e._v("设置权限")])])])})],2),e._v(" "),a("div",{staticClass:"hidden mt20"},[a("page",{attrs:{dataList:e.dataList,search:e.search},on:{Change:e.Change}})],1)]):e._e()])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("figure",[a("figcaption",[e._v("商户列表")]),e._v(" "),a("div",{staticClass:"crumbs"},[a("span",[e._v("应用管理")]),e._v(" "),a("a",{attrs:{href:"/app"}},[e._v("商家应用管理")]),e._v(" "),a("a",[e._v("商家列表")])]),e._v(" "),a("a",{staticClass:"btn5  btn5-change",attrs:{href:"/app"}},[a("i",{staticClass:"fa fa-reply"}),e._v(" 返回")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家ID：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopId",maxlength:"8",oninput:"PF.Integer(this)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家名称：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopName",onfocus:"PF.CutString(this,60)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("应用")]),this._v(" "),t("th",[this._v("正在使用商户")]),this._v(" "),t("th",[this._v("操作")])])}]};a("vSla")(o,l,!1,null,null,null).exports},"1ItJ":function(e,t){},"1awW":function(e,t){},"2++a":function(e,t,a){"use strict";var s=a("XZGR"),i=a("QI2T"),n=a("Y0Uy"),o={name:"EquipMent",data:function(){return{centerDialogVisible:!1,addDialogVisible:!1,addScreenDia:!1,activeName:"Hosts",load_data:!0,flag:!0,tabIndex:"",hostIndex:0,screenIndex:0,hostEditType:!1,hostDia:{title:"",deviceId:"",deviceNumber:"",deviceName:"",owner:0,shopId:"",shopName:""},page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},hostsList:{deviceNumber:"",deviceName:"",shopName:"",shopId:"",longTimeVisit:""},screensList:{deviceId:"",deviceNumber:"",shopName:"",shopId:"",selfId:"",screenName:"",longTimeVisit:""},addScreens:{deviceId:"",deviceName:"",deviceNumber:"",addScreenList:[],hasScreenList:[]},addScreenForm:{title:"",screenName:"",screenId:"",selfId:"",width:"",height:"",deviceId:"",deviceNumber:"",deviceName:""},tableData1:[],tableData2:[]}},mounted:function(){this.load_data=!0,this.hostTab(1)},methods:{tabClick:function(){for(var e in this.page)this.page[e]="pageNo"===e?1:0;this.load_data=!0,"Hosts"===this.activeName&&(this.hostIndex+=1,1===this.hostIndex?(this.screenIndex=0,this.page.pageNo=1,this.hostTab(1)):this.load_data=!1),"screens"===this.activeName&&(this.screensList.deviceId="",this.screenIndex+=1,1===this.screenIndex?(this.hostIndex=0,this.page.pageNo=1,this.screenTab(1)):this.load_data=!1)},searchHost:function(){this.load_data=!0,"Hosts"===this.activeName?this.hostTab(1):"screens"===this.activeName&&this.screenTab(1)},clearHost:function(){if(this.load_data=!0,"Hosts"===this.activeName){for(var e in this.hostsList)this.hostsList[e]="";this.hostTab(1)}else if("screens"===this.activeName){for(var e in this.screensList)this.screensList[e]="";this.screenTab(1)}},pageChange:function(e){this.page.pageNo=e,"Hosts"==this.activeName?this.hostTab(e):"screens"===this.activeName&&this.screenTab(e)},newHost:function(){this.hostDia.title="新增主机",this.centerDialogVisible=!0,this.hostEditType=!1},editHost:function(e){this.tabIndex=e.$index,this.centerDialogVisible=!0,this.hostDia.title="编辑主机",this.hostDia.deviceId=e.row.deviceId,this.hostDia.deviceNumber=e.row.number,this.hostDia.deviceName=e.row.name,0==e.row.shopId||40261649==e.row.shopId?this.hostDia.owner=0:this.hostDia.owner=1,this.hostDia.shopName=e.row.shopName,this.hostDia.shopId=e.row.shopId},searchOwer:function(){this.load_data=!0,40261649==this.hostDia.shopId?(this.hostDia.shopId="",this.hostDia.shopName="",i({text:"该商家为脸脸专有，请选择其他商户",allowOutsideClick:!1}),this.load_data=!1):this.shopLoadName(this.hostDia.shopId)},addScrDevic:function(){this.loadInfoByNumber(this.addScreenForm.deviceNumber)},addScreen:function(e){this.addDialogVisible=!0,this.addScreens.deviceName=e.row.name,this.addScreens.deviceNumber=e.row.number,this.addScreens.deviceId=e.row.deviceId;var t={};t.deviceId=this.addScreens.deviceId,t.name="",t.selfId="",t.width="",t.height="",this.addScreens.addScreenList.push(t),this.screenLoadInfo(e.row.deviceId)},addScrenInfo:function(){if(0===this.addScreens.addScreenList.length){var e={};e.deviceId=this.addScreens.deviceId,e.name="",e.selfId="",e.width="",e.height="",this.addScreens.addScreenList.push(e)}else this.addScreenJudge()},moveUp:function(e,t){var a=t-1,s=e.screenId,i=this.addScreens.hasScreenList[a].screenId;this.exchange(s,i)},moveDown:function(e,t){var a=t+1,s=e.screenId,i=this.addScreens.hasScreenList[a].screenId;this.exchange(s,i)},lookScreenNum:function(e){this.activeName="screens",this.page.pageNo=1,this.screensList.deviceId=e.row.deviceId,this.screenTab(1)},deletHost:function(e){var t=e-1;this.addScreens.addScreenList.splice(t,1)},nowAddScreenList:n.debounce(function(){if(this.addScreens.addScreenList.length>0){for(var e=this.addScreens.addScreenList.length,t=0,a=0;a<e;a++){if(""==this.addScreens.addScreenList[a].name){this.$message({message:"屏名称不能为空",type:"warning"}),t=1;break}if(this.addScreens.addScreenList[a].name.length>16){this.$message({message:"屏名称不能超过16个字",type:"warning"}),t=1;break}if(""!=this.addScreens.addScreenList[a].width||""!=this.addScreens.addScreenList[a].height){if(this.addScreens.addScreenList[a].width<0||this.addScreens.addScreenList[a].height<0){this.$message({message:"屏的宽不能小于0",type:"warning"}),t=1;break}if(""==this.addScreens.addScreenList[a].width||""==this.addScreens.addScreenList[a].height){this.$message({message:"屏的宽高必选同时存在",type:"warning"}),t=1;break}}}if(0===t){this.load_data=!0;var s={deviceId:this.addScreens.deviceId,name:this.addScreens.addScreenList[0].name,selfId:this.addScreens.addScreenList[0].selfId};""!=this.addScreens.addScreenList[0].width&&(s.width=this.addScreens.addScreenList[0].width,s.height=this.addScreens.addScreenList[0].height),this.screenSave(s)}}else 0===this.addScreens.addScreenList.length&&this.$message({message:"请新增屏",type:"warning"})},300),cancelScreenList:function(){for(var e in this.addScreens.addScreenList[0])this.addScreens.addScreenList[0][e]=""},cancelScreenLists:function(){this.addDialogVisible=!1,this.hostTab(this.page.pageNo),this.addScreens.deviceName="",this.addScreens.deviceNumber="",this.addScreens.addScreenList=[]},owenSwitch:function(){0!=this.hostDia.shopId&&40261649!=this.hostDia.shopId||(this.hostDia.shopId="",this.hostDia.shopName="")},nowAdd:n.debounce(function(){""===this.hostDia.deviceName?this.$message({message:"主机名称不能为空",type:"warning"}):0!=this.hostDia.owner?""==this.hostDia.shopId?this.$message({message:"所有商户ID不空",type:"warning"}):""==this.hostDia.shopName?this.$message({message:"所有商户名称不空",type:"warning"}):this.flag&&(this.load_data=!0,this.flag=!1,this.deviceSave()):(this.load_data=!0,this.deviceSave())},300),cancelAdd:function(){for(var e in this.centerDialogVisible=!1,this.hostDia)this.hostDia[e]="","owner"===e&&(this.hostDia[e]=0),"shopId"===e&&(this.hostDia[e]=0)},newAddScreen:function(){this.addScreenDia=!0,this.addScreenForm.title="新增屏"},editScreen:function(e){this.tabIndex=e.$index,this.addScreenDia=!0,this.addScreenForm.title="编辑屏",this.addScreenForm.screenName=e.row.name,this.addScreenForm.selfId=e.row.selfId,this.addScreenForm.deviceId=e.row.deviceId,this.addScreenForm.deviceNumber=e.row.deviceNumber,this.loadInfoByNumber(this.addScreenForm.deviceNumber,"编辑"),this.addScreenForm.screenId=e.row.screenId,this.editScreenInfo(e.row.screenId)},immediatelyAdd:n.debounce(function(){""===this.addScreenForm.screenName?this.$message({message:"屏名称不能为空",type:"warning"}):""!=this.addScreenForm.width||""!=this.addScreenForm.height?this.addScreenForm.width<0||this.addScreenForm.height<0?this.$message({message:"屏的宽不能小于0",type:"warning"}):""==this.addScreenForm.width||""==this.addScreenForm.height?this.$message({message:"屏的宽高必选同时存在",type:"warning"}):""!==this.addScreenForm.deviceNumber&&""===this.addScreenForm.deviceName?this.$message({message:"查无此ID",type:"warning"}):(this.load_data=!0,this.screenSave()):(this.load_data=!0,this.screenSave())},300),immediatelyCancel:function(){for(var e in this.addScreenDia=!1,this.addScreenForm)this.addScreenForm[e]=""},hostTab:function(e){var t=this,a="";a=""!==t.hostsList.longTimeVisit,s.k({number:t.hostsList.deviceNumber,name:t.hostsList.deviceName,shopName:t.hostsList.shopName,shopId:t.hostsList.shopId,longTimeVisit:a,pageNo:e}).then(function(e){var a=e.data;0==a.status?(t.load_data=!1,t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.tableData1=a.object.objects):t.$message.error(e.errorMsg)}).catch(function(e){i({text:"请求服务器失败",allowOutsideClick:!1}),t.load_data=!1})},screenTab:function(e){var t=this,a="";a=""!==t.screensList.longTimeVisit,s.z({deviceId:t.screensList.deviceId,screenName:t.screensList.screenName,deviceNumber:t.screensList.deviceNumber,shopName:t.screensList.shopName,shopId:t.screensList.shopId,longTimeVisit:a,selfId:t.screensList.selfId,pageNo:e}).then(function(e){var a=e.data;0==a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.tableData2=a.object.objects):t.tableData2=[]):t.$message.error(a.errorMsg)}).catch(function(e){t.load_data=!1,i({text:"请求屏列表服务器失败",allowOutsideClick:!1})})},deviceSave:function(){var e=this,t={name:e.hostDia.deviceName,owner:e.hostDia.owner};0==e.hostDia.owner?t.shopId=40261649:t.shopId=e.hostDia.shopId,"编辑主机"==e.hostDia.title&&(t.deviceId=e.hostDia.deviceId),s.e(t).then(function(t){var a=t.data;if(0===a.status){for(var s in e.flag=!0,e.load_data=!1,e.centerDialogVisible=!1,"编辑主机"==e.hostDia.title?(e.tableData1[e.tabIndex].name=e.hostDia.deviceName,e.tableData1[e.tabIndex].owner=e.hostDia.owner,0==e.hostDia.owner?(e.tableData1[e.tabIndex].shopId=40261649,e.tableData1[e.tabIndex].shopName="脸脸所有"):(e.tableData1[e.tabIndex].shopId=e.hostDia.shopId,e.tableData1[e.tabIndex].shopName=e.hostDia.shopName),e.$message({message:"编辑主机成功",type:"success"})):(e.$message({message:"新增主机成功",type:"success"}),e.hostTab(1)),e.hostDia)e.hostDia[s]="owner"===s?0:"";e.tabIndex=""}else e.load_data=!1,e.$message.error(a.errorMsg)}).catch(function(t){e.$message.error(t)})},screenSave:function(e){var t=this,a="";"Hosts"===t.activeName?a=e:(a={deviceId:t.addScreenForm.deviceId,name:t.addScreenForm.screenName,selfId:t.addScreenForm.selfId},""===t.addScreenForm.width||(a.width=t.addScreenForm.width),""===t.addScreenForm.height||(a.height=t.addScreenForm.height),"编辑屏"===t.addScreenForm.title&&(a.screenId=t.addScreenForm.screenId)),s.B(a).then(function(e){var s=e.data;if(0===s.status)if(t.load_data=!1,"Hosts"===t.activeName){for(var n in t.addScreens.addScreenList[0])t.addScreens.addScreenList[0][n]="";t.$message({message:"成功添加屏",type:"success"}),t.screenLoadInfo(a.deviceId)}else for(var o in t.addScreenDia=!1,"编辑屏"===t.addScreenForm.title?(t.$message({message:"编辑屏幕成功",type:"success"}),t.screenTab(t.page.pageNo)):(t.$message({message:"新增屏幕成功",type:"success"}),t.page.pageNo=1,t.screenTab(1)),t.addScreenForm)t.addScreenForm[o]="";else t.load_data=!1,i({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},deviceLoadInfo:function(e){var t=this;t.addScreenForm.deviceId="",s.d({deviceId:e}).then(function(e){var a=e.data;0===a.status&&(t.load_data=!1,a.object?(t.addScreenForm.deviceId=a.object.deviceId,t.addScreenForm.deviceName=a.object.shopName):(t.addScreenForm.deviceId="",t.addScreenForm.deviceName="",i({text:"查无此id",allowOutsideClick:!1})))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},loadInfoByNumber:function(e,t){var a=this;s.q({number:e}).then(function(e){var s=e.data;0===s.status?(a.load_data=!1,s.object&&(a.addScreenForm.deviceNumber=s.object.number,a.addScreenForm.deviceName=s.object.name,a.addScreenForm.deviceId=s.object.deviceId)):(a.addScreenForm.deviceNumber="",a.addScreenForm.deviceName="",a.addScreenForm.deviceId="",void 0==t&&i({text:s.errorMsg,allowOutsideClick:!1}))}).catch(function(e){a.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},shopLoadName:function(e){var t=this;s.E({shopId:e}).then(function(e){var a=e.data;0===a.status&&(t.load_data=!1,a.object?t.hostDia.shopName=a.object:(t.hostDia.shopId="",t.hostDia.shopName="",i({text:"查无此id",allowOutsideClick:!1})))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},editScreenInfo:function(e){var t=this,a=this;s.g({screenId:e}).then(function(e){var s=e.data;0===s.status?s.object&&(t.addScreenForm.screenName=s.object.name,t.addScreenForm.selfId=s.object.selfId,t.addScreenForm.width=s.object.width,t.addScreenForm.height=s.object.height):(a.load_data=!1,i({text:s.errorMsg,allowOutsideClick:!1}))}).catch(function(e){a.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},screenLoadInfo:function(e){var t=this,a=this;s.A({deviceId:e}).then(function(e){var s=e.data;0===s.status?a.addScreens.hasScreenList=s.object.screens:t.$message({message:"查无此id",type:"warning"})}).catch(function(e){a.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},addScreenJudge:function(){var e=this.addScreens.addScreenList.length-1;if(""===this.addScreens.addScreenList[e].name)this.$message({message:"屏名称不能为空",type:"warning"});else if(this.addScreens.addScreenList[e].name.length>16)this.$message({message:"屏名称不能超过16个字",type:"warning"});else if(""!=this.addScreens.addScreenList[e].width||""!=this.addScreens.addScreenList[e].height)if(this.addScreens.addScreenList[e].width<0||this.addScreens.addScreenList[e].height<0)this.$message({message:"屏的宽高不能小于0",type:"warning"});else{var t={};t.deviceId=this.addScreens.deviceId,t.name="",t.selfId="",t.width="",t.height="",this.addScreens.addScreenList.push(t)}else{var a={};a.deviceId=this.addScreens.deviceId,a.name="",a.selfId="",a.width="",a.height="",this.addScreens.addScreenList.push(a)}},exchange:function(e,t){var a=this,n=this;s.i({screenId:e,screenId2:t}).then(function(e){var t=e.data;0===t.status?(n.$message({message:"成功调整屏幕顺序",type:"success"}),n.screenLoadInfo(n.addScreens.deviceId)):a.$message({message:t.errorMsg,type:"warning"})}).catch(function(e){n.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipMent"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"主机",name:"Hosts"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"屏",name:"screens"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"Hosts"===e.activeName,expression:"activeName ==='Hosts'"}]},[a("el-button",{staticClass:"tabButton",attrs:{type:"primary"},on:{click:e.newHost}},[e._v("新增主机")]),e._v(" "),a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"主机编号"}},[a("el-input",{attrs:{placeholder:"输入设备编号搜索"},model:{value:e.hostsList.deviceNumber,callback:function(t){e.$set(e.hostsList,"deviceNumber",t)},expression:"hostsList.deviceNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名称"}},[a("el-input",{attrs:{placeholder:"输入设备名称搜索"},model:{value:e.hostsList.deviceName,callback:function(t){e.$set(e.hostsList,"deviceName",t)},expression:"hostsList.deviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所有商户名称"}},[a("el-input",{attrs:{placeholder:"输入设备名称搜索"},model:{value:e.hostsList.shopName,callback:function(t){e.$set(e.hostsList,"shopName",t)},expression:"hostsList.shopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所有商户ID"}},[a("el-input",{attrs:{placeholder:"输入设备名称搜索"},model:{value:e.hostsList.shopId,callback:function(t){e.$set(e.hostsList,"shopId",t)},expression:"hostsList.shopId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-checkbox",{attrs:{label:"长时间未访问",border:""},model:{value:e.hostsList.longTimeVisit,callback:function(t){e.$set(e.hostsList,"longTimeVisit",t)},expression:"hostsList.longTimeVisit"}},[e._v("长时间未访问")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchHost}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clearHost}},[e._v("清空")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData1,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",prop:"number",label:"主机编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"主机名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"shopName",label:"所有商户"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"shopId",label:"所有商户ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"visitTime",label:"上次访问时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"连接屏数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(a){e.lookScreenNum(t)}}},[e._v(e._s(t.row.screenCount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.addScreen(t)}}},[e._v("新增屏幕")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editHost(t)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"screens"===e.activeName,expression:"activeName ==='screens'"}]},[a("el-button",{staticClass:"tabButton",attrs:{type:"primary"},on:{click:e.newAddScreen}},[e._v("新增屏")]),e._v(" "),a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"主机设备编号"}},[a("el-input",{attrs:{placeholder:"输入设备编号搜索"},model:{value:e.screensList.deviceNumber,callback:function(t){e.$set(e.screensList,"deviceNumber",t)},expression:"screensList.deviceNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联主机所属商户名称"}},[a("el-input",{attrs:{placeholder:"输入设备名称搜索"},model:{value:e.screensList.shopName,callback:function(t){e.$set(e.screensList,"shopName",t)},expression:"screensList.shopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联主机所属商户ID"}},[a("el-input",{attrs:{placeholder:"输入设备名称搜索"},model:{value:e.screensList.shopId,callback:function(t){e.$set(e.screensList,"shopId",t)},expression:"screensList.shopId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"屏物理ID"}},[a("el-input",{attrs:{placeholder:"输入设备名称搜索"},model:{value:e.screensList.selfId,callback:function(t){e.$set(e.screensList,"selfId",t)},expression:"screensList.selfId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-checkbox",{attrs:{label:"长时间未访问",border:""},model:{value:e.screensList.longTimeVisit,callback:function(t){e.$set(e.screensList,"longTimeVisit",t)},expression:"screensList.longTimeVisit"}},[e._v("长时间未访问")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchHost}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clearHost}},[e._v("清空")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"tables2",attrs:{data:e.tableData2,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"name",label:"屏名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"selfId",label:"屏物理ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ratio",label:"屏分辨率（像素）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"关联主机所属商户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopId",label:"关联主机所属商户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceNumber",label:"主机设备编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"visitTime",label:"上次访问时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editScreen(t)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.hostDia.title,visible:e.centerDialogVisible,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{attrs:{"label-width":"100px","label-position":"right"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hostEditType,expression:"hostEditType"}],attrs:{label:"主机编号",required:!0}},[e._v("\n          "+e._s(e.hostDia.deviceNumber)+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"主机名称",required:!0}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.hostDia.deviceName,callback:function(t){e.$set(e.hostDia,"deviceName",t)},expression:"hostDia.deviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所有权",required:!0}},[a("el-radio-group",{on:{change:e.owenSwitch},model:{value:e.hostDia.owner,callback:function(t){e.$set(e.hostDia,"owner",t)},expression:"hostDia.owner"}},[a("el-radio",{attrs:{label:0}},[e._v("脸脸所有")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("商户所有")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.hostDia.owner,expression:"hostDia.owner == 1"}],attrs:{label:"所有商户ID",required:!0}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"number",oninput:"if(value.length>8)value=value.slice(0,8)"},on:{blur:e.searchOwer},model:{value:e.hostDia.shopId,callback:function(t){e.$set(e.hostDia,"shopId",t)},expression:"hostDia.shopId"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.hostDia.owner,expression:"hostDia.owner == 1"}],attrs:{label:"所有商户"}},[e._v("\n          "+e._s(e.hostDia.shopName)+"\n        ")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["新增主机"==e.hostDia.title?a("el-button",{attrs:{type:"primary"},on:{click:e.nowAdd}},[e._v("立即新增")]):e._e(),e._v(" "),"编辑主机"==e.hostDia.title?a("el-button",{attrs:{type:"primary"},on:{click:e.nowAdd}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancelAdd}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"addScreenDia",attrs:{title:"新增屏幕",visible:e.addDialogVisible,"close-on-click-modal":!1,width:"750px"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.cancelScreenLists}},[a("div",{staticClass:"hostInfor"},[a("p",[e._v("主机信息")]),e._v(" "),a("p",{staticClass:"pList"},[a("span",{staticClass:"hostSpan"},[e._v("主机名称：")]),a("span",[e._v(e._s(e.addScreens.deviceName))])]),e._v(" "),a("p",{staticClass:"pList"},[a("span",{staticClass:"hostSpan"},[e._v("主机编号：")]),a("span",[e._v(e._s(e.addScreens.deviceNumber))])])]),e._v(" "),a("div",{staticClass:"divConTent"},[a("div",{staticClass:"leftDiv"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:e.addScreens.addScreenList.length>0,expression:"addScreens.addScreenList.length>0"}],staticClass:"newScreenList"},e._l(e.addScreens.addScreenList,function(t,s){return a("li",[a("div",{staticClass:"hostInfor"},[a("p",{staticClass:"hostP"},[a("span",[e._v("新增屏")])]),e._v(" "),a("el-form",{attrs:{"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"屏名称：",required:!0}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"输入所属屏幕名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"屏物理ID："}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",placeholder:"输入所属屏幕物理ID",oninput:"if(value.length>10)value=value.slice(0,10)"},model:{value:t.selfId,callback:function(a){e.$set(t,"selfId",a)},expression:"item.selfId"}})],1),e._v(" "),a("div",{staticClass:"screenFbl"},[a("p",[a("span",{staticStyle:{color:"#272727"}},[e._v("屏分辨率")]),e._v(" "),a("span",{staticStyle:{color:"#8D8987","font-size":"12px"}},[e._v("(单位：像素)")])]),e._v(" "),a("el-form-item",{attrs:{label:"宽","label-width":"30px"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",placeholder:"输入屏幕高度像素",oninput:"if(value.length>6)value=value.slice(0,6)"},model:{value:t.width,callback:function(a){e.$set(t,"width",a)},expression:"item.width"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"高","label-width":"30px"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",placeholder:"输入屏幕宽度像素",oninput:"if(value.length>6)value=value.slice(0,6)"},model:{value:t.height,callback:function(a){e.$set(t,"height",a)},expression:"item.height"}})],1)],1)],1)],1)])})),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"95%"},on:{click:e.nowAddScreenList}},[e._v("新增屏幕")])],1)]),e._v(" "),a("div",{staticClass:"hasInfor"},[e._l(e.addScreens.hasScreenList,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.addScreens.hasScreenList.length>0,expression:"addScreens.hasScreenList.length>0"}],staticClass:"hostInfor hasInforList"},[a("p",{staticClass:"fileList"},[a("span",[0==s?a("span",[e._v("已有屏")]):e._e()]),e._v(" "),a("span",[0!=s?a("span",{staticClass:"removeFileSpan",on:{click:function(a){e.moveUp(t,s)}}},[e._v("上移")]):e._e(),e._v(" "),s!==e.addScreens.hasScreenList.length-1?a("span",{staticClass:"removeFileSpan",on:{click:function(a){e.moveDown(t,s)}}},[e._v("下移")]):e._e()])]),e._v(" "),a("p",{staticClass:"pList"},[a("span",{staticClass:"hasScreenSpan"},[e._v("屏名称：")]),a("span",[e._v(e._s(t.screenName))])]),e._v(" "),a("p",{staticClass:"pList"},[a("span",{staticClass:"hasScreenSpan"},[e._v("屏物理ID：")]),t.selfId?a("span",[e._v(e._s(t.selfId))]):e._e(),t.selfId?e._e():a("span",{staticClass:"hostSpan"},[e._v("未绑定物理ID")])])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.addScreens.hasScreenList.length,expression:"addScreens.hasScreenList.length ==0"}]},[a("p",{staticStyle:{padding:"10px"}},[e._v("已有屏")]),e._v(" "),a("p",{staticStyle:{padding:"10px","text-align":"center"}},[e._v("暂无已有屏")])])],2)]),e._v(" "),a("el-button",{staticClass:"addBtn",staticStyle:{display:"none"},on:{click:e.addScrenInfo}},[e._v("新增屏")])],1),e._v(" "),a("el-dialog",{attrs:{title:e.addScreenForm.title,visible:e.addScreenDia,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addScreenDia=t}}},[a("el-form",{attrs:{"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"屏名称：",required:!0}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"输入所属屏名称"},model:{value:e.addScreenForm.screenName,callback:function(t){e.$set(e.addScreenForm,"screenName",t)},expression:"addScreenForm.screenName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"屏物理ID："}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",placeholder:"输入所属物理屏ID",oninput:"if(value.length>10)value=value.slice(0,10)"},model:{value:e.addScreenForm.selfId,callback:function(t){e.$set(e.addScreenForm,"selfId",t)},expression:"addScreenForm.selfId"}})],1),e._v(" "),a("div",{staticClass:"screenFbl",staticStyle:{background:"#F5F5F6","margin-bottom":"10px"}},[a("p",[a("span",{staticStyle:{color:"#272727"}},[e._v("屏分辨率")]),e._v(" "),a("span",{staticStyle:{color:"#8D8987","font-size":"12px"}},[e._v("(单位：像素)")])]),e._v(" "),a("el-form-item",{attrs:{label:"宽","label-width":"30px"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",placeholder:"输入屏幕高度像素",oninput:"if(value.length>6)value=value.slice(0,6)"},model:{value:e.addScreenForm.width,callback:function(t){e.$set(e.addScreenForm,"width",t)},expression:"addScreenForm.width"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"高","label-width":"30px"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"number",placeholder:"输入屏幕宽度像素",oninput:"if(value.length>6)value=value.slice(0,6)"},model:{value:e.addScreenForm.height,callback:function(t){e.$set(e.addScreenForm,"height",t)},expression:"addScreenForm.height"}})],1)],1),e._v(" "),a("p",{staticStyle:{"border-top":"1px solid #DFF4F4",padding:"10px 0"}},[e._v("绑定主机")]),e._v(" "),a("el-form-item",{attrs:{label:"主机编号："}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"输入所属主机编号进行查询"},on:{change:e.addScrDevic},model:{value:e.addScreenForm.deviceNumber,callback:function(t){e.$set(e.addScreenForm,"deviceNumber",t)},expression:"addScreenForm.deviceNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名称："}},[e._v("\n          "+e._s(e.addScreenForm.deviceName)+"\n        ")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["新增屏"==e.addScreenForm.title?a("el-button",{attrs:{type:"primary"},on:{click:e.immediatelyAdd}},[e._v("立即新增")]):e._e(),e._v(" "),"编辑屏"==e.addScreenForm.title?a("el-button",{attrs:{type:"primary"},on:{click:e.immediatelyAdd}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{on:{click:e.immediatelyCancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("设备管理")])])])}]};var r=a("vSla")(o,l,!1,function(e){a("u8o/")},null,null);t.a=r.exports},"2YM8":function(e,t,a){"use strict";var s=a("a3Yh"),i=a.n(s),n=a("XZGR"),o=a("psC7"),l=a("BYch"),r=a("dTto"),c=a("QI2T"),d=a("Y0Uy"),u=a("FukM"),p=a("6ROu"),h={name:"CloudSeedPlan",components:{materiaList:l.a,preview:o.a,screenList:r.a},data:function(){return{load_data:!1,dialogVisible:!1,modifyPlanDia:!1,viewSwitche:!0,activeName:"WeekPlan",diaLogMateria:!1,screenDialog:!1,previewMateria:!1,allFormat:["jpg","jpeg","gif","png","bmp","avi","rm","rmvb","wmv","mp4","flv","mov","dwv","dat","amv","mp3","wav","wma","wav","ogg","ape","acc"],previewInfo:{},chooseDay:"今天",weekContext:"本周",daySelect:"",weekList:[],topScreen:0,leftScreen:0,screenPosition:"",copyWeekPlan:"",openScreen:{saveScreenStyle:!1,screenStyle:"",screeName:"",screeId:"",operationShopId:""},page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},shopId:"",screenId:"",tabList:[],materiaObject:{},uploadStatus:!1,token:"",againUploadIndex:"",againUploadId:"",defaultView:"week",beginTime:[new Date,new Date],endTime:[new Date,new Date],editorId:"",material:"上传素材",listViewDia:{materalName:"",planStatu:"",palnTime:"",playStatu:"",allScreen:""},planStatuList:[{value:1,label:"正常计划"},{value:2,label:"冲突计划"},{value:3,label:"已播计划"}],playType:0,stores:[],screenSelct:"",schedules:[],storeList:[{label:"全部门店",options:[{value:"全部门店",label:"全部门店"}]},{label:"有屏门店",options:[{value:"西溪印象城",label:"西溪印象城"},{value:"古墩印象城",label:"古墩印象城"}]},{label:"无屏门店",options:[{value:"龙首印象城",label:"龙首印象城"}]}],screens:[],screenList:[],list:[{colorStyle:"#409EFF",text:"编播计划"},{colorStyle:"#FFAE1C",text:"插播计划"},{colorStyle:"#FF5A5A ",text:"编播计划时间重复"}],playStatuList:[{value:0,label:"编播计划"},{value:1,label:"插播计划"}],materialData:[],uploadFileList:[],selectFileList:[],addScreenList:[],screenIds:[],modifyForm:{modifyPlanStyle:"single",planList:[],startDate:"",type:"",startTime:"",endTime:"",materaName:"",typeCN:"",materialId:"",timeSelect:[],screenId:"",planId:"",planContent:""}}},mounted:function(){this.initFullCalendar(),this.screenList=[];var e=this.$route.query.shopId,t=this.$route.query.screenId;this.shopId=e,this.screenId=t,this.listViewDia.allScreen=t,this.screenFindPage(1),this.calendar.clear(),this.setDate(new Date)},methods:{initFullCalendar:function(){this.calendar=new u("#calendar",{defaultView:this.defaultView,taskView:!1,scheduleView:"time",theme:{"week.timegridOneHour.height":"120px","week.timegrid.paddingRight":"10px"},template:{time:function(e){var t=p(e.start.toUTCString()),a=p(e.end.toUTCString());return""!==e.dueDateClass?"<p style='color:#878787'>"+e.title+"<br><span style='color:#272727'>"+t.format("HH:mm")+" --"+a.format("HH:mm")+'&nbsp;&nbsp;&nbsp;<span style="display:inline-block;padding:3px;border:1px solid #f00;">'+e.dueDateClass+"</span></span></p>":"<p style='color:#878787'>"+e.title+"<br><span style='color:#272727'>"+t.format("HH:mm")+" --"+a.format("HH:mm")+"</span></p>"}},week:{daynames:["周日","周一","周二","周三","周四","周五","周六"],startDayOfWeek:1,narrowWeekend:!1}});var e=this;this.calendar.createSchedules(this.schedules),this.calendar.on("beforeCreateSchedule",function(t){e.dialogVisible=!0,e.addScreenList=[],e.screenFindPage(1,"新建计划"),e.beginTime=[t.start,t.end],e.endTime=[t.start,t.end]}),this.calendar.on("beforeUpdateSchedule",function(t){var a=t.schedule,s=t.start,i=t.end,n=a.attendees.planId,o=a.attendees.materialId,l=a.attendees.type,r=e.shopId,c=p(s.toUTCString()).format("YYYY-MM-DD"),d=p(s.toUTCString()).format("HH:mm:ss"),u=p(i.toUTCString()).format("HH:mm:ss"),h=a.attendees.screenId;e.updatePlan(n,r,o,l,c,d,u,h,"拖拽",a,s,i)}),this.calendar.on("clickDayname",function(t){"week"===e.calendar.getViewName()&&(e.defaultView="day",e.calendar.setDate(new Date(t.date)),e.calendar.changeView(e.defaultView,!0))}),this.calendar.on("clickSchedule",function(t){var a=t.schedule;e.modifyPlanDia=!0,e.modifyForm.modifyPlanStyle="single",e.modifyForm.planId=a.attendees.planId,e.modifyForm.materaName=a.title,e.modifyForm.materialId=a.attendees.materialId,e.modifyForm.startDate=p(a.start.toUTCString()).format("YYYY-MM-DD"),e.modifyForm.type=a.attendees.type,e.modifyForm.screenId=a.attendees.screenId,e.modifyForm.timeSelect=[a.start,a.end],e.modifyForm.typeCN=a.attendees.typeCN})},createPlan:function(){this.dialogVisible=!0,this.uploadStatus=!1,this.addScreenList=[],this.screenFindPage(1,"新建计划")},listView:function(){this.viewSwitche=!1,this.load_data=!0,this.planFindList(1)},pageChange:function(e){this.page.pageNo=e,this.load_data=!0,this.planFindList(e)},searchScreen:function(){this.load_data=!0,this.page.pageNo=1,this.page.total=0,this.planFindList(1)},clearScreen:function(){for(var e in this.load_data=!0,this.listViewDia)this.listViewDia[e]="";this.page.pageNo=1,this.page.total=0,this.planFindList(1)},closePreview:function(e){this.previewMateria=e},chartView:function(){this.viewSwitche=!0},screenPrev:function(){this.screenList.length},screenNext:function(){this.screenList.length},allConst:function(){this.screenPosition=""},screenItem:function(e,t){this.topScreen=e.currentTarget.offsetTop+20+"px",this.leftScreen=e.currentTarget.offsetLeft+e.currentTarget.offsetWidth/4+"px",this.screenPosition=t},screenSelectTime:function(){if(this.listViewDia.allScreen=this.screenSelct,this.schedules=[],this.calendar.clear(),""!==this.screenSelct)for(var e in this.weekList)this.findScreenList(this.screenSelct,this.weekList[e]);else if(this.screenId&&this.shopId)for(var t in this.weekList)this.findScreenList(this.screenId,this.weekList[t])},prev:function(){this.calendar.prev();var e=p((new Date).toUTCString()).format("YYYY-M-D");if("WeekPlan"===this.activeName){if(this.schedules=[],this.calendar.clear(),this.setDate(this.addDate(this.currentFirstDate,-7)),-1!=this.weekList.indexOf(e))this.weekContext="本周";else{var t=this.weekList[0].split("-")[0]+"."+this.weekList[0].split("-")[1]+"."+this.weekList[0].split("-")[2],a=this.weekList[6].split("-")[1]+"."+this.weekList[6].split("-")[2];this.weekContext=t+"~"+a}if(""!==this.screenSelct)for(var s in this.weekList)this.findScreenList(this.screenSelct,this.weekList[s]);else if(this.screenId&&this.shopId)for(var i in this.weekList)this.findScreenList(this.screenId,this.weekList[i])}},next:function(){this.calendar.next();var e=p((new Date).toUTCString()).format("YYYY-M-D");if("WeekPlan"===this.activeName){if(this.schedules=[],this.calendar.clear(),this.setDate(this.addDate(this.currentFirstDate,7)),-1!=this.weekList.indexOf(e))this.weekContext="本周";else{var t=this.weekList[0].split("-")[0]+"."+this.weekList[0].split("-")[1]+"."+this.weekList[0].split("-")[2],a=this.weekList[6].split("-")[1]+"."+this.weekList[6].split("-")[2];this.weekContext=t+"~"+a}if(""!==this.screenSelct)for(var s in this.weekList)this.findScreenList(this.screenSelct,this.weekList[s]);else if(this.screenId&&this.shopId)for(var i in this.weekList)this.findScreenList(this.screenId,this.weekList[i])}},week:function(){if(this.calendar.today(),this.defaultView="week",this.calendar.changeView(this.defaultView,!0),"WeekPlan"===this.activeName)if(this.weekContext="本周",this.schedules=[],this.calendar.clear(),this.setDate(new Date),""!==this.screenSelct)for(var e in this.weekList)this.findScreenList(this.screenSelct,this.weekList[e]);else if(this.screenId&&this.shopId)for(var t in this.weekList)this.findScreenList(this.screenId,this.weekList[t])},today:function(){var e=p(this.daySelect.toUTCString()).format("YYYY-MM-DD");this.daySelect=e,this.defaultView="day",this.calendar.setDate(new Date(this.daySelect)),this.calendar.changeView(this.defaultView,!0)},dataPlan:function(e,t){if(this.viewSwitche=!0,"WeekPlan"===e.name){if(this.defaultView="week",this.schedules=[],this.calendar.clear(),""!==this.screenSelct)for(var a in this.weekList)this.findScreenList(this.screenSelct,this.weekList[a]);else if(this.screenId&&this.shopId)for(var s in this.weekList)this.findScreenList(this.screenId,this.weekList[s])}else this.defaultView="day";this.calendar.changeView(this.defaultView,!0)},selectMaterial:d.debounce(function(e){this.diaLogMateria=!0,this.findMaterials(1)},300),againSelectMaterial:d.debounce(function(e,t){this.againUploadIndex=t,this.diaLogMateria=!0,this.findMaterials(1)},300),addScreen:d.debounce(function(){this.screenDialog=!0,this.openScreen.saveScreenStyle=!1,this.openScreen.screenStyle="newOpen",this.openScreen.screeName="屏列表",this.openScreen.screeId="-1",this.openScreen.operationShopId=this.shopId,this.screenFindPage(1,"添加屏幕")},300),lookScreen:function(){},copyScreen:function(e){this.screenDialog=!0,"dayPlan"===this.activeName?this.openScreen.screenStyle="copyDay":"WeekPlan"===this.activeName&&(this.openScreen.screenStyle="copyWeek"),this.openScreen.screeId=e.id,this.openScreen.screeName=e.value},closeScreen:d.debounce(function(e,t){for(var a in this.screenDialog=t,this.screenIds=[],e)this.screenIds.push(e[a].screenId);this.addScreenList=e},300),chooseMaterial:d.debounce(function(e,t){if(t){var a={};a.materialId=t.materialId,a.name=t.name,a.type=t.type,a.tagName=t.tagName,a.tagId=t.tagId,a.tagCN=t.tagCN,a.url=t.url,this.selectFileList=[a]}this.againUploadIndex="",this.diaLogMateria=e},300),againUpload:d.debounce(function(e,t){this.againUploadId="",this.againUploadIndex=t},300),onProgress:function(){this.uploadStatus=!0},beforeUpload:function(e){var t=e.size,a=e.name.split(".").length-1,s=e.name.split(".")[a].toLowerCase();return t>104857600||104857600==t?(this.$message({message:"上传文件不能大于100M",type:"warning"}),this.uploadStatus=!1,!1):-1==this.allFormat.indexOf(s)?(this.$message({message:"不支持该格式文件",type:"warning"}),this.uploadStatus=!1,!1):void 0},error:function(e,t,a){this.$message({message:"上传失败",type:"error"}),this.uploadStatus=!1},success:function(e,t,a){var s=t.size;if(s>104857600||104857600==s)this.$message({message:"上传文件不能大于100M",type:"warning"});else{var i=t.name.split(".").length-1,n=t.name.split(".")[i].toLowerCase(),o={};if("jpg"===n||"jpeg"===n||"gif"===n||"png"===n||"bmp"===n?(o.matrialType="图片",o.type=0):"avi"===n||"rm"===n||"rmvb"===n||"wmv"===n||"mp4"===n||"flv"===n||"mov"===n||"mtv"===n||"dwv"===n||"dat"===n||"amv"===n?(o.type=2,o.matrialType="视频"):"mp3"===n||"wav"===n||"wma"===n||"wav"===n||"ogg"===n||"ape"===n||"acc"===n?(o.type=1,o.matrialType="音频"):(o.type="",o.matrialType="未知"),"未知"==o.matrialType)this.$message({message:"不支持该格式文件",type:"warning"}),this.uploadStatus=!1;else{for(var l=[],r=0;r<i;r++)l.push(t.name.split(".")[r]);o.materialName=l.join("."),o.name=l.join("."),o.name.length>15&&(o.materialName=o.materialName.slice(0,15),o.name=o.name+"."+n),o.url="http://fussen-qiniu.dface.cn/"+t.response.key,this.$message({message:"上传成功",type:"success"}),this.uploadFileList=[o],this.uploadStatus=!1}}},deletePlan:function(e){var t=this;this.$confirm("删除计划后将无法恢复, 确认删除吗?","删除确认",{cancelButtonText:"取消",confirmButtonText:"删除",type:"warning"}).then(function(){t.delPlan(e)}).catch(function(){for(var e in t.modifyPlanDia=!1,self.modifyForm)"modifyPlanStyle"===e?self.modifyForm[e]="single":"planList"!==e&&"timeSelect"!==e||(self.modifyForm[e]=[])})},copyPlan:d.debounce(function(e){this.copyWeekPlan="复制计划",this.material="选择素材",this.beginTime=e.timeSelect,this.endTime=e.timeSelect,this.playType=e.type,this.addScreenList=[],this.loadMaterial(e.materialId,"复制计划")},300),btnFasle:function(){this.dialogVisible=!1,this.openScreen.saveScreenStyle=!0,this.uploadStatus=!1,this.material="上传素材",this.playType=0,this.addScreenList=[],this.screenIds=[],this.selectFileList=[],this.uploadFileList=[],this.editorId="",this.beginTime=[new Date,new Date],this.endTime=[new Date,new Date]},btnSure:d.debounce(function(){this.openScreen.saveScreenStyle=!0;var e,t,a,s=p(this.beginTime[0].toUTCString()).format("YYYY-MM-DD"),i=p(this.beginTime[1].toUTCString()).format("YYYY-MM-DD"),n=p(this.endTime[0].toUTCString()).format("HH:mm"),o=p(this.endTime[1].toUTCString()).format("HH:mm"),l=(e=i,t=new Date(s),a=new Date(e).getTime()-t.getTime(),parseInt(a/864e5));if(""===s||""===i)this.$message({message:"请选择开始时间",type:"warning"});else if(""===n||""===o)this.$message({message:"请选择结束时间",type:"warning"});else if(s===i&&n===o)this.$message({message:"开始时间不要和结束时间一样",type:"warning"});else if("上传素材"==this.material&&0===this.uploadFileList.length)this.$message({message:"请先选择素材",type:"warning"});else if("选择素材"==this.material&&0===this.selectFileList.length)this.$message({message:"请先选择素材",type:"warning"});else if(0===this.addScreenList.length)this.$message({message:"请先选择添加屏",type:"warning"});else if(l>59)this.$message({message:"时间不能超过60天",type:"warning"});else{this.load_data=!0;var r="";if("上传素材"==this.material){var c=this.playType,d=this.screenIds,u=this.shopId;this.saveMaterial(this.uploadFileList[0],u,c,s,i,n,o,d)}else{r=this.selectFileList[0].materialId;var h=this.playType,m=this.screenIds,v=this.shopId;this.SavePlan(v,r,h,s,i,n,o,m)}}},300),editSave:d.debounce(function(){var e=p(this.modifyForm.timeSelect[0].toUTCString()).format("HH:mm"),t=p(this.modifyForm.timeSelect[1].toUTCString()).format("HH:mm");this.modifyForm.startDate,this.modifyForm.endDate;if(""===e||""===t)this.$message({message:"请选择结束时间",type:"warning"});else if(e===t)this.$message({message:"开始时间不能等于结束时间",type:"warning"});else{var a=this.modifyForm.startDate,s=this.modifyForm.materialId,i=this.modifyForm.type,n=this.modifyForm.screenId,o=this.shopId,l=this.modifyForm.planId;this.updatePlan(l,o,s,i,a,e,t,n,"编辑")}},300),previews:function(e){this.loadMaterial(e)},formatDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1+"-")+e.getDate()},addDate:function(e,t){return e.setDate(e.getDate()+t),e},setDate:function(e){if(0===e.getDay())var t=e.getDay()+6;else t=e.getDay()-1;e=this.addDate(e,-1*t),this.currentFirstDate=new Date(e);for(var a=[],s=0;s<7;s++)a.push(this.formatDate(0==s?e:this.addDate(e,1)));this.weekList=a},findMaterials:function(e){var t=this,a={pageNo:e};n.l(a).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,1===a.object.pageNo&&(t.materiaObject=a.object)):(t.load_data=!1,c({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},getTokens:function(){var e=this;n.I().then(function(t){var a=t.data;0===a.status?(e.load_data=!1,e.token=a.object):(e.load_data=!1,c({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(t){e.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},saveMaterial:function(e,t,a,s,i,o,l,r){var d=this;n.w(e).then(function(e){var n=e.data;if(0===n.status){var u=n.object;d.SavePlan(t,u,a,s,i,o,l,r),d.againUploadIndex=""}else d.load_data=!1,c({text:n.errorMsg,allowOutsideClick:!1})}).catch(function(e){d.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},screenFindPage:function(e,t){var a=this;n.y({pageNo:e,operationShopId:a.shopId,screenId:a.screenId}).then(function(e){var s=e.data;if(0===s.status){if(a.load_data=!1,s.object){if(a.screens=s.object.objects,a.screens.length>0&&void 0==t&&(a.screenSelct=a.screens[0].screenId,a.listViewDia.allScreen=a.screens[0].screenId),"新建计划"==t&&s.object.objects.length>0)for(var i in s.object.objects)if(s.object.objects[i].screenId==a.screenSelct){a.screenIds=[s.object.objects[i].screenId],a.addScreenList.push(s.object.objects[i]);break}if("添加屏幕"==t&&(a.tabList=s.object),void 0==t&&"WeekPlan"===a.activeName)if(a.schedules=[],a.calendar.clear(),a.screenId&&a.shopId)for(var n in a.weekList)a.findScreenList(a.screenId,a.weekList[n]);else for(var o in a.weekList)a.findScreenList(a.screenSelct,a.weekList[o])}}else a.load_data=!1,c({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){a.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},SavePlan:function(e,t,a,s,o,l,r,d){var u,p=this,h=this.$createElement,m=this;n.a((u={shopId:e,materialId:t},i()(u,"materialId",t),i()(u,"type",a),i()(u,"startDate",s),i()(u,"endDate",o),i()(u,"startTime",l),i()(u,"endTime",r),i()(u,"screenIds",d),u)).then(function(e){var t=e.data;if(0===t.status){if(t.object){m.$createElement;m.$msgbox({title:"创建成功，部分计划时间有冲突",message:h("p",["部分计划时间安排有冲突，无法播放。可在列表模式查看冲突计划。"]),showConfirmButton:!1,showCancelButton:!1,closeOnClickModal:!1,type:"warning"}).then(function(){}).catch(function(){})}else m.$message({message:"创建计划成功",type:"success"});if(m.load_data=!1,m.dialogVisible=!1,"WeekPlan"===m.activeName)if(m.schedules=[],p.calendar.clear(),m.setDate(new Date),""!==m.screenSelct)for(var a in m.weekList)m.findScreenList(m.screenSelct,m.weekList[a]);else if(m.screenId&&m.shopId)for(var s in m.weekList)m.findScreenList(m.screenSelct,m.weekList[s]);m.material="上传素材",m.playType=0,m.screenIds=[],m.selectFileList=[],m.uploadFileList=[],m.editorId="",m.beginTime=[new Date,new Date],m.endTime=[new Date,new Date],""!=m.copyWeekPlan&&(m.modifyPlanDia=!1)}else m.load_data=!1,c({text:t.errorMsg,allowOutsideClick:!1})}).catch(function(e){m.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},updatePlan:function(e,t,a,s,i,o,l,r,d,u,h,m){var v=this,f=this;n.G({planId:e,shopId:t,materialId:a,type:s,date:i,startTime:o,endTime:l,screenId:r}).then(function(t){var a="";void 0!=u&&(a=u);var s=t.data;if(0==s.status){if("拖拽"==d){for(var n=0;n<f.schedules.length;n++)f.schedules[n].id==a.id&&(f.schedules[n].start=p(h.toUTCString()).format("YYYY-MM-DDTHH:mm:ss"),f.schedules[n].end=p(m.toUTCString()).format("YYYY-MM-DDTHH:mm:ss"));f.calendar.updateSchedule(a.id,"1",{start:h,end:m})}if("编辑"==d){f.modifyPlanDia=!1;for(var r=0;r<f.schedules.length;r++)f.schedules[r].id==e&&(f.schedules[r].start=i+" "+o,f.schedules[r].end=i+" "+l);f.calendar.updateSchedule(e,"1",{start:i+" "+o,end:i+" "+l})}if(f.$message({message:"修改计划成功",type:"success"}),"WeekPlan"===f.activeName)if(f.schedules=[],v.calendar.clear(),f.setDate(new Date),""!==f.screenSelct)for(var g in f.weekList)f.findScreenList(f.screenSelct,f.weekList[g]);else if(f.screenId&&f.shopId)for(var b in f.weekList)f.findScreenList(f.screenSelct,f.weekList[b])}else f.load_data=!1,c({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){f.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},planFindList:function(e){var t=this,a="";""!==t.listViewDia.palnTime&&(a=t.listViewDia.palnTime),n.t({pageNo:e,materialName:t.listViewDia.materalName,status:t.listViewDia.planStatu,type:t.listViewDia.playStatu,date:a,operationShopId:t.shopId,screenId:t.listViewDia.allScreen}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.materialData=a.object.objects):(t.materialData=[],t.page.total=0,t.load_data=!1)):(t.load_data=!1,c({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},findShopList:function(e){var t=this;n.o({pageNo:1,shopId:t.shopId,date:e}).then(function(e){var a=e.data;if(0===a.status){var s=a.object;if(s){var i=s.objects;for(var n in i){var o={};o.id=i[n].planId,o.calendarId="1",o.title=i[n].materialName,o.category="time",o.dueDateClass="",o.attendees={planId:i[n].planId,status:i[n].status,statusCN:i[n].statusCN,typeCN:i[n].typeCN,type:i[n].type,screenName:i[n].screenName},o.start=i[n].createTime;var l=i[n].createTime.split(" ")[0]+" "+i[n].endTime;o.end=l,0==i[n].type&&(2!=i[n].status?(o.bgColor="#F2F6FF",o.borderColor="#3180EC"):2==i[n].status&&(o.bgColor="#F8DEDB",o.borderColor="#ff4040")),1==i[n].type&&(2!=i[n].status?(o.bgColor="#FCF2D9",o.borderColor="#FDA018"):2==i[n].status&&(o.bgColor="#FC8553",o.borderColor="#FEDA1E")),t.calendar.createSchedules([o]),t.schedules.push(o)}}}else t.load_data=!1,c({text:a.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},findScreenList:function(e,t){var a=this;n.n({screenId:e,date:t}).then(function(e){var t=e.data;if(0===t.status){a.load_data=!1;var s=t.object;if(s){var i=s;for(var n in i){var o={};o.id=i[n].planId,o.calendarId="1",o.title=i[n].materialName,o.category="time",o.dueDateClass="",o.attendees={planId:i[n].planId,status:i[n].status,materialId:i[n].materialId,statusCN:i[n].statusCN,typeCN:i[n].typeCN,type:i[n].type,screenId:i[n].screenId,screenName:i[n].screenName},o.start=i[n].planDate+" "+i[n].startTime;var l=i[n].planDate+" "+i[n].endTime;o.end=l,0==i[n].type&&(2!=i[n].status?(o.bgColor="#F2F6FF",o.borderColor="#3180EC"):2==i[n].status&&(o.bgColor="#F8DEDB",o.borderColor="#ff4040")),1==i[n].type&&(2!=i[n].status?(o.bgColor="#FCF2D9",o.borderColor="#FDA018"):2==i[n].status&&(o.bgColor="#F8DEDB",o.borderColor="#ff4040")),a.calendar.createSchedules([o]),a.schedules.push(o)}}}else a.load_data=!1,c({text:t.errorMsg,allowOutsideClick:!1})}).catch(function(e){a.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},loadMaterial:function(e,t){var a=this;n.r({materialId:e}).then(function(e){var s=e.data;if(0===s.status)if(a.load_data=!1,t){if(s.object){var i={materialId:s.object.materialId,name:s.object.name,typeCN:s.object.typeCN,type:s.object.type,url:s.object.url,tagCN:s.object.tagName,tagId:s.object.tagId};a.selectFileList=[i],a.dialogVisible=!0,a.screenFindPage(1,"新建计划")}}else s.object?3===s.object.type?window.open(s.object.url):4===s.object.type?a.$message({message:"本地文件无法预览",type:"warning"}):0===s.object.type||1===s.object.type||2===s.object.type?(a.previewMateria=!0,a.previewInfo=s.object):0===s.object.options.length?c({text:"素材组为空",allowOutsideClick:!1}):(a.previewMateria=!0,a.previewInfo=s.object):c({text:"素材组为空",allowOutsideClick:!1});else a.load_data=!1,c({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){a.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})},lookConflictPlan:function(){alert(111)},delPlan:function(e){var t=this;n.b({planId:e}).then(function(a){var s=a.data;if(0===s.status){t.modifyPlanDia=!1,t.calendar.deleteSchedule(e,"1");for(var i=0;i<t.schedules.length;i++)t.schedules[i].id==e&&t.schedules.splice(i,1)}else t.load_data=!1,c({text:s.errorMsg,allowOutsideClick:!1});for(var n in t.modifyForm)"modifyPlanStyle"===n?t.modifyForm[n]="single":"planList"!==n&&"timeSelect"!==n||(t.modifyForm[n]=[])}).catch(function(e){t.load_data=!1,c({text:"请求服务器失败",allowOutsideClick:!1})})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cloudPlan"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"},on:{mouseover:e.allConst}},[e.viewSwitche?a("el-tabs",{staticClass:"elTabs-container",on:{"tab-click":e.dataPlan},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"周计划",name:"WeekPlan"}})],1):e._e(),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.createPlan}},[e._v("新建计划")])],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right",right:"0","margin-bottom":"0"}},[a("el-button-group",[a("el-button",{class:e.viewSwitche?"listViewSelect":"",on:{click:e.chartView}},[e._v("图表视图")]),e._v(" "),a("el-button",{class:e.viewSwitche?"":"listViewSelect",on:{click:e.listView}},[e._v("列表视图")])],1)],1),a("br"),e._v(" "),e.viewSwitche?[a("div",{staticStyle:{"padding-top":"20px"}},[a("el-form-item",{staticClass:"selectTab",staticStyle:{display:"none"},attrs:{label:"门店:"}},[a("el-select",{attrs:{placeholder:"全部门店"},model:{value:e.stores,callback:function(t){e.stores=t},expression:"stores"}},e._l(e.storeList,function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),"WeekPlan"===e.activeName?a("el-form-item",{staticClass:"selectTab",attrs:{label:"屏幕:"}},[a("el-select",{attrs:{placeholder:"请选择屏幕"},on:{change:e.screenSelectTime},model:{value:e.screenSelct,callback:function(t){e.screenSelct=t},expression:"screenSelct"}},e._l(e.screens,function(e){return a("el-option",{key:e.screenId,attrs:{label:e.screenName,value:e.screenId}})}))],1):e._e(),e._v(" "),a("el-form-item",{staticClass:"selectTab selectRight"},[a("el-button",{on:{click:e.prev}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),"dayPlan"===e.activeName?a("el-date-picker",{staticStyle:{width:"40%"},attrs:{type:"date",placeholder:"今天","clear-icon":"el-icon-circle-close"},on:{change:e.today},model:{value:e.daySelect,callback:function(t){e.daySelect=t},expression:"daySelect"}}):e._e(),e._v(" "),"WeekPlan"===e.activeName?a("el-button",{staticStyle:{width:"140px"},on:{click:e.week}},[e._v(e._s(e.weekContext))]):e._e(),e._v(" "),a("el-button",{on:{click:e.next}},[a("i",{staticClass:"el-icon-arrow-right"})]),a("br")],1)],1)]:e._e()],2),e._v(" "),e.viewSwitche?[a("ul",{staticClass:"list",class:"dayPlan"===e.activeName?"":"listWeek"},e._l(e.list,function(t){return a("li",[a("span",{staticClass:"fullSpan",style:{background:t.colorStyle}}),a("span",[e._v(e._s(t.text))])])})),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"dayPlan"===e.activeName,expression:"activeName === 'dayPlan'"}],staticClass:"scrollList"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.screenList.length>6,expression:"screenList.length>6"}],staticClass:"prev",on:{click:function(t){e.screenPrev()}}},[a("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),a("ul",{staticClass:"ulList"},e._l(e.screenList,function(t,s){return a("li",{on:{mouseover:function(t){t.stopPropagation(),e.screenItem(t,s)}}},[a("p",[e._v(e._s(t.value)),a("i",{directives:[{name:"show",rawName:"v-show",value:e.screenPosition===s,expression:"screenPosition ===index"}],staticClass:"el-icon-arrow-down"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.screenPosition===s,expression:"screenPosition ===index"}],staticClass:"screenPlan",style:{top:e.topScreen,left:e.leftScreen}},[a("span",{on:{click:function(t){t.stopPropagation(),e.lookScreen()}}},[e._v("查看屏计划")]),e._v(" "),a("span",{on:{click:function(a){a.stopPropagation(),e.copyScreen(t)}}},[e._v("复制屏计划")])])])})),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.screenList.length>6,expression:"screenList.length>6"}],staticClass:"next",on:{click:function(t){e.screenNext()}}},[a("i",{staticClass:"el-icon-arrow-right"})])])]:e._e()],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.viewSwitche,expression:"viewSwitche"}],staticStyle:{height:"900px","margin-top":"-25px"},attrs:{id:"calendar"}}),e._v(" "),e.viewSwitche?e._e():[a("div",{staticClass:"listView"},[a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"素材标题"}},[a("el-input",{attrs:{placeholder:"输入素材标题进行搜索"},model:{value:e.listViewDia.materalName,callback:function(t){e.$set(e.listViewDia,"materalName",t)},expression:"listViewDia.materalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listViewDia.planStatu,callback:function(t){e.$set(e.listViewDia,"planStatu",t)},expression:"listViewDia.planStatu"}},e._l(e.planStatuList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"计划时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择时间","value-format":"yyyy-MM-dd"},model:{value:e.listViewDia.palnTime,callback:function(t){e.$set(e.listViewDia,"palnTime",t)},expression:"listViewDia.palnTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"播放类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listViewDia.playStatu,callback:function(t){e.$set(e.listViewDia,"playStatu",t)},expression:"listViewDia.playStatu"}},e._l(e.playStatuList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"屏"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listViewDia.allScreen,callback:function(t){e.$set(e.listViewDia,"allScreen",t)},expression:"listViewDia.allScreen"}},e._l(e.screens,function(e){return a("el-option",{key:e.screenId,attrs:{label:e.screenName,value:e.screenId}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchScreen}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clearScreen}},[e._v("取消")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialData}},[a("el-table-column",{attrs:{align:"center",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return["冲突计划"==t.row.statusCN?a("p",{staticClass:"conflictPlan"},[e._v(e._s(t.row.statusCN))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"materialName",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",sortable:"",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"planDate",sortable:"",label:"计划时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.planDate)+" "+e._s(t.row.startTime)+"-"+e._s(t.row.endTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"statusCN",label:"计划状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeCN",label:"播放类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"screenName",label:"投屏"}})],1),e._v(" "),a("div",{staticClass:"pageAtion"},[a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1)],1)],1)],e._v(" "),a("preview",{attrs:{previewMateria:e.previewMateria,previewInfo:e.previewInfo},on:{closePreview:e.closePreview}}),e._v(" "),a("materia-list",{attrs:{diaLogMateria:e.diaLogMateria,materiaObject:e.materiaObject},on:{chooseMaterial:e.chooseMaterial}}),e._v(" "),a("screen-list",{attrs:{screenDialog:e.screenDialog,addScreenList:e.addScreenList,openScreen:e.openScreen,tabList:e.tabList},on:{closeScreen:e.closeScreen}}),e._v(" "),a("el-dialog",{attrs:{title:"创建计划",visible:e.dialogVisible,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"创建方式:"}},[a("el-radio-group",{model:{value:e.material,callback:function(t){e.material=t},expression:"material"}},[a("el-radio",{attrs:{label:"上传素材"}}),e._v(" "),a("el-radio",{attrs:{label:"选择素材"}})],1)],1),e._v(" "),e._l(e.uploadFileList,function(t,s){return e.uploadFileList.length>0&&"上传素材"===e.material?a("div",{on:{click:e.getTokens}},[a("p",[a("span",[e._v(e._s(t.materialName)+" "),a("span",{staticClass:"spanBtn"},[e._v(e._s(t.matrialType))])])]),e._v(" "),a("el-upload",{staticStyle:{margin:"10px 0"},attrs:{action:"https://up.qiniup.com/","before-upload":e.beforeUpload,data:{token:e.token},"list-type":"picture","show-file-list":!1,"on-success":e.success,"on-error":e.error,disabled:e.uploadStatus}},[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.uploadStatus},on:{click:function(a){e.againUpload(t,s)}}},[e._v("重新上传")])],1)],1):e._e()}),e._v(" "),e._l(e.selectFileList,function(t,s){return e.selectFileList.length>0&&"选择素材"===e.material?a("div",{staticClass:"slectFile"},[a("p",[e._v(e._s(t.typeCN))]),e._v(" "),a("ul",{staticClass:"selectFileList"},[a("li",{staticStyle:{"overflow-x":"hidden"}},[e._v("素材名称："+e._s(t.name))]),e._v(" "),a("li",[e._v("素材标签："+e._s(t.tagName))]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:3===t.type,expression:"item.type === 3"}]},[e._v("网页链接："+e._s(t.url))])]),e._v(" "),a("el-button",{staticStyle:{width:"100%"},attrs:{size:"medium"},on:{click:function(a){e.againSelectMaterial(t,s)}}},[e._v("重新选择素材")])],1):e._e()}),e._v(" "),e.uploadFileList.length<1?a("div",{on:{click:e.getTokens}},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:"上传素材"===e.material,expression:"material === '上传素材'"}],staticStyle:{"margin-left":"0"},attrs:{icon:"el-icon-plus",action:"https://up.qiniup.com/","on-progress":e.onProgress,"before-upload":e.beforeUpload,data:{token:e.token},"list-type":"picture","show-file-list":!1,"on-success":e.success,"on-error":e.error,disabled:e.uploadStatus}},[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.uploadStatus}},[e._v("上传素材")])],1)],1):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"选择素材"===e.material&&e.selectFileList.length<1,expression:"material === '选择素材' && selectFileList.length<1"}],staticStyle:{width:"100%"},attrs:{size:"medium"},on:{click:e.selectMaterial}},[e._v("选择素材")]),e._v(" "),a("el-form-item",{staticStyle:{"border-top":"1px solid #E4E7E9","margin-top":"10px"},attrs:{label:"计划类型"}},[a("el-radio-group",{model:{value:e.playType,callback:function(t){e.playType=t},expression:"playType"}},[a("el-radio",{attrs:{label:0}},[e._v("编播计划")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("插播计划")])],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"border-bottom":"1px solid #E4E7E9","margin-bottom":"10px"},attrs:{label:"计划时间"}},[a("div",{staticClass:"rightTime"},[a("el-date-picker",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.beginTime,callback:function(t){e.beginTime=t},expression:"beginTime"}}),e._v(" "),a("el-time-picker",{staticStyle:{width:"100%"},attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"应用屏幕"}},[a("el-button",{on:{click:e.addScreen}},[e._v("添加屏幕")]),a("br"),e._v(" "),e._l(e.addScreenList,function(t){return a("el-tag",[e._v(e._s(t.screenName))])})],2)],2),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.btnSure}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.btnFasle}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改计划",visible:e.modifyPlanDia,"close-on-click-modal":!1},on:{"update:visible":function(t){e.modifyPlanDia=t}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"single"!==e.modifyForm.modifyPlanStyle,expression:"modifyForm.modifyPlanStyle !=='single'"}],attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"已选计划:"}},[a("ul",{staticClass:"rightTime"},e._l(e.modifyForm.planList,function(t){return a("li",[e._v(e._s(t.materaName))])}))]),e._v(" "),a("el-form-item",{attrs:{label:"推迟时间:"}},[a("el-input",{staticStyle:{width:"20%"},attrs:{type:"number",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:e.modifyForm.startTime,callback:function(t){e.$set(e.modifyForm,"startTime",t)},expression:"modifyForm.startTime"}}),e._v("小时\n          "),a("el-input",{staticStyle:{width:"20%"},attrs:{type:"number",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:e.modifyForm.endTime,callback:function(t){e.$set(e.modifyForm,"endTime",t)},expression:"modifyForm.endTime"}}),e._v("分钟\n        ")],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"single"===e.modifyForm.modifyPlanStyle,expression:"modifyForm.modifyPlanStyle ==='single'"}]},[a("el-form-item",[a("h5",[a("span",[e._v(e._s(e.modifyForm.materaName)+" "),a("span",{staticClass:"spanBtn"},[e._v(e._s(e.modifyForm.typeCN))])])])]),e._v(" "),a("el-form-item",{attrs:{label:"计划时间:","label-width":"80px"}},[a("el-time-picker",{staticStyle:{width:"80%"},attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.modifyForm.timeSelect,callback:function(t){e.$set(e.modifyForm,"timeSelect",t)},expression:"modifyForm.timeSelect"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划内容:","label-width":"80px"}},[a("div",{staticClass:"rightTime"},[a("p",[e._v(e._s(e.modifyForm.planContent))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.previews(e.modifyForm.materialId)}}},[e._v("预览")])],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editSave}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.deletePlan(e.modifyForm.planId)}}},[e._v("删除计划")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"single"===e.modifyForm.modifyPlanStyle,expression:"modifyForm.modifyPlanStyle ==='single'"}],on:{click:function(t){e.copyPlan(e.modifyForm)}}},[e._v("复制计划")])],1)],1)],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("播放计划")])])])}]};var v=a("vSla")(h,m,!1,function(e){a("6ySO")},null,null);t.a=v.exports},"3Gra":function(e,t){},"3kyz":function(e,t){},"5H3V":function(e,t){},"5XuS":function(e,t){},"5axn":function(e,t,a){"use strict";var s={name:"Test",data:function(){return{tableData3:[],multipleSelectionAll:[],multipleSelection:[],idKey:"id",page:{pnum:2,pageTotal:3,currentPage:1},tab4:[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 118 弄"},{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 151 弄"}],tableData5:[{id:"2",date:"2016-05-03",name:"王小二",address:"上海市普陀区金沙江路 151 弄"},{id:"3",date:"2016-05-05",name:"王小二55",address:"上海市普陀区金沙江路 151 弄"}],tab6:[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 118 弄"},{id:"2",date:"2016-05-03",name:"王小二",address:"上海市普陀区金沙江路 151 弄"}],options3:[{label:"热门城市",options:[{value:"Shanghai",label:"上海"},{value:"Beijing",label:"北京"}]},{label:"城市名",options:[{value:"Chengdu",label:"成都"},{value:"Shenzhen",label:"深圳"},{value:"Guangzhou",label:"广州"},{value:"Dalian",label:"大连"}]}],value7:""}},created:function(){this.multipleSelectionAll=this.tab6,this.getGoodsList()},methods:{handleCurrentChange:function(e){this.changePageCoreRecordData(),this.getGoodsList(e)},handleSelectionChange:function(e){var t=this;this.multipleSelection=e,setTimeout(function(){t.changePageCoreRecordData()},50)},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var e=this.idKey,t=[];this.multipleSelectionAll.forEach(function(a){t.push(a[e])}),this.$refs.multipleTable.clearSelection();for(var a=0;a<this.tableData3.length;a++)t.indexOf(this.tableData3[a][e])>=0&&this.$refs.multipleTable.toggleRowSelection(this.tableData3[a],!0)}},changePageCoreRecordData:function(){var e=this.idKey,t=this;if(this.multipleSelectionAll.length<=0)this.multipleSelectionAll=this.multipleSelection;else{var a=[];this.multipleSelectionAll.forEach(function(t){a.push(t[e])});var s=[];this.multipleSelection.forEach(function(i){s.push(i[e]),a.indexOf(i[e])<0&&t.multipleSelectionAll.push(i)});var i=[];this.tableData3.forEach(function(t){s.indexOf(t[e])<0&&i.push(t[e])}),i.forEach(function(s){if(a.indexOf(s)>=0)for(var i=0;i<t.multipleSelectionAll.length;i++)if(t.multipleSelectionAll[i][e]==s){t.multipleSelectionAll.splice(i,1);break}})}},getGoodsList:function(e){var t=this;this.page.currentPage=e,this.tableData3=2===e?this.tableData5:this.tab4,setTimeout(function(){t.setSelectRow()},50)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"test"},[a("section",{staticClass:"con"},[a("div",{staticClass:"box"},[e._l(e.multipleSelectionAll,function(t){return a("el-tag",[e._v("\n          "+e._s(t.name)+"\n        ")])}),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"barcode",label:"商品编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"区域总库存"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.pnum,layout:"total, prev, pager, next , jumper",total:e.page.pageTotal},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.page,"currentPage",t)}}})],2),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value7,callback:function(t){e.value7=t},expression:"value7"}},e._l(e.options3,function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1)])},staticRenderFns:[]},n=a("vSla")(s,i,!1,null,null,null);t.a=n.exports},"6ySO":function(e,t){},"7rTu":function(e,t,a){"use strict";var s=a("XZGR"),i=a("QI2T"),n={name:"cloudSeedDetail",data:function(){return{load_data:!0,centerDialogVisible:!1,shopName:"",shopId:"",location:"",address:"",wallahName:"",wallahPhone:"",headName:"",headTal:""}},mounted:function(){var e=this.$route.query.shopId;this.shopId=e,this.shopFindList(1)},methods:{edit:function(){this.centerDialogVisible=!0,this.headName=this.wallahName,this.headTal=this.wallahPhone},update:a("Y0Uy").debounce(function(){""===this.headName?this.$message({message:"请输入内容",type:"warning"}):11!==this.headTal.length?this.$message({message:"手机号格式不正确",type:"warning"}):this.updateWallah()},300),cancel:function(){this.centerDialogVisible=!1,this.headName="",this.headTal=""},shopFindList:function(e){var t=this;s.D({pageNo:e,shopId:t.shopId}).then(function(e){var a=e.data;if(0===a.status){if(t.load_data=!1,a.object){var s=a.object.objects[0];t.shopName=s.shopName,t.shopId=s.shopId,t.location=s.location,t.address=s.address,t.wallahName=s.wallahName,t.wallahPhone=s.wallahPhone}}else t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},updateWallah:function(){var e=this;s.H({shopId:e.shopId,wallahName:e.headName,wallahPhone:e.headTal}).then(function(t){var a=t.data;0===a.status?(e.$message({message:"修改商家负责人成功",type:"success"}),e.load_data=!1,e.centerDialogVisible=!1,e.shopFindList(1)):(e.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1})),e.headName="",e.headTal=""}).catch(function(t){e.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cloudDetail"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("ul",{staticClass:"ulList"},[a("li",[e._v("商户名称："),a("span",{staticClass:"liSpan"},[e._v(e._s(e.shopName))])]),e._v(" "),a("li",[e._v("商户ID："),a("span",{staticClass:"liSpan"},[e._v(e._s(e.shopId))])]),e._v(" "),a("li",[e._v("地址："),a("span",{staticClass:"liSpan"},[e._v(e._s(e.location)+e._s(e.address))])]),e._v(" "),a("li",[e._v("商户负责人：\n          "),a("span",{staticClass:"liSpan"},[e._v(e._s(e.wallahName)+" ")]),e._v(" "),""!=e.wallahPhone?a("span",[e._v("("+e._s(e.wallahPhone)+")")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.edit}},[e._v("编辑")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"更改商户负责人",visible:e.centerDialogVisible,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"负责人姓名"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入内容"},model:{value:e.headName,callback:function(t){e.headName=t},expression:"headName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人电话"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"number",placeholder:"请输入内容",value:"",oninput:"if(value.length>11)value=value.slice(0,11)"},model:{value:e.headTal,callback:function(t){e.headTal=t},expression:"headTal"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("立即更改")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("详情")])])])}]};var l=a("vSla")(n,o,!1,function(e){a("9TgM")},null,null);t.a=l.exports},"93n0":function(e,t,a){"use strict";var s=a("js5j"),i=a("hRKE"),n=a.n(i),o=a("P9l9"),l=a("QI2T"),r={name:"MemberLevelAuth",data:function(){return{pData:{show:!1,activeTab:"firstTab",checked1:[],checked2:[],disabled:!1},data1:[],data2:[],defaultProps:{label:"name",children:"childs"},saveTree1:"",saveTree2:"",boxShow:!0,c1:[],c2:[]}},props:["show","memberLevel"],watch:{show:function(e,t){1==e?(this.boxShow=!0,this.pData=this.memberLevel,this.$set(this.pData,"show",this.show),this.$set(this.pData,"activeTab","firstTab"),this.$set(this.pData,"checked1",[]),this.$set(this.pData,"checked2",[]),this.$set(this.pData,"disabled",!1),this.c1=[],this.c2=[],this.Initial()):this.pData.show=this.show}},methods:{TreeClick:function(e,t){"firstTab"==this.pData.activeTab?(this.saveTree1=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked1=t.checkedKeys):(this.saveTree2=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked2=t.checkedKeys)},Initial:function(){var e=this;o.u({kind:0}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.AuthTree(t.object,"手机端",0):l({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")}),o.u({kind:1}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.AuthTree(t.object,"PC端",1):l({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")})},handleClick:function(e,t){},AuthTree:function(e,t,a){var s=this;o.f({id:this.pData.sid,permissionType:2,clientType:a}).then(function(a){if(0==(a=PF.JsonFormat(a.data)).status){if(a.object&&0!=a.object.length)for(var i=0;i<a.object.length;i++)"手机端"==t?s.c1.push(a.object[i].sid):"PC端"==t&&s.c2.push(a.object[i].sid),s.Arr(a.object[i],t);else"手机端"==t?s.c1="空值":"PC端"==t&&(s.c2="空值");"手机端"==t?s.data1=e:"PC端"==t&&(s.data2=e)}else l({title:"等级权限列表服务器返回错误",text:a.errorMsg,type:"error"})}).catch(function(e){l("等级权限列表请求服务器失败","","error")})},Arr:function(e,t){for(var a=0;a<e.childs.length;a++)""!=e.childs[a].childs?(this.Arr(e.childs[a],t),"手机端"==t?this.c1.push(e.childs[a].sid):"PC端"==t&&this.c2.push(e.childs[a].sid)):"手机端"==t?(this.pData.checked1.push(e.childs[a].sid),this.c1.push(e.childs[a].sid)):"PC端"==t&&(this.pData.checked2.push(e.childs[a].sid),this.c2.push(e.childs[a].sid))},AddDisabled:function(e){for(var t=0;t<e.childs.length;t++)""!=e.childs[t].childs?(e.childs[t].disabled=!0,this.AddDisabled(e.childs[t])):e.childs[t].disabled=!0},UpData:function(){var e=this;e.pData.disabled=!0,o.A().then(function(t){0==(t=PF.JsonFormat(t.data)).status?(l({title:"更新权限成功",type:"success"}),e.Close()):l({title:"更新权限服务器返回错误",text:t.errorMsg,type:"error"}),e.pData.disabled=!1}).catch(function(t){l("更新权限请求服务器失败","","error"),e.pData.disabled=!1})},Submit:function(e){var t=this,a="",s=0;return!t.pData.disabled&&(""!==t.saveTree1||1!=t.c1.length&&t.c1&&"空值"!=t.c1?""!==t.saveTree2||1!=t.c2.length&&t.c2&&"空值"!=t.c2?"object"==n()(t.saveTree1)&&0==t.saveTree1.length?(l("设置手机端权限","","error"),!1):"object"==n()(t.saveTree2)&&0==t.saveTree2.length?(l("设置PC端权限","","error"),!1):(t.pData.disabled=!0,o.z({id:t.pData.sid,permissionIdList:t.saveTree1?t.saveTree1:t.c1,permissionType:2,clientType:0}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?s++:(l({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"}),t.pData.disabled=!1)}).catch(function(e){l("保存权限请求服务器失败","","error"),t.pData.disabled=!1}),o.z({id:t.pData.sid,permissionIdList:t.saveTree2?t.saveTree2:t.c2,permissionType:2,clientType:1}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?s++:(l({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"}),t.pData.disabled=!1)}).catch(function(e){l("保存权限请求服务器失败","","error"),t.pData.disabled=!1}),void(a=setInterval(function(){2==s&&(clearInterval(a),l({title:"保存成功",text:"2秒后自动关闭",type:"success",timer:2e3}).then(function(a){if(t.pData.disabled=!1,e)t.Close();else{var s;for(s=0;s<t.data1.length;s++)t.AddDisabled(t.data1[s]),t.data1[s].disabled=!0;for(s=0;s<t.data2.length;s++)t.AddDisabled(t.data2[s]),t.data2[s].disabled=!0;t.pData.checked1=t.saveTree1?t.pData.checked1.concat(t.saveTree1):t.pData.checked1,t.pData.checked2=t.saveTree2?t.pData.checked2.concat(t.saveTree1):t.pData.checked2,t.boxShow=!1,t.pData.activeTab="firstTab"}}))},500))):(l("设置PC端权限","","error"),!1):(l("设置手机端权限","","error"),!1))},Close:function(){this.$emit("Close")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show,expression:"pData.show"}],staticClass:"box2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.boxShow,expression:"boxShow"}],staticClass:"box2con change"},[a("h3",[e._v("等级："+e._s(e.pData.name)+"，功能权限")]),e._v(" "),a("div",{staticClass:"plane3"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PC权限",name:"secondTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr35",attrs:{type:"button",disabled:e.pData.disabled},on:{click:function(t){e.Submit(!1)}}},[e._v("更新")]),e._v(" "),a("a",{staticClass:"pointer mr35",attrs:{type:"button",disabled:e.pData.disabled},on:{click:function(t){e.Submit(!0)}}},[e._v("保存")]),e._v(" "),a("a",{staticClass:"pointer",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])]),e._v(" "),e.boxShow?e._e():a("div",{staticClass:"box2con change"},[a("h3",[e._v("更新功能权限")]),e._v(" "),a("div",{staticClass:"text-center blue mb25"},[e._v("权限将更新到最新正在使用的权限版本，是否更新？")]),e._v(" "),a("div",{staticClass:"plane4"},[a("div",{staticClass:"w45p l ml20"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"w45p r mr20"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"PC权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr35 mt20",attrs:{type:"button",disabled:e.pData.disabled},on:{click:e.UpData}},[e._v("立即更新")]),e._v(" "),a("a",{staticClass:"pointer",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[]},d=a("vSla")(r,c,!1,null,null,null).exports,u=a("QI2T"),p={name:"MemberLevel",data:function(){return{pData:{show:!1,class:""},search:{pageNo:1},dataList:""}},components:{page:s.a,memberLevelAuth:d},mounted:function(){this.Initial()},methods:{Initial:function(){var e=this;e.dataList="",o.n({pageNo:e.search.pageNo}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):u({title:"等级列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){u("等级列表请求服务器失败","","error")})},EditAuth:function(e){this.pData.show=!0,this.pData.memberLevel=e},Close:function(e){this.pData.show=!1}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(1)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(2),e._v(" "),e._l(e.dataList,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",{domProps:{innerHTML:e._s(t.description)}}),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.EditAuth(t)}}},[e._v("编辑权限")])])])})],2)]):e._e()]),e._v(" "),a("memberLevelAuth",{attrs:{show:e.pData.show,memberLevel:e.pData.memberLevel},on:{Close:e.Close}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("等级管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("等级")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("描述")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("操作")])])}]},m=a("vSla")(p,h,!1,null,null,null);t.a=m.exports},"95lS":function(e,t){},"9TgM":function(e,t){},"9xaq":function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},i=a("vSla")({name:"Public",data:function(){return{}}},s,!1,null,null,null);t.a=i.exports},"AA2/":function(e,t){},AVkl:function(e,t,a){"use strict";var s,i=a("lC5x"),n=a.n(i),o=a("rVsN"),l=a.n(o),r=a("J0Oq"),c=a.n(r),d=a("aozt"),u=a.n(d),p=this;t.a=(s=c()(n.a.mark(function e(t){var s,i,o,r=t.url,c=t.data,d=t.method;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a("QI2T"),i=a("6iV/"),o={method:d,url:r},"post"===d?o.data=i.stringify(c,{allowDots:!0}):"get"===d&&(o.params=i.parse(c)),e.abrupt("return",new l.a(function(e,t){u()(o).then(function(t){1===t.data.status&&"1000"===t.data.errorCode?s("商家账号未登录，请登录后重试！","","error").then(function(e){}):e(t)}).catch(function(e){t(e)})}));case 5:case"end":return e.stop()}},e,p)})),function(e){return s.apply(this,arguments)})},B7YX:function(e,t){},BERp:function(e,t,a){"use strict";var s=a("zsLt"),i=a.n(s),n=a("kfHR"),o=a.n(n),l=(a("XZGR"),{name:"Test",data:function(){return{upFile:[],adv:1,aaa:[],itemss:[{groupId:12,groupName:"12",tagRequired:0,tagOption:1,tagId:17,tagName:"发送"},{groupId:12,groupName:"12",tagRequired:0,tagOption:1,tagId:18,tagName:"3123"}],uploadStatus:!1,pData:{doc:{size:1024e3}},options5:[{value:"HTML",label:"HTML"},{value:"CSS",label:"CSS"},{value:"JavaScript",label:"JavaScript"}],tableData3:[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 1518 弄"},{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 1518 弄"},{id:"2",date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],selectTable:[],kayVal:[],getRowKeys:function(e){return e.orderid},value10:""}},mounted:function(){this.aa()},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e),"uploading"===e.status?this.uploadStatus=!0:"success"===e.status&&(this.uploadStatus=!1)},success:function(e,t,a){console.log(t);var s={};s.name=t.name,s.url=t.url,this.upFile.push(s)},change:function(){console.log(this.value10)},handleSelectionChange:function(e){var t=this;e.forEach(function(e,a){t.kayVal.push(e.id),t.selectTable.push(e.id)}),this.kayVal=o()(new i.a(this.kayVal)),this.selectTable=o()(new i.a(this.selectTable))},toggleSelection:function(e){var t=this;e?e.forEach(function(e){console.log(e),t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},pageChange:function(e){this.tableData3=2===e?[{id:"3",date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]:[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 1518 弄"},{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 1518 弄"},{id:"2",date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}];for(var t=0;t<this.tableData3.length;t++)for(var a=0;a<this.kayVal.length;a++)this.kayVal[a]==this.tableData3[t].id&&this.$refs.multipleTable.toggleRowSelection(this.tableData3[t],!0)},aa:function(){for(var e=[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 1518 弄"},{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 1518 弄"}].concat([{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 1518 弄"},{id:"2",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 1518 弄"}]),t=[],a={},s=0;s<e.length;s++)a[e[s].id]||(t.push(e[s]),a[e[s].id]=!0)}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"test"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/permission/memberShop/export",data:{token:e.pData.token},"on-preview":e.handlePreview,"on-remove":e.handleRemove,"list-type":"picture","show-file-list":!1,"on-success":e.success,disabled:e.uploadStatus}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.uploadStatus}},[e._v("点击上传")])],1),e._v(" "),a("ul",e._l(e.upFile,function(t){return a("li",[e._v("\n        "+e._s(t.name)+e._s(t.url)+"\n      ")])})),e._v(" "),a("ul",e._l(e.selectTable,function(t){return a("li",[e._v("\n        "+e._s(t)+"\n      ")])})),e._v(" "),0!==e.selectTable.length?a("el-button",{on:{click:function(t){e.toggleSelection()}}},[e._v("清空")]):e._e(),e._v(" "),a("el-button",{on:{click:function(t){e.toggleSelection([e.tableData3[1],e.tableData3[2]])}}},[e._v("切换第二、第三行的选中状态")]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}})],1),e._v(" "),a("el-pagination",{attrs:{"page-size":2,layout:"total, prev, pager, next",total:3,"prev-text":"上页","next-text":"下页"},on:{"current-change":e.pageChange}}),e._v(" "),a("el-select",{attrs:{placeholder:"全部","value-key":"tagId"},model:{value:e.aaa[e.adv],callback:function(t){e.$set(e.aaa,e.adv,t)},expression:"aaa[adv]"}},e._l(e.itemss,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagName,value:e}})})),e._v("\n        "+e._s(e.aaa)+"\n  ")],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("上传文件")])])])}]},c=a("vSla")(l,r,!1,null,null,null);t.a=c.exports},BNCU:function(e,t){},BYch:function(e,t,a){"use strict";var s=a("XZGR"),i=a("psC7"),n=a("QI2T"),o=a("Y0Uy"),l={name:"MaterialList",props:["diaLogMateria","materiaObject"],components:{preview:i.a},data:function(){return{load_data:!1,previewMateria:!1,materialTitle:"",flag:!0,page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},type:"",previewInfo:{url:"",type:""},materalTypeList:[{label:"图片",value:0},{label:"视频",value:2},{label:"网页",value:3},{label:"音频",value:1},{label:"本地文件",value:4},{label:"素材组",value:5}],materalTable:[],chooseObj:{}}},watch:{materiaObject:{handler:function(e){this.materalTable=e.objects,this.page.pageRow=e.pageRow,this.page.pageNo=e.pageNo,this.page.total=e.total,this.page.lastPage=e.lastPage},deep:!0}},methods:{searchMate:o.debounce(function(){this.load_data=!0,this.findMaterials(1),this.page.pageNo=1},300),clearMate:o.debounce(function(){this.load_data=!0,this.type="",this.materialTitle="",this.findMaterials(1),this.page.pageNo=1},300),pageChange:function(e){this.load_data=!0,this.page.pageNo=e,this.findMaterials(e)},preview:o.debounce(function(e){this.loadMaterial(e.materialId,"预览")},300),closePreview:o.debounce(function(e){this.previewMateria=e},300),chooseMaterial:o.debounce(function(e){this.flag&&(this.flag=!1,this.loadMaterial(e.materialId,"选择"))},200),closeList:function(){this.load_data=!1,this.type="",this.materialTitle="",this.findMaterials(1),this.page.pageNo=1,this.$emit("chooseMaterial",!1)},findMaterials:function(e){var t=this,a={name:t.materialTitle,type:t.type,pageNo:e};s.l(a).then(function(e){var a=e.data;0===a.status&&(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.materalTable=a.object.objects):(t.page.pageNo=1,t.page.total=0,t.materalTable=[]))}).catch(function(e){t.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})},loadMaterial:function(e,t){var a=this;s.r({materialId:e}).then(function(e){var s=e.data;0===s.status?(a.load_data=!1,"预览"===t?3===s.object.type?window.open(s.object.url):4===s.object.type?a.$message({message:"本地文件无法预览",type:"warning"}):0===s.object.type||1===s.object.type||2===s.object.type?(a.previewMateria=!0,a.previewInfo=s.object):0===s.object.options.length?n({text:"素材组为空",allowOutsideClick:!1}):(a.previewMateria=!0,a.previewInfo=s.object):a.materiaObject.addMaterial&&5===s.object.type?n({text:"不能选择循环素材组",allowOutsideClick:!1}):(a.chooseObj=s.object,a.$emit("chooseMaterial",!1,a.chooseObj)),setTimeout(function(){a.flag=!0},800)):(a.flag=!0,a.load_data=!1,n({text:s.errorMsg,allowOutsideClick:!1}))}).catch(function(e){a.flag=!0,a.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"materiaList",attrs:{"element-loading-text":"拼命加载中"}},[a("el-dialog",{attrs:{title:"素材列表",visible:e.diaLogMateria,width:"700px",inline:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.diaLogMateria=t},close:e.closeList}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"素材标题"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入素材标题"},model:{value:e.materialTitle,callback:function(t){e.materialTitle=t},expression:"materialTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材类型"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"全部"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.materalTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchMate}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.clearMate}},[e._v("清空")])],1),e._v(" "),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.materalTable}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"素材标题"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tagCN",label:"素材标签"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeCN",label:"素材类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.preview(t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.chooseMaterial(t.row)}}},[e._v("选择")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1)],1),e._v(" "),a("preview",{attrs:{previewMateria:e.previewMateria,previewInfo:e.previewInfo},on:{closePreview:e.closePreview}})],1)},staticRenderFns:[]},c=a("vSla")(l,r,!1,null,null,null);t.a=c.exports},C2r9:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"AppList",data:function(){return{search:{pageNo:1,pageRow:20,shopId:"",shopName:"",provinceEncode:"",cityEncode:""},data:{province:"",city:""},dataList:""}},components:{page:s.a},mounted:function(){var e=this;i.o().then(function(t){t=PF.JsonFormat(t.data),e.data.province=t.data}),e.Initial()},methods:{Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,document.querySelector("#shopId").value="",document.querySelector("#shopName").value="",this.search.provinceEncode="",this.search.cityEncode="",this.Initial()},Initial:function(){var e=this;e.dataList="",this.search.shopId=document.querySelector("#shopId").value,this.search.shopName=document.querySelector("#shopName").value,i.t({pageRow:e.search.pageRow,pageNo:e.search.pageNo,shopId:e.search.shopId,shopName:e.search.shopName,parentEncoding:e.search.provinceEncode,encoding:e.search.cityEncode}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):n({title:"商家列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家列表请求服务器失败","","error")})},ChangeCity:function(e){var t=this;t.search.cityEncode="",t.data.city="",i.k({provinceId:e}).then(function(e){e=PF.JsonFormat(e.data),t.data.city=e.data})},ActiveAuth:function(e){this.$router.push({path:"/shop/shopActive",query:{shopId:e.shopId}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("form",[e._m(1),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("商家区域：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.provinceEncode,expression:"search.provinceEncode"}],staticClass:"w100",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"provinceEncode",t.target.multiple?a:a[0])},function(t){e.ChangeCity(e.search.provinceEncode)}]}},[a("option",{attrs:{value:""}},[e._v("--省--")]),e._v(" "),e._l(e.data.province,function(t){return a("option",{key:t.$index,domProps:{value:t.encoding,selected:t.selected}},[e._v(e._s(t.name))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.cityEncode,expression:"search.cityEncode"}],staticClass:"w100",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"cityEncode",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("--市--")]),e._v(" "),e._l(e.data.city,function(t){return a("option",{key:t.$index,domProps:{value:t.encoding}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn l w85 mr15",attrs:{type:"button"},on:{click:e.Search}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")]),e._v(" "),a("button",{staticClass:"btn2 l w85",attrs:{type:"button"},on:{click:e.Reset}},[e._v("清空")])])])]),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(3)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(4),e._v(" "),e._l(e.dataList.objects,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.shopId))]),e._v(" "),a("td",[e._v(e._s(t.shopName))]),e._v(" "),a("td",[e._v("\n            "+e._s(t.provinceName)+"\n            "+e._s(t.cityName?"-"+t.cityName:"")+"\n          ")]),e._v(" "),a("td",[e._v(e._s(t.activate?"已激活":"未激活"))]),e._v(" "),a("td",[e._v("\n            "+e._s(t.category1Name)+"\n            "+e._s(t.category2Name?"/"+t.category2Name:"")+"\n            "+e._s(t.category3Name?"/"+t.category3Name:"")+"\n          ")]),e._v(" "),a("td",[e._v(e._s(t.businessTypeName))]),e._v(" "),a("td",[e._v(e._s(t.memberLevelName))]),e._v(" "),a("td",[e._v(e._s(t.shopTypeName))]),e._v(" "),a("td",{staticClass:"op"},[t.activate?e._e():a("a",{on:{click:function(a){e.ActiveAuth(t)}}},[e._v("立即激活")])])])})],2),e._v(" "),a("div",{staticClass:"hidden mt20"},[a("page",{attrs:{dataList:e.dataList,search:e.search},on:{Change:e.Change}})],1)]):e._e()])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("figure",[a("figcaption",[e._v("地点列表")]),e._v(" "),a("div",{staticClass:"crumbs"},[a("span",[e._v("商家管理")]),e._v(" "),a("a",{attrs:{href:"/shop"}},[e._v("商家列表")]),e._v(" "),a("a",[e._v("地点列表")])]),e._v(" "),a("a",{staticClass:"btn5  btn5-change",attrs:{href:"/shop"}},[a("i",{staticClass:"fa fa-reply"}),e._v(" 返回")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家名称：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopName",onfocus:"PF.CutString(this,60)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家ID：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopId",maxlength:"8",oninput:"PF.Integer(this)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("商家ID")]),e._v(" "),a("th",[e._v("商家名称")]),e._v(" "),a("th",[e._v("所在城市")]),e._v(" "),a("th",[e._v("激活状态")]),e._v(" "),a("th",[e._v("类型")]),e._v(" "),a("th",[e._v("业态")]),e._v(" "),a("th",[e._v("等级")]),e._v(" "),a("th",[e._v("地点属性")]),e._v(" "),a("th",[e._v("操作")])])}]},r=a("vSla")(o,l,!1,null,null,null);t.a=r.exports},CCiF:function(e,t){},CKXZ:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"AppList",data:function(){return{search:{pageNo:1,date:""},dataList:""}},components:{page:s.a},mounted:function(){this.Initial()},methods:{Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,this.search.date="",this.Initial()},Initial:function(){var e=this;e.dataList="",i.b({pageNo:e.search.pageNo,date:e.search.date}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):n({title:"比赛列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("比赛列表请求服务器失败","","error")})},AppShopList:function(e){this.$router.push({path:"/app/appShopList",query:{}})},Fun:function(e){this.$router.push({path:"/app/appFun",query:{}})},Auth:function(e){this.$router.push({path:"/app/appAuth",query:{}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("form",[a("div",{staticClass:"form-group text-center"},[a("label",[e._v("应用名称：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.search.date,expression:"search.date"}],attrs:{type:"text"},domProps:{value:e.search.date},on:{input:function(t){t.target.composing||e.$set(e.search,"date",t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn l w85 mr15",attrs:{type:"button"},on:{click:e.Search}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")]),e._v(" "),a("button",{staticClass:"btn2 l w85",attrs:{type:"button"},on:{click:e.Reset}},[e._v("清空")])])])]),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(1)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(2),e._v(" "),e._l(e.dataList.objects,function(t){return a("tr",{key:t.$index},[a("td",[e._v("霸屏")]),e._v(" "),a("td",[a("a",{staticClass:"pointer",on:{click:e.AppShopList}},[e._v("8")])]),e._v(" "),a("td",{staticClass:"op1"},[a("a",{on:{click:function(a){e.Fun(t,"info")}}},[e._v("功能管理")]),e._v(" "),a("a",{on:{click:function(a){e.Auth(t,"edit")}}},[e._v("设置权限")])])])})],2),e._v(" "),a("div",{staticClass:"hidden mt20"},[a("page",{attrs:{dataList:e.dataList,search:e.search},on:{Change:e.Change}})],1)]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("商家应用管理")]),this._v(" "),t("div",{staticClass:"crumbs"},[t("span",[this._v("应用管理")]),this._v(" "),t("a",[this._v("商家应用管理")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("应用")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("正在使用商户")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("操作")])])}]};a("vSla")(o,l,!1,null,null,null).exports},CoGa:function(e,t){},F3XJ:function(e,t){},GWAg:function(e,t){},H77w:function(e,t,a){"use strict";var s=a("XZGR"),i=a("QI2T"),n=a("Y0Uy"),o={name:"UploadMaterial",props:["diaLogChange","materalLabelList"],data:function(){return{activeName:"video",token:"",qiniuKey:"",allFormat:["jpg","jpeg","gif","png","bmp","avi","rm","rmvb","wmv","mp4","flv","mov","dwv","dat","amv","mp3","wav","wma","wav","ogg","ape","acc"],uploadStatus:!1,upIndex:"",allMaterial:[],videoList:[],webList:[],localList:[]}},methods:{uploadMaterial:n.debounce(function(){this.addFiles(this.allMaterial)},300),cancelMaterial:function(){this.$emit("closeDia",!1),this.allMaterial=[],this.videoList=[],this.webList=[],this.localList=[]},onProgress:function(){this.uploadStatus=!0},beforeUpload:function(e){var t=e.size,a=e.name.split(".").length-1,s=e.name.split(".")[a].toLowerCase();return t>104857600||104857600==t?(this.$message({message:"上传文件不能大于100M",type:"warning"}),this.uploadStatus=!1,!1):-1==this.allFormat.indexOf(s)?(this.$message({message:"不支持该格式文件",type:"warning"}),this.uploadStatus=!1,!1):void 0},error:function(e,t,a){this.$message({message:"上传失败",type:"error"}),this.uploadStatus=!1},success:function(e,t,a){var s=t.size;if(s>104857600||104857600==s)this.$message({message:"上传文件不能大于100M",type:"warning"});else{var i=t.name.split(".").length-1,n=t.name.split(".")[i].toLowerCase(),o={};if(o.type="jpg"===n||"jpeg"===n||"gif"===n||"png"===n||"bmp"===n?"图片":"avi"===n||"rm"===n||"rmvb"===n||"wmv"===n||"mp4"===n||"flv"===n||"mov"===n||"mtv"===n||"dwv"===n||"dat"===n||"amv"===n?"视频":"mp3"===n||"wav"===n||"wma"===n||"wav"===n||"ogg"===n||"ape"===n||"acc"===n?"音频":"未知","未知"==o.type)this.$message({message:"不支持该格式文件",type:"warning"}),this.uploadStatus=!1;else{this.$message({message:"上传成功",type:"success"}),this.uploadStatus=!1;for(var l=[],r=0;r<i;r++)l.push(t.name.split(".")[r]);var c=l.join("."),d=l.join("."),u=t.name.split(".")[i];c.length>15&&(c=c.slice(0,15)),o.fileNames=c+"."+u,o.fileName=d+"."+u,o.name="",o.url="http://fussen-qiniu.dface.cn/"+t.response.key,o.matriaLabel="",this.videoList.push(o)}}},addPage:n.debounce(function(){this.addFiles(this.webList)},300),localFiles:n.debounce(function(){this.addFiles(this.localList)},300),removeFile:function(e){"video"===this.activeName?this.videoList.splice(e,1):"webPage"===this.activeName?this.webList.splice(e,1):"localFile"===this.activeName&&this.localList.splice(e,1)},addFiles:function(e){var t=e.length,a=new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/),s={};if(e===this.webList?(s.webLine="",s.name="",s.type="网页",s.matriaLabel=""):e===this.localList&&(s.name="",s.matriaLabel="",s.type="本地"),e===this.webList||e===this.localList){if(0===e.length)e.push(s);else if(e.length>0)if(""===e[t-1].name)this.$message({message:"网页名称不能为空",type:"warning"});else if(e===this.webList)a.test(e[t-1].webLine)?e.push(s):this.$message({message:"不支持该格式网页",type:"warning"});else if(e===this.localList){for(var i,n=e[t-1].name.split(".").length-1,o=[],l=e[t-1].name.split(".")[n],r=0;r<n;r++)o.push(e[t-1].name.split(".")[r]);i=o.join("."),e[t-1].name.split(".").name=i+"."+l,void 0===l?this.$message({message:"文件名没输入后缀，请输入本地文件全名",type:"warning"}):-1==this.allFormat.indexOf(l.toLowerCase())?this.$message({message:"不支持该格式文件",type:"warning"}):e.push(s)}}else{var c=0,d=this.webList.length,u=this.localList.length;if(this.videoList.length>0)for(var p=0;p<this.videoList.length;p++){var h={};h.name=""===this.videoList[p].name?this.videoList[p].fileName:this.videoList[p].name,h.matriaLabel=this.videoList[p].matriaLabel,h.type=this.videoList[p].type,h.url=this.videoList[p].url,this.allMaterial.push(h)}if(d>0)for(var m=0;m<d;m++){var v={};v.name=this.webList[m].name,v.matriaLabel=this.webList[m].matriaLabel,v.type=this.webList[m].type,v.url=this.webList[m].webLine,this.allMaterial.push(v)}if(u>0)for(var f=0;f<u;f++){var g={};g.name=this.localList[f].name,g.matriaLabel=this.localList[f].matriaLabel,g.type=this.localList[f].type,g.url="",this.allMaterial.push(g)}if(this.allMaterial.length>0){for(var b in this.allMaterial)if("网页"===this.allMaterial[b].type){if(""===this.allMaterial[b].name){this.$message({message:"网页名称不能为空",type:"warning"}),c=1,this.allMaterial=[];break}if("网页"===this.allMaterial[b].type&&!a.test(this.allMaterial[b].url)){this.$message({message:"网页格式不正确",type:"warning"}),c=1,this.allMaterial=[];break}}else if("本地"===this.allMaterial[b].type){var _,y=this.allMaterial[b].name.split(".").length-1,w=[],C=this.allMaterial[b].name.split(".")[y];for(r=0;r<y;r++)w.push(this.allMaterial[b].name.split(".")[r]);if(_=w.join("."),this.allMaterial[b].name=_+"."+C,void 0===C){this.$message({message:"文件名没输入后缀，请输入本地文件全名",type:"warning"}),this.allMaterial=[],c=1;break}if(-1==this.allFormat.indexOf(C.toLowerCase())){this.$message({message:"本地文件名称格式不正确",type:"warning"}),this.allMaterial=[],c=1;break}}}else c=1,this.$message({message:"没有需要上传的东西",type:"warning"});0===c&&this.findTags()}},getTokens:function(){var e=this;s.I().then(function(t){var a=t.data;0===a.status?(e.load_data=!1,e.token=a.object):(e.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(t){e.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},saveMaterial:function(e){var t=this;s.w(e).then(function(e){var a=e.data;0===a.status?(t.$emit("closeDia",!1),t.allMaterial=[],t.videoList=[],t.webList=[],t.localList=[]):(t.load_data=!1,t.$emit("closeDia",!1),t.allMaterial=[],t.videoList=[],t.webList=[],t.localList=[],i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},findTags:function(){var e=this,t=this;s.p().then(function(a){var s=a.data;if(0===s.status)for(var n in t.load_data=!1,t.allMaterial)if(""===t.allMaterial[n].matriaLabel){var o={};o.tagId=t.allMaterial[n].matriaLabel,o.name=t.allMaterial[n].name,o.url=t.allMaterial[n].url,"图片"===t.allMaterial[n].type?o.type=0:"音频"===t.allMaterial[n].type?o.type=1:"视频"===t.allMaterial[n].type?o.type=2:"网页"===t.allMaterial[n].type?o.type=3:"本地"===t.allMaterial[n].type?o.type=4:o.type=5,e.saveMaterial(o)}else if("number"==typeof t.allMaterial[n].matriaLabel){var l={};for(var r in s.object)if(t.allMaterial[n].matriaLabel==s.object[r].name||t.allMaterial[n].matriaLabel==s.object[r].tagId){t.allMaterial[n].matriaLabel=s.object[r].tagId,l.tagId=t.allMaterial[n].matriaLabel,l.name=t.allMaterial[n].name,l.url=t.allMaterial[n].url,"图片"===t.allMaterial[n].type?l.type=0:"音频"===t.allMaterial[n].type?l.type=1:"视频"===t.allMaterial[n].type?l.type=2:"网页"===t.allMaterial[n].type?l.type=3:"本地"===t.allMaterial[n].type?l.type=4:l.type=5,e.saveMaterial(l);break}}else t.saveTag(t.allMaterial[n],n);else t.load_data=!1,i({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},saveTag:function(e,t){var a=this,n=this;s.x({name:e.matriaLabel}).then(function(t){var o=t.data;0===o.status?s.p().then(function(t){var s=t.data;if(0===s.status){if(s.object){var o={};for(var l in s.object)if(e.matriaLabel==s.object[l].name){e.matriaLabel=s.object[l].tagId,o.tagId=e.matriaLabel,o.name=e.name,o.url=e.url,"图片"===e.type?o.type=0:"音频"===e.type?o.type=1:"视频"===e.type?o.type=2:"网页"===e.type?o.type=3:"本地"===e.type?o.type=4:o.type=5,a.saveMaterial(o);break}}}else n.load_data=!1,i({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){n.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})}):(n.load_data=!1,i({text:o.errorMessage,allowOutsideClick:!1}))}).catch(function(e){n.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadMaterial"},[a("el-dialog",{attrs:{title:"上传素材",visible:e.diaLogChange,inline:!0,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.diaLogChange=t}}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"图片/视频/音频",name:"video"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"网页",name:"webPage"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"本地文件",name:"localFile"}})],1),e._v(" "),"video"===e.activeName?[a("ul",{staticClass:"ulList"},e._l(e.videoList,function(t,s){return a("li",[a("p",{staticClass:"fileList"},[a("span",[e._v(e._s(t.fileNames))]),a("span",{staticClass:"removeFileSpan",on:{click:function(t){e.removeFile(s)}}},[e._v("删除")])]),e._v(" "),a("el-form",{attrs:{"label-width":"70px","label-position":"right"}},[a("el-form-item",{attrs:{label:"素材名称"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"不设置默认取文件名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材标签"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"餐厅广告",filterable:"","allow-create":""},model:{value:t.matriaLabel,callback:function(a){e.$set(t,"matriaLabel",a)},expression:"item.matriaLabel"}},e._l(e.materalLabelList,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.name,value:e.tagId}})}))],1)],1)],1)}))]:e._e(),e._v(" "),"webPage"===e.activeName?[a("ul",{staticClass:"ulList"},e._l(e.webList,function(t,s){return a("li",[a("p",{staticClass:"fileList"},[a("span"),a("span",{staticClass:"removeFileSpan",on:{click:function(t){e.removeFile(s)}}},[e._v("删除")])]),e._v(" "),a("el-form",{attrs:{"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"素材名称",required:!0}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"网页名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网页链接",required:!0}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"输入网页链接"},model:{value:t.webLine,callback:function(a){e.$set(t,"webLine",a)},expression:"item.webLine"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材标签"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"餐厅广告",filterable:"","allow-create":""},model:{value:t.matriaLabel,callback:function(a){e.$set(t,"matriaLabel",a)},expression:"item.matriaLabel"}},e._l(e.materalLabelList,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.name,value:e.tagId}})}))],1)],1)],1)}))]:e._e(),e._v(" "),"localFile"===e.activeName?[a("ul",{staticClass:"ulList"},e._l(e.localList,function(t,s){return a("li",[a("p",{staticClass:"fileList"},[a("span"),a("span",{staticClass:"removeFileSpan",on:{click:function(t){e.removeFile(s)}}},[e._v("删除")])]),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"素材名称",required:!0}},[a("el-input",{staticStyle:{width:"72%"},attrs:{placeholder:"素材名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("span",{staticClass:"warm"},[e._v("输入本地文件全名，包括文件格式，例如：脸脸.jpg")])]),e._v(" "),a("el-form-item",{attrs:{label:"素材标签"}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"餐厅广告",filterable:"","allow-create":""},model:{value:t.matriaLabel,callback:function(a){e.$set(t,"matriaLabel",a)},expression:"item.matriaLabel"}},e._l(e.materalLabelList,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.name,value:e.tagId}})}))],1)],1)],1)}))]:e._e(),e._v(" "),a("div",{on:{click:e.getTokens}},["video"===e.activeName?a("el-upload",{staticClass:"upload-demo",attrs:{icon:"el-icon-plus",action:"https://up.qiniup.com/","on-progress":e.onProgress,"before-upload":e.beforeUpload,data:{token:e.token},"list-type":"picture","show-file-list":!1,"on-success":e.success,"on-error":e.error,disabled:e.uploadStatus}},[a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-plus",loading:e.uploadStatus}},[e._v("添加素材")])],1):e._e()],1),e._v(" "),"webPage"===e.activeName?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-plus"},on:{click:e.addPage}},[e._v("添加网页")]):e._e(),e._v(" "),"localFile"===e.activeName?a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-plus"},on:{click:e.localFiles}},[e._v("添加本地素材")]):e._e(),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.uploadMaterial}},[e._v("立即上传")]),e._v(" "),a("el-button",{on:{click:e.cancelMaterial}},[e._v("取消")])],1)],2)],1)},staticRenderFns:[]};var r=a("vSla")(o,l,!1,function(e){a("HmZw")},null,null).exports,c=a("BYch"),d=a("psC7"),u=a("dTto"),p=a("QI2T"),h=a("Y0Uy"),m=a("6ROu"),v={name:"MaterialManageList",components:{uploadMaterial:r,materiaList:c.a,preview:d.a,screenList:u.a},data:function(){return{load_data:!0,diaLogChange:!1,centerDialogVisible:!1,createPlan:!1,diaLogMateria:!1,shopId:"",materiaObjects:{},materiaObject:{},dialogEdit:!1,previewMateria:!1,screenDialog:!1,page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},openScreen:{saveScreenStyle:!1,screenStyle:"",screeName:"",screeId:"",operationShopId:""},tabList:[],creatPlanDia:{shopId:"",materialId:"",diaMateraName:"",diaMateraType:"",type:"",playType:0,beginTime:[new Date,new Date],addScreenList:[],endTime:[new Date,new Date],screenIds:[]},previewInfo:{},tabIndex:"",formData:{materalName:"",materalType:"",materalLabel:"",materalList:[{value:"0",name:"图片"},{value:"2",name:"视频"},{value:"1",name:"音频"},{value:"3",name:"网页"},{value:"4",name:"本地文件"},{value:"5",name:"素材组"}],materalLabelList:[]},editMatrial:{materialId:"",tagCN:"",name:"",url:"",type:"",tagId:""},tableData:[],cycleMateralGroup:{title:"",btnText:"",name:"",materialId:"",options:[]}}},mounted:function(){this.load_data=!0,this.findMaterials(1),this.findTags()},methods:{edit:h.debounce(function(e){this.tabIndex=e.$index,5==e.row.type?(this.centerDialogVisible=!0,this.load_data=!0,this.loadMaterial(e.row.materialId,"编辑")):(this.dialogEdit=!0,this.editMatrial.materialId=e.row.materialId,this.editMatrial.name=e.row.name,this.editMatrial.tagCN=e.row.tagCN,this.editMatrial.tagId=e.row.tagId,this.editMatrial.type=e.row.type,this.loadMaterial(e.row.materialId,"编辑1"))},300),deletePlan:function(e){var t=this;this.tabIndex=e.$index,this.$confirm("删除该素材的全部计划后，该素材未播放的计划将全部删除，且无法恢复，确认删除吗？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.load_data=!0,t.delPlanByMaterial(e.row.materialId,!0)})},preview:h.debounce(function(e){this.loadMaterial(e.materialId)},300),pageChange:function(e){this.page.pageNo=e,this.findMaterials(e)},searchHost:h.debounce(function(){this.load_data=!0,this.page.pageNo=1,this.findMaterials(1)},300),clearHost:h.debounce(function(){for(var e in this.page.pageNo=1,this.formData)this.formData[e]="materalLabelList"==e?this.formData[e]:"materalList"==e?this.formData[e]:"";this.load_data=!0,this.findMaterials(1)},300),materalLabeChange:h.debounce(function(){this.load_data=!0,this.page.pageNo=1,this.findMaterials(1)},300),materalTypeChange:function(){this.load_data=!0,this.page.pageNo=1,this.findMaterials(1)},createPlans:function(e){this.createPlan=!0,this.creatPlanDia.shopId=e.shopId,this.creatPlanDia.materialId=e.materialId,this.creatPlanDia.diaMateraName=e.name,this.creatPlanDia.type=e.type,this.creatPlanDia.diaMateraType=e.typeCN},savaCreat:h.debounce(function(){var e,t,a,s=m(this.creatPlanDia.beginTime[0].toUTCString()).format("YYYY-MM-DD"),i=m(this.creatPlanDia.beginTime[1].toUTCString()).format("YYYY-MM-DD"),n=m(this.creatPlanDia.endTime[0].toUTCString()).format("HH:mm"),o=m(this.creatPlanDia.endTime[1].toUTCString()).format("HH:mm");(e=i,t=new Date(s),a=new Date(e).getTime()-t.getTime(),parseInt(a/864e5))>59?p({text:"时间不能超过60天",allowOutsideClick:!1}):o===n?p({text:"开始时间不能和结束时间相同",allowOutsideClick:!1}):0===this.creatPlanDia.screenIds.length?p({text:"请先选择屏",allowOutsideClick:!1}):(this.load_data=!0,this.SavePlan(s,i,n,o))},300),cancelCreat:function(){for(var e in this.openScreen.saveScreenStyle=!0,this.createPlan=!1,this.creatPlanDia)this.creatPlanDia[e]="addScreenList"===e||"screenIds"===e?[]:"endTime"===e||"beginTime"===e?[new Date,new Date]:""},addScreen:h.debounce(function(){var e=this;this.$nextTick(function(){e.screenDialog=!0,e.openScreen.saveScreenStyle=!1,e.openScreen.screenStyle="newOpen",e.openScreen.screeName="屏列表",e.openScreen.screeId="-1",e.openScreen.operationShopId="",e.screenFindPage(1)})},300),editSava:h.debounce(function(){if(""===this.editMatrial.name)this.$message({message:"名字不能为空",type:"warning"});else if(this.load_data=!0,this.editMatrial.tagId)this.findTags(this.editMatrial.tagId);else{var e={materialId:this.editMatrial.materialId,name:this.editMatrial.name,type:this.editMatrial.type,url:this.editMatrial.url};this.saveMaterial(e)}},300),editCancel:function(){for(var e in this.dialogEdit=!1,this.editMatrial)this.editMatrial[e]=""},remove:function(e){var t=e-1;this.cycleMateralGroup.options.splice(t,1)},moveUp:function(e){var t=e-1,a=e-2,s=this.cycleMateralGroup.options[t];this.cycleMateralGroup.options.splice(t,1),this.cycleMateralGroup.options.splice(a,0,s)},moveDown:function(e){var t=e-1,a=this.cycleMateralGroup.options[t];this.cycleMateralGroup.options.splice(t,1),this.cycleMateralGroup.options.splice(e,0,a)},newMateral:function(){this.centerDialogVisible=!0,this.cycleMateralGroup.title="创建循环素材组",this.cycleMateralGroup.btnText="立即创建"},nowCreate:h.debounce(function(){if(""===this.cycleMateralGroup.name)this.$message({message:"循环素材组名称不能为空",type:"warning"});else if(0===this.cycleMateralGroup.options.length)this.$message({message:"素材组至少添加一个素材，请添加素材",type:"warning"});else{for(var e=0,t=0;t<this.cycleMateralGroup.options.length;t++){if(""===this.cycleMateralGroup.options[t].hour&&""===this.cycleMateralGroup.options[t].minute){this.$message({message:"请选择播放时长",type:"warning"}),e=1;break}if(0===this.cycleMateralGroup.options[t].hour&&0===this.cycleMateralGroup.options[t].minute){this.$message({message:"素材不允许小时和分钟同时为0，请修改素材播放时长",type:"warning"}),e=1;break}if(this.cycleMateralGroup.options[t].minute>59){this.$message({message:"分钟不能大于59分钟",type:"warning"}),e=1;break}if(this.cycleMateralGroup.options[t].hour>23){this.$message({message:"不能超过24小时",type:"warning"}),e=1;break}}if(0===e){this.load_data=!0;var a={};a.name=this.cycleMateralGroup.name,a.options=this.cycleMateralGroup.options,a.materialId=this.cycleMateralGroup.materialId,this.saveCircleMaterial(a)}}},300),cancelCreate:function(){for(var e in this.centerDialogVisible=!1,this.cycleMateralGroup)this.cycleMateralGroup[e]="options"==e?[]:""},addMaterial:function(){this.diaLogMateria=!0,this.materiaObject=this.materiaObjects,this.materiaObject.addMaterial="添加素材"},upLoad:function(){this.diaLogChange=!0},closeDia:function(e){this.diaLogChange=e,this.findMaterials(1)},closePreview:function(e){this.previewMateria=e},closeScreen:function(e,t){for(var a in this.screenDialog=t,e)this.creatPlanDia.screenIds.push(e[a].screenId);this.creatPlanDia.addScreenList=e},chooseMaterial:h.debounce(function(e,t){if(t){var a={};a.materialId=t.materialId,a.name=t.name,a.hour=0,a.minute=0,this.cycleMateralGroup.options.push(a)}this.diaLogMateria=e},300),saveMaterial:function(e){var t=this;s.w(e).then(function(e){var a=e.data;for(var s in 0===a.status?(t.load_data=!1,t.dialogEdit=!1,""!==t.tabIndex&&(t.tableData[t.tabIndex].name=t.editMatrial.name,t.tableData[t.tabIndex].tagCN=t.editMatrial.tagCN,t.tableData[t.tabIndex].tagId=t.editMatrial.tagId),t.$message({message:"编辑素材成功",type:"success"})):(t.load_data=!1,p({text:a.errorMsg,allowOutsideClick:!1})),t.editMatrial)t.editMatrial[s]=""}).catch(function(e){t.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},saveCircleMaterial:function(e){var t=this;s.u(e).then(function(a){0===a.data.status&&(t.tableData.push(e),t.load_data=!1,t.centerDialogVisible=!1,t.cycleMateralGroup.name="",t.cycleMateralGroup.options=[],t.findMaterials(t.page.pageNo),"创建循环素材组"==t.cycleMateralGroup.title?t.$message({message:"创建循环素材组成功",type:"success"}):t.$message({message:"编辑素材成功",type:"success"}))}).catch(function(e){t.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},findMaterials:function(e){var t=this,a={name:t.formData.materalName,type:t.formData.materalType,tagId:t.formData.materalLabel,pageNo:e};s.l(a).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.tableData=a.object.objects,1===a.object.pageNo&&(t.materiaObjects=a.object)):(t.page.pageRow=20,t.page.pageNo=1,t.page.total=0,t.tableData=[])):(t.load_data=!1,p({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},findTags:function(e){var t=this;s.p().then(function(a){var s=a.data;if(0===s.status){t.load_data=!1,t.formData.materalLabelList=s.object;var i=0;if(void 0!=e){for(var n in s.object){if(e===s.object[n].name){t.editMatrial.tagId=s.object[n].tagId,t.editMatrial.tagCN=s.object[n].name,t.saveMaterial(t.editMatrial),i=1;break}if(e===s.object[n].tagId){t.editMatrial.tagCN=s.object[n].name,t.saveMaterial(t.editMatrial),i=1;break}}0===i&&t.saveTag(e)}}else t.load_data=!1,p({text:s.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},loadMaterial:function(e,t){var a=this;s.r({materialId:e}).then(function(e){var s=e.data;0===s.status?(a.load_data=!1,void 0==t?s.object?3===s.object.type?window.open(s.object.url):4===s.object.type?a.$message({message:"本地文件无法预览",type:"warning"}):0===s.object.type||1===s.object.type||2===s.object.type?(a.previewMateria=!0,a.previewInfo=s.object):0===s.object.options.length?p({text:"素材组为空",allowOutsideClick:!1}):(a.previewMateria=!0,a.previewInfo=s.object):p({text:"素材组为空",allowOutsideClick:!1}):"编辑"==t?(a.cycleMateralGroup.name=s.object.name,a.cycleMateralGroup.title="编辑循环素材组",a.cycleMateralGroup.btnText="保存",a.cycleMateralGroup.materialId=s.object.materialId,s.object.options.length>0&&(a.cycleMateralGroup.options=s.object.options)):a.editMatrial.url=s.object.url):(a.load_data=!1,p({text:s.errorMsg,allowOutsideClick:!1}))}).catch(function(e){a.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},SavePlan:function(e,t,a,i){var n=this;s.a({shopId:n.creatPlanDia.shopId,materialId:n.creatPlanDia.materialId,type:n.creatPlanDia.type,startDate:e,endDate:t,startTime:a,endTime:i,screenIds:n.creatPlanDia.screenIds}).then(function(e){var t=e.data;0===t.status?(n.load_data=!1,n.createPlan=!1,n.$message({message:"创建计划成功",type:"success"})):(n.load_data=!1,p({text:t.errorMsg,allowOutsideClick:!1}))}).catch(function(e){n.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},screenFindPage:function(e){var t=this;s.y({pageNo:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object&&(t.tabList=a.object)):(t.load_data=!1,p({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},delPlanByMaterial:function(e,t){var a=this;s.c({materialId:e,groupFlag:t}).then(function(e){var t=e.data;0===t.status?(a.load_data=!1,a.findMaterials(a.page.pageNo)):(a.load_data=!1,p({text:t.errorMsg,allowOutsideClick:!1})),a.tabIndex=""}).catch(function(e){a.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})},saveTag:function(e){var t=this;s.x({name:e}).then(function(a){var s=a.data;0===s.status?t.findTags(e):(t.load_data=!1,p({text:s.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,p({text:"请求服务器失败",allowOutsideClick:!1})})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"materialList"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"matrialBtn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.upLoad}},[e._v("上传素材")]),e._v(" "),a("el-button",{on:{click:e.newMateral}},[e._v("创建循环素材")])],1),e._v(" "),a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"素材名称"}},[a("el-input",{attrs:{placeholder:"输入计划标题"},model:{value:e.formData.materalName,callback:function(t){e.$set(e.formData,"materalName",t)},expression:"formData.materalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材类型"}},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.materalTypeChange},model:{value:e.formData.materalType,callback:function(t){e.$set(e.formData,"materalType",t)},expression:"formData.materalType"}},[a("br"),e._v(" "),e._l(e.formData.materalList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"素材标签"}},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.materalLabeChange},model:{value:e.formData.materalLabel,callback:function(t){e.$set(e.formData,"materalLabel",t)},expression:"formData.materalLabel"}},[a("br"),e._v(" "),e._l(e.formData.materalLabelList,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.name,value:e.tagId}})})],2)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchHost}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clearHost}},[e._v("清空")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"素材名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeCN",label:"素材类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tagCN",label:"素材标签"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"播放次数(已播/计划）"},scopedSlots:e._u([{key:"default",fn:function(t){return[5!=t.row.type?a("p",[e._v(e._s(t.row.playCount)+"/"+e._s(t.row.planCount))]):e._e(),e._v(" "),5==t.row.type?a("p",[e._v("-")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"播放时长(已播/计划）"},scopedSlots:e._u([{key:"default",fn:function(t){return[5!=t.row.type?a("p",[""!=t.row.playTime?a("span",[e._v(e._s(t.row.playTime))]):e._e(),e._v(" "),""==t.row.playTime?a("span",[e._v("0")]):e._e(),e._v(" "),""!=t.row.planTime?a("span",[e._v("/"+e._s(t.row.planTime))]):e._e(),e._v(" "),""==t.row.planTime?a("span",[e._v("/0")]):e._e()]):e._e(),e._v(" "),5==t.row.type?a("p",[e._v("-")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.edit(t)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.preview(t.row)}}},[e._v("预览")]),e._v(" "),a("router-link",{attrs:{to:{name:"CloudSeedPlan",query:{shopId:t.row.shopId}}}},[a("el-button",{attrs:{type:"text"}},[e._v("播放计划")])],1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.deletePlan(t)}}},[e._v("删除全部计划")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.createPlans(t.row)}}},[e._v("创建计划")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1)],1),e._v(" "),a("upload-material",{attrs:{diaLogChange:e.diaLogChange,materalLabelList:e.formData.materalLabelList},on:{closeDia:e.closeDia}}),e._v(" "),a("materia-list",{attrs:{diaLogMateria:e.diaLogMateria,materiaObject:e.materiaObject},on:{chooseMaterial:e.chooseMaterial}}),e._v(" "),a("preview",{attrs:{previewMateria:e.previewMateria,previewInfo:e.previewInfo},on:{closePreview:e.closePreview}}),e._v(" "),a("screen-list",{attrs:{screenDialog:e.screenDialog,addScreenList:e.creatPlanDia.addScreenList,tabList:e.tabList,openScreen:e.openScreen},on:{closeScreen:e.closeScreen}}),e._v(" "),a("el-dialog",{attrs:{title:"编辑素材",visible:e.dialogEdit,inline:!0,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"素材名称",required:!0}},[a("el-input",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{placeholder:"输入素材标题"},model:{value:e.editMatrial.name,callback:function(t){e.$set(e.editMatrial,"name",t)},expression:"editMatrial.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"素材标签"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",placeholder:"全部"},model:{value:e.editMatrial.tagId,callback:function(t){e.$set(e.editMatrial,"tagId",t)},expression:"editMatrial.tagId"}},e._l(e.formData.materalLabelList,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.name,value:e.tagId}})}))],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editSava}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.editCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.cycleMateralGroup.title,visible:e.centerDialogVisible,inline:!0,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"素材名称",required:!0}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入名称"},model:{value:e.cycleMateralGroup.name,callback:function(t){e.$set(e.cycleMateralGroup,"name",t)},expression:"cycleMateralGroup.name"}})],1),e._v(" "),a("ul",{staticClass:"ulList"},e._l(e.cycleMateralGroup.options,function(t,s){return a("li",[a("p",{staticClass:"fileList"},[a("span",[e._v(e._s(++s))]),e._v(" "),a("span",[a("span",{staticClass:"removeFileSpan",on:{click:function(t){e.remove(s)}}},[e._v("移除")]),e._v(" "),1!==s?a("span",{staticClass:"removeFileSpan",on:{click:function(t){e.moveUp(s)}}},[e._v("上移")]):e._e(),e._v(" "),s!==e.cycleMateralGroup.options.length?a("span",{staticClass:"removeFileSpan",on:{click:function(t){e.moveDown(s)}}},[e._v("下移")]):e._e()])]),e._v(" "),a("el-form",{attrs:{"label-width":"80px","label-position":"right"}},[a("el-form-item",{attrs:{label:"素材名称"}},[a("span",[e._v(e._s(t.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"播放时长"}},[a("el-input",{staticStyle:{width:"50px"},attrs:{type:"number",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:t.hour,callback:function(a){e.$set(t,"hour",a)},expression:"item.hour"}}),e._v("小时\n              "),a("el-input",{staticStyle:{width:"50px"},attrs:{type:"number",oninput:"if(value.length>2)value=value.slice(0,2)"},model:{value:t.minute,callback:function(a){e.$set(t,"minute",a)},expression:"item.minute"}}),e._v("分钟\n            ")],1)],1)],1)}))],1),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{icon:"el-icon-plus"},on:{click:e.addMaterial}},[e._v("添加素材")]),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.nowCreate}},[e._v(e._s(e.cycleMateralGroup.btnText))]),e._v(" "),a("el-button",{on:{click:e.cancelCreate}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"创建计划",visible:e.createPlan,inline:!0,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.createPlan=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{staticStyle:{"border-bottom":"1px solid #E4E7E9"}},[a("span",[e._v(e._s(e.creatPlanDia.diaMateraName))]),e._v(" "),a("el-button",{attrs:{size:"mini"}},[e._v(e._s(e.creatPlanDia.diaMateraType))])],1),e._v(" "),a("el-form-item",{attrs:{label:"计划类型:"}},[a("el-radio-group",{model:{value:e.creatPlanDia.playType,callback:function(t){e.$set(e.creatPlanDia,"playType",t)},expression:"creatPlanDia.playType"}},[a("el-radio",{attrs:{label:0}},[e._v("边播计划")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("插播计划")])],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"border-bottom":"1px solid #E4E7E9"},attrs:{label:"计划时间:"}},[a("div",{staticClass:"rightTime"},[a("el-date-picker",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.creatPlanDia.beginTime,callback:function(t){e.$set(e.creatPlanDia,"beginTime",t)},expression:"creatPlanDia.beginTime"}}),e._v(" "),a("el-time-picker",{staticStyle:{width:"100%"},attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.creatPlanDia.endTime,callback:function(t){e.$set(e.creatPlanDia,"endTime",t)},expression:"creatPlanDia.endTime"}})],1)]),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"应用屏幕"}},[a("el-button",{on:{click:e.addScreen}},[e._v("添加屏幕")]),a("br"),e._v(" "),e._l(e.creatPlanDia.addScreenList,function(t){return a("el-tag",[e._v(e._s(t.screenName))])})],2)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.savaCreat}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancelCreat}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("素材管理")])])])}]};var g=a("vSla")(v,f,!1,function(e){a("GWAg")},null,null);t.a=g.exports},H7eU:function(e,t){},HmZw:function(e,t){},I7tS:function(e,t,a){"use strict";var s=a("XZGR"),i=a("/k80"),n=a("psC7"),o=a("QI2T"),l=a("Y0Uy"),r={name:"PlayPlanList",components:{preview:n.a},data:function(){return{load_data:!1,modifyPlanDia:!1,previewInfo:{},previewMateria:!1,page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},formData:{materalName:"",planStatu:"",palnTime:"",playStatu:"",allScreen:"",timeConflict:"",useShopName:"",useShopId:""},modifyForm:{planId:"",screenId:"",materialId:"",materialName:"",type:"",typeCN:"",shopId:"",date:"",startTime:"",endTime:"",timeSelect:[],planContent:""},areaChoose:i.regionData,workarea:[],allScreenList:[],playStatuList:[{value:0,label:"编播计划"},{value:1,label:"插播计划"}],planStatuList:[{value:1,label:"正常计划"},{value:2,label:"冲突计划"},{value:3,label:"已播计划"}],materialData:[]}},mounted:function(){this.load_data=!0,this.planFindList(1),this.screenFindPage(1)},methods:{handleChange:function(){},seachScreen:function(){this.load_data=!0,this.page.pageNo=1,this.page.total=0,this.planFindList(1)},clearScreen:function(){var e=this;for(var t in this.formData)this.formData[t]="";this.$nextTick(function(){e.load_data=!0,e.page.pageNo=1,e.page.total=0,e.planFindList(1)})},pageChange:function(e){this.load_data=!0,this.page.pageNo=e,this.planFindList(e)},edit:function(e){this.modifyForm.timeSelect=[],this.modifyPlanDia=!0,this.modifyForm.planId=e.planId,this.modifyForm.screenId=e.screenId,this.modifyForm.materialId=e.materialId,this.modifyForm.materialName=e.materialName,this.modifyForm.type=e.type,this.modifyForm.typeCN=e.typeCN,this.modifyForm.shopId=e.operationShopId,this.modifyForm.date=e.planDate,this.modifyForm.startTime=e.startTime,this.modifyForm.endTime=e.endTime,this.modifyForm.timeSelect[0]=e.planDate+" "+e.startTime,this.modifyForm.timeSelect[1]=e.planDate+" "+e.endTime},editSave:l.debounce(function(){var e=this.modifyForm.startTime,t=this.modifyForm.endTime;""==e||""==t?this.$message({message:"请选择结束时间",type:"warning"}):e==t?this.$message({message:"开始时间不能等于结束时间",type:"warning"}):this.updatePlan()},300),deletePlan:function(){for(var e in this.modifyPlanDia=!1,this.modifyForm)this.modifyForm[e]="timeSelect"===e?[]:""},previews:function(e){""==e?this.$message({message:"素材id不能为空",type:"warning"}):this.loadMaterial(e)},closePreview:function(e){this.previewMateria=e},planFindList:function(e){var t=this,a="";""!==t.formData.palnTime&&(a=t.formData.palnTime),s.t({pageNo:e,materialName:t.formData.materalName,status:t.formData.planStatu,type:t.formData.playStatu,date:a,screenId:t.formData.allScreen,useShopId:t.formData.useShopId,useShopName:t.formData.useShopName}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.materialData=a.object.objects):(t.materialData=[],t.page.total=0,t.load_data=!1)):(t.load_data=!1,o({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,o({text:"请求服务器失败",allowOutsideClick:!1})})},screenFindPage:function(e){var t=this;s.y({pageNo:e,operationShopId:40261649}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?t.allScreenList=a.object.objects:t.allScreenList=[]):(t.load_data=!1,o({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,o({text:"请求服务器失败",allowOutsideClick:!1})})},updatePlan:function(){var e=this,t=this;s.G({planId:t.modifyForm.planId,shopId:t.modifyForm.shopId,materialId:t.modifyForm.materialId,type:t.modifyForm.type,date:t.modifyForm.date,startTime:t.modifyForm.startTime,endTime:t.modifyForm.endTime,screenId:t.modifyForm.screenId}).then(function(a){var s=a.data;for(var i in 0==s.status?(t.modifyPlanDia=!1,t.load_data=!1,e.$message({message:"编辑成功",type:"success"})):(t.modifyPlanDia=!1,t.load_data=!1,o({text:s.errorMsg,allowOutsideClick:!1})),t.modifyForm)t.modifyForm[i]="timeSelect"===i?[]:""}).catch(function(e){t.modifyPlanDia=!1,t.load_data=!1,o({text:"请求服务器失败",allowOutsideClick:!1})})},loadMaterial:function(e){var t=this;s.r({materialId:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?3===a.object.type?window.open(a.object.url):4===a.object.type?t.$message({message:"本地文件无法预览",type:"warning"}):0===a.object.type||1===a.object.type||2===a.object.type?(t.previewMateria=!0,t.previewInfo=a.object):0===a.object.options.length?o({text:"素材组为空",allowOutsideClick:!1}):(t.previewMateria=!0,t.previewInfo=a.object):o({text:"素材组为空",allowOutsideClick:!1})):(t.load_data=!1,o({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,o({text:"请求服务器失败",allowOutsideClick:!1})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"playPlan"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"素材标题"}},[a("el-input",{attrs:{placeholder:"输入素材标题进行搜索"},model:{value:e.formData.materalName,callback:function(t){e.$set(e.formData,"materalName",t)},expression:"formData.materalName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.planStatu,callback:function(t){e.$set(e.formData,"planStatu",t)},expression:"formData.planStatu"}},e._l(e.planStatuList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"计划时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择时间","value-format":"yyyy-MM-dd"},model:{value:e.formData.palnTime,callback:function(t){e.$set(e.formData,"palnTime",t)},expression:"formData.palnTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.playStatu,callback:function(t){e.$set(e.formData,"playStatu",t)},expression:"formData.playStatu"}},e._l(e.playStatuList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"区域选择"}},[a("el-cascader",{attrs:{options:e.areaChoose,"change-on-select":""},on:{change:e.handleChange},model:{value:e.formData.workarea,callback:function(t){e.$set(e.formData,"workarea",t)},expression:"formData.workarea"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"时间冲突"}},[a("el-checkbox",{attrs:{size:"medium",label:"1",border:""},model:{value:e.formData.timeConflict,callback:function(t){e.$set(e.formData,"timeConflict",t)},expression:"formData.timeConflict"}},[e._v("时间冲突计划")])],1),e._v(" "),a("el-form-item",{attrs:{label:"投放商户"}},[a("el-input",{attrs:{placeholder:"输入投放商户"},model:{value:e.formData.useShopName,callback:function(t){e.$set(e.formData,"useShopName",t)},expression:"formData.useShopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"投放商户ID"}},[a("el-input",{attrs:{type:"number",placeholder:"输入投放商户ID",oninput:"if(value.length>8)value=value.slice(0,8)"},model:{value:e.formData.useShopId,callback:function(t){e.$set(e.formData,"useShopId",t)},expression:"formData.useShopId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"屏"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.allScreen,callback:function(t){e.$set(e.formData,"allScreen",t)},expression:"formData.allScreen"}},e._l(e.allScreenList,function(e){return a("el-option",{key:e.screenId,attrs:{label:e.screenName,value:e.screenId}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.seachScreen}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clearScreen}},[e._v("清空")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialData}},[a("el-table-column",{attrs:{align:"center",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return["冲突计划"==t.row.statusCN?a("p",{staticClass:"conflictPlan"},[e._v(e._s(t.row.statusCN))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"materialName",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",sortable:"",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"planDate",sortable:"",label:"计划时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.planDate)+" "+e._s(t.row.startTime)+"-"+e._s(t.row.endTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"statusCN",label:"计划状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeCN",label:"计划类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"useShopLocation",label:"投放区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"投放商标/ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.useShopName)),t.row.useShopId?a("span",[e._v("("+e._s(t.row.useShopId)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"screenName",label:"投屏"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.edit(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}}),e._v(" "),a("preview",{attrs:{previewMateria:e.previewMateria,previewInfo:e.previewInfo},on:{closePreview:e.closePreview}}),e._v(" "),a("el-dialog",{staticClass:"diaLog",attrs:{title:"修改计划",visible:e.modifyPlanDia,"close-on-click-modal":!1},on:{"update:visible":function(t){e.modifyPlanDia=t}}},[a("el-form",{attrs:{inline:!0,"label-position":"right"}},[a("el-form-item",[a("h5",[a("span",[e._v(e._s(e.modifyForm.materialName)+" "),a("span",{staticClass:"spanBtn"},[e._v(e._s(e.modifyForm.typeCN))])])])]),e._v(" "),a("el-form-item",{staticClass:"notLatBtn",attrs:{label:"计划时间:","label-width":"80px"}},[a("el-time-picker",{staticStyle:{width:"80%"},attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.modifyForm.timeSelect,callback:function(t){e.$set(e.modifyForm,"timeSelect",t)},expression:"modifyForm.timeSelect"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划内容:","label-width":"80px",id:"lastBtn"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.previews(e.modifyForm.materialId)}}},[e._v("预览")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editSave}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.deletePlan(e.modifyForm.planId)}}},[e._v("取消")])],1)],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("播放计划")])])])}]};var d=a("vSla")(r,c,!1,function(e){a("CoGa")},null,null);t.a=d.exports},JRQV:function(e,t){},KWOm:function(e,t){},Kfb9:function(e,t,a){"use strict";var s=a("aA9S"),i=a.n(s),n=a("js5j"),o=a("P9l9"),l=a("QI2T"),r={name:"UseShopList",data:function(){return{pData:{activeTab:"firstTab",edit:!1,kind:"",clientType:0},data:[],defaultProps:{label:"name",children:"childs"},error:{nameError:"",routeError:"",urlError:"",descriptionError:"",childsError:[]},edit:{},copy:{}}},components:{page:n.a},mounted:function(){this.Initial(!0)},methods:{handleClick:function(e,t){switch(this.pData.activeTab){case"firstTab":this.pData.clientType=0;break;case"secondTab":this.pData.clientType=1}this.Initial(!0)},NodeClick:function(e,t,a){this.AuthInfo(e.sid)},ClearError:function(){this.error={nameError:"",routeError:"",urlError:"",descriptionError:"",childsError:[]}},Initial:function(e){var t=this;t.data=[],o.u({kind:t.pData.clientType}).then(function(a){0==(a=PF.JsonFormat(a.data)).status?(t.data=a.object,e&&t.AuthInfo(""!=a.object[0].childs?a.object[0].childs[0].sid:a.object[0].sid),setTimeout(function(){for(var e=0;e<document.querySelectorAll(".el-tree-node__label").length;e++)document.querySelectorAll(".el-tree-node__label")[e].onclick=function(){for(var e=0;e<document.querySelectorAll(".el-tree-node__label").length;e++)document.querySelectorAll(".el-tree-node__label")[e].parentElement.className="el-tree-node__content";this.parentElement.className+=" bg-blue"},document.querySelectorAll(".el-tree-node__content")[e].onclick=function(){for(var e=0;e<document.querySelectorAll(".el-tree-node__content").length;e++)document.querySelectorAll(".el-tree-node__content")[e].className="el-tree-node__content";this.className+=" bg-blue"}},500)):l({title:"商家所有权限列表服务器返回错误",text:a.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")})},AuthInfo:function(e){var t=this;o.e({sid:e}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?(t.pData.kind="",t.pData.edit=!1,t.edit=i()({},e.object),document.querySelector("#sid").value=e.object.sid,document.querySelector("#name").value=e.object.name,document.querySelector("#route").value=e.object.route,document.querySelector("#description").value=e.object.description,document.querySelector("#icon").value=e.object.icon,document.querySelector("#parentNodeName").value=e.object.parentNodeName,document.querySelector("#parentName").value=e.object.parentName,document.querySelector("#parentSid").value=e.object.parentSid,t.copy=i()({},e.object)):l({title:"此权限详情服务器返回错误",text:e.errorMsg,type:"error"})}).catch(function(e){l("此权限详情请求服务器失败","","error")})},AddMenu:function(e){this.pData.kind=e,this.pData.edit=!0,this.edit.menuStatus=1,this.edit.menuOpen=1,this.edit.route="",this.edit.url="",this.edit.permissionUrlPoList=[],document.querySelector("#sid").value="",document.querySelector("#name").value="",document.querySelector("#route").value="",document.querySelector("#description").value="",document.querySelector("#icon").value="","child"==e&&(this.edit.parentSid=this.edit.sid,document.querySelector("#parentSid").value=this.edit.parentSid)},Edit:function(){this.pData.edit=!0,this.pData.kind=""},Del:function(){var e=this;l({title:"删除："+e.edit.name+"?",type:"warning",showCancelButton:!0}).then(function(t){t.value&&o.d({sid:e.edit.sid}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(l({title:"删除成功",type:"success",timer:2e3}),e.Initial(!0)):l({title:"删除权限服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("删除权限请求服务器失败","","error")})})},Close:function(){this.pData.edit=!1,this.edit=i()({},this.copy),document.querySelector("#sid").value=this.copy.sid,document.querySelector("#name").value=this.copy.name,document.querySelector("#route").value=this.copy.route,document.querySelector("#description").value=this.copy.description,document.querySelector("#icon").value=this.copy.icon},Submit:function(){var e=this;if(e.ClearError(),e.edit.name=document.querySelector("#name").value,e.edit.route=document.querySelector("#route").value,e.edit.description=document.querySelector("#description").value,e.edit.icon=document.querySelector("#icon").value,!e.edit.name)return e.error.nameError="* 请输入菜单名称",PF.GoTo("name");if(!e.edit.route)return e.error.routeError="* 请输入前端路由地址",PF.GoTo("route");if(!e.edit.url)return e.error.urlError="* 请输入链接地址",PF.GoTo("url");if(!e.edit.description)return e.error.descriptionError="* 请输入描述",PF.GoTo("description");if(0!=e.edit.permissionUrlPoList.length)for(var t=0;t<e.edit.permissionUrlPoList.length;t++)if(!e.edit.permissionUrlPoList[t].url||!e.edit.permissionUrlPoList[t].description)return e.error.childsError[t]="* 子节点名称或url地址不能为空",PF.GoTo("childs");e.pData.kind?o.c({name:e.edit.name,route:e.edit.route,url:e.edit.url,description:e.edit.description,icon:e.edit.icon,isOutsideLink:e.edit.isOutsideLink,menuStatus:e.edit.menuStatus,menuOpen:e.edit.menuOpen,parentNodeName:e.edit.parentNodeName,parentName:e.edit.parentName,parentSid:e.edit.parentSid,kind:e.pData.clientType,permissionUrlPoList:e.edit.permissionUrlPoList,flag:e.edit.flag,sort:e.edit.sort,type:e.edit.type}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(l({title:"保存成功",type:"success",timer:"2000"}),e.pData.kind="",e.pData.edit=!1,e.Initial(!1)):l({title:"保存服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("保存请求服务器失败","","error")}):e.pData.edit&&o.g({sid:e.edit.sid,name:e.edit.name,route:e.edit.route,url:e.edit.url,description:e.edit.description,icon:e.edit.icon,isOutsideLink:e.edit.isOutsideLink,menuStatus:e.edit.menuStatus,menuOpen:e.edit.menuOpen,parentNodeName:e.edit.parentNodeName,parentName:e.edit.parentName,parentSid:e.edit.parentSid,permissionUrlPoList:e.edit.permissionUrlPoList,kind:e.pData.clientType,flag:e.edit.flag,sort:e.edit.sort,type:e.edit.type}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(l({title:"保存成功",type:"success",timer:"2000"}),e.pData.kind="",e.pData.edit=!1,document.querySelector(".bg-blue").querySelectorAll(".el-tree-node__label")[0].innerHTML=e.edit.name):l({title:"保存服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("保存请求服务器失败","","error")})},AddChildMenu:function(){if(0==this.pData.edit)return!1;this.edit.permissionUrlPoList.push({description:"",url:""})},DelChildMenu:function(e){if(0==this.pData.edit)return!1;this.edit.permissionUrlPoList.splice(e,1)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"PC权限",name:"secondTab"}})],1),e._v(" "),a("div",{staticClass:"w35p l"},[a("div",{staticClass:"box4"},[a("header",[a("button",{staticClass:"btn mr10",attrs:{type:"button"},on:{click:function(t){e.AddMenu("sibling")}}},[e._v("新增同级菜单")]),e._v(" "),a("button",{staticClass:"btn mr10",attrs:{type:"button"},on:{click:function(t){e.AddMenu("child")}}},[e._v("新增子级菜单")]),e._v(" "),a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.Del}},[e._v("删除")])]),e._v(" "),a("div",{staticClass:"box4con style"},[a("el-tree",{attrs:{"default-expand-all":"","expand-on-click-node":!1,"auto-expand-parent":!0,"node-key":"sid",data:e.data,props:e.defaultProps},on:{"node-click":e.NodeClick}})],1)])]),e._v(" "),a("div",{staticClass:"w62p l ml3p"},[a("div",{staticClass:"box4"},[a("header",[a("button",{directives:[{name:"show",rawName:"v-show",value:1==e.pData.edit,expression:"pData.edit==true"}],staticClass:"btn mr10",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:1==e.pData.edit,expression:"pData.edit==true"}],staticClass:"btn mr10",attrs:{type:"button"},on:{click:e.Submit}},[e._v("保存")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:0==e.pData.edit,expression:"pData.edit==false"}],staticClass:"btn",attrs:{type:"button"},on:{click:e.Edit}},[e._v("编辑")])]),e._v(" "),a("div",{staticClass:"box4con2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.pData.kind,expression:"!pData.kind"}],staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("菜单ID：")]),e._v(" "),e._m(1)]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("菜单名称：")]),e._v(" "),a("span",[a("input",{attrs:{type:"text",id:"name",value:"",onfocus:"PF.CutString(this,32)",disabled:!e.pData.edit}}),e._v(" "),a("em",{staticClass:"notice"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.nameError,expression:"error.nameError"}]},[e._v(e._s(e.error.nameError))])])])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("前端路由：")]),e._v(" "),a("span",[a("input",{attrs:{type:"text",id:"route",value:"",oninput:"PF.English(this)",disabled:!e.pData.edit}}),e._v(" "),a("em",{staticClass:"notice"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.routeError,expression:"error.routeError"}]},[e._v(e._s(e.error.routeError))])])])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("URL：")]),e._v(" "),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.url,expression:"edit.url"}],attrs:{type:"text",id:"url",disabled:!e.pData.edit},domProps:{value:e.edit.url},on:{input:function(t){t.target.composing||e.$set(e.edit,"url",t.target.value)}}}),e._v(" "),a("em",{staticClass:"notice"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.urlError,expression:"error.urlError"}]},[e._v(e._s(e.error.urlError))])])])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("菜单描述：")]),e._v(" "),a("span",[a("textarea",{staticClass:"w300",attrs:{id:"description",onfocus:"PF.CutString(this,200)",disabled:!e.pData.edit}})]),e._v(" "),a("div",{staticClass:"ml115"},[a("em",{staticClass:"notice"},[e._v("限200个字符或100个汉字"),a("br"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.descriptionError,expression:"error.descriptionError"}],staticClass:"ml20"},[e._v(e._s(e.error.descriptionError))])])])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("菜单ICON：")]),e._v(" "),a("span",[a("input",{attrs:{type:"text",id:"icon",value:"",oninput:"PF.English(this)",disabled:!e.pData.edit}})])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("是否外链：")]),e._v(" "),a("span",[a("label",{staticClass:"mr20 mt0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.isOutsideLink,expression:"edit.isOutsideLink"}],staticClass:"fnone mr20",attrs:{type:"radio",value:"1",name:"isOutsideLink",disabled:!e.pData.edit},domProps:{checked:e._q(e.edit.isOutsideLink,"1")},on:{change:function(t){e.$set(e.edit,"isOutsideLink","1")}}}),e._v("是")]),e._v(" "),a("label",{staticClass:"mt0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.isOutsideLink,expression:"edit.isOutsideLink"}],staticClass:"fnone mr20",attrs:{type:"radio",value:"0",name:"isOutsideLink",disabled:!e.pData.edit},domProps:{checked:e._q(e.edit.isOutsideLink,"0")},on:{change:function(t){e.$set(e.edit,"isOutsideLink","0")}}}),e._v("否")])])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("是否控制菜单：")]),e._v(" "),a("span",[a("label",{staticClass:"mr20 mt0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.menuStatus,expression:"edit.menuStatus"}],staticClass:"fnone mr20",attrs:{type:"radio",value:"1",name:"menuStatus",disabled:!e.pData.edit},domProps:{checked:e._q(e.edit.menuStatus,"1")},on:{change:function(t){e.$set(e.edit,"menuStatus","1")}}}),e._v("是")]),e._v(" "),a("label",{staticClass:"mt0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.menuStatus,expression:"edit.menuStatus"}],staticClass:"fnone mr20",attrs:{type:"radio",value:"0",name:"menuStatus",disabled:!e.pData.edit},domProps:{checked:e._q(e.edit.menuStatus,"0")},on:{change:function(t){e.$set(e.edit,"menuStatus","0")}}}),e._v("否")])])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("菜单是否有展开项：")]),e._v(" "),a("span",[a("label",{staticClass:"mr20 mt0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.menuOpen,expression:"edit.menuOpen"}],staticClass:"fnone mr20",attrs:{type:"radio",value:"1",name:"menuOpen",disabled:!e.pData.edit},domProps:{checked:e._q(e.edit.menuOpen,"1")},on:{change:function(t){e.$set(e.edit,"menuOpen","1")}}}),e._v("是")]),e._v(" "),a("label",{staticClass:"mt0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.menuOpen,expression:"edit.menuOpen"}],staticClass:"fnone mr20",attrs:{type:"radio",value:"0",name:"menuOpen",disabled:!e.pData.edit},domProps:{checked:e._q(e.edit.menuOpen,"0")},on:{change:function(t){e.$set(e.edit,"menuOpen","0")}}}),e._v("否")])])]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100",attrs:{id:"childs"}},[e._v("子URL权限：")]),e._v(" "),a("div",{staticClass:"l mw450"},[e._l(e.edit.permissionUrlPoList,function(t,s){return a("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.edit.permissionUrlPoList,expression:"edit.permissionUrlPoList!=''"}],key:t.$index},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"d.description"}],staticClass:"w110",attrs:{type:"text",placeholder:"名称",disabled:!e.pData.edit},domProps:{value:t.description},on:{input:function(a){a.target.composing||e.$set(t,"description",a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"d.url"}],staticClass:"w190",attrs:{type:"text",placeholder:"URL地址",disabled:!e.pData.edit},domProps:{value:t.url},on:{input:function(a){a.target.composing||e.$set(t,"url",a.target.value)}}}),e._v(" "),a("a",{staticClass:"mt6 inline-block pointer blue",on:{click:function(t){e.DelChildMenu(s)}}},[e._v("删除")]),e._v(" "),a("div",{staticClass:"mb10"},[a("em",{staticClass:"notice"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.childsError[s],expression:"error.childsError[index]"}],staticClass:"ml0"},[e._v(e._s(e.error.childsError[s]))])])])])}),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("button",{staticClass:"btn w110",attrs:{type:"button",disabled:!e.pData.edit},on:{click:function(t){e.AddChildMenu()}}},[e._v("添加url")])],2)])])])])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("菜单管理"),t("span",{staticClass:"ft14 gray2"},[this._v("（目前只支持创建三级菜单）")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("input",{attrs:{type:"text",id:"sid",value:"",oninput:"PF.Integer(this)",disabled:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group mb10 none"},[t("label",{staticClass:"w100"},[this._v("父节点名称：")]),this._v(" "),t("span",[t("input",{attrs:{type:"text",id:"parentNodeName",value:"",onfocus:"PF.CutString(this, 14)",disabled:""}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group mb10 none"},[t("label",{staticClass:"w100"},[this._v("上级菜单名称：")]),this._v(" "),t("span",[t("input",{attrs:{type:"text",id:"parentName",value:"",onfocus:"PF.CutString(this, 14)",disabled:""}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group mb10"},[t("label",{staticClass:"w100"},[this._v("上级菜单ID：")]),this._v(" "),t("span",[t("input",{attrs:{type:"text",id:"parentSid",value:"",onfocus:"PF.Integer(this)",disabled:""}})])])}]},d=a("vSla")(r,c,!1,null,null,null);t.a=d.exports},Kpgg:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};a.d(s,"Kind",function(){return me}),a.d(s,"Send",function(){return ve}),a.d(s,"CouponStatus",function(){return fe});a("JRQV"),a("rnj/");var i=a("NcVA"),n=a.n(i),o=(a("badV"),a("I0b/")),l=a.n(o),r=(a("r1F+"),a("WB04")),c=a.n(r),d=(a("pghe"),a("qIUh")),u=a.n(d),p=(a("QHIq"),a("tWhp")),h=a.n(p),m=(a("RUED"),a("7e1q")),v=a.n(m),f=(a("TxnS"),a("RTCd")),g=a.n(f),b=(a("q4I+"),a("MQK9")),_=a.n(b),y=(a("nlrN"),a("LHQR")),w=a.n(y),C=(a("F3XJ"),a("VkAN")),I=a.n(C),S=(a("Upza"),a("vO66")),k=a.n(S),x=(a("mtHx"),a("Qxaw")),D=a.n(x),A=(a("V4pV"),a("pBHa")),N=a.n(A),L=(a("Zf6I"),a("/NQH")),T=a.n(L),j=(a("CCiF"),a("OPYP")),F=a.n(j),P=(a("OLlm"),a("qxDZ")),M=a.n(P),E=(a("dV8Z"),a("I24j")),O=a.n(E),$=(a("Qin7"),a("hKH+")),R=a.n($),B=(a("KWOm"),a("8jPk")),G=a.n(B),q=(a("H7eU"),a("tXyk")),U=a.n(q),Q=(a("XRqg"),a("hTjZ")),H=a.n(Q),V=(a("BNCU"),a("hn28")),Y=a.n(V),J=(a("1ItJ"),a("UB60")),K=a.n(J),z=(a("95lS"),a("mIxA")),Z=a.n(z),X=(a("bW5w"),a("vdSV")),W=a.n(X),ee=a("ZLEe"),te=a.n(ee),ae=(a("B7YX"),a("ybiQ")),se=a.n(ae),ie=(a("Pa9X"),a("smCo")),ne=a.n(ie),oe=a("IvJb"),le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar"},[a("nav",[e._m(0),e._v(" "),a("ul",[a("li",[e._m(1),e._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:{name:"AppList"}}},[e._v("商家应用管理")])],1)])]),e._v(" "),a("li",[e._m(2),e._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:{name:"ShopList"}}},[e._v("商家列表")])],1),e._v(" "),e.pData.gy?a("li",[a("router-link",{attrs:{to:{name:"Menu"}}},[e._v("菜单管理")])],1):e._e(),e._v(" "),e.pData.gy?a("li",[a("router-link",{attrs:{to:{name:"Role"}}},[e._v("角色管理")])],1):e._e(),e._v(" "),e.pData.gy?a("li",[a("router-link",{attrs:{to:{name:"Business"}}},[e._v("业态管理")])],1):e._e(),e._v(" "),e.pData.gy?a("li",[a("router-link",{attrs:{to:{name:"MemberLevel"}}},[e._v("等级管理")])],1):e._e(),e._v(" "),e.pData.gy?a("li",[a("router-link",{attrs:{to:{name:"Address"}}},[e._v("地点管理")])],1):e._e(),e._v(" "),e.pData.gy?a("li",[a("router-link",{attrs:{to:{name:"AuthVersionList"}}},[e._v("权限版本管理")])],1):e._e()])]),e._v(" "),a("li",[e._m(3),e._v(" "),a("ul",[a("li",[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{name:"CloudList"}}},[e._v("编播管理")])],1),e._v(" "),a("li",[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{name:"MaterialManageList"}}},[e._v("素材管理")])],1),e._v(" "),a("li",[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{name:"PlayPlanList"}}},[e._v("播放计划")])],1),e._v(" "),a("li",[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{name:"ScreenManage"}}},[e._v("屏管理")])],1),e._v(" "),a("li",[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{name:"BaseLabelConfig"}}},[e._v("基础标签配置")])],1)])]),e._v(" "),a("li",[e._m(4),e._v(" "),a("ul",[a("li",[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{name:"EquipMent"}}},[e._v("设备管理")])],1)])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"logoArea"},[t("img",{staticClass:"logo",attrs:{src:a("dLd/")}}),this._v("脸脸")])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("i",{staticClass:"fa fa-diamond"}),this._v("应用管理")])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("i",{staticClass:"fa fa-vcard-o"}),this._v("商家管理")])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("i",{staticClass:"fa fa-play-circle"}),this._v("云播管理")])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("i",{staticClass:"fa fa-desktop"}),this._v("设备管理")])}]};var re={name:"Main",data:function(){return{pData:{gy:this.$route.query.gy}}},components:{sidebar:a("vSla")({name:"Sidebar",data:function(){return{num:"",pData:{gy:(this.$route.query.gy,!0)}}},methods:{}},le,!1,function(e){a("3Gra")},null,null).exports},created:function(){if(PF.Get("gy"))return!1},mounted:function(){document.querySelector(".controlNav").onclick=function(){"none"===document.querySelector(".logoArea").parentNode.style.display?(document.querySelector(".logoArea").parentNode.style.display="block",document.body.removeAttribute("style"),document.querySelector(".con").removeAttribute("style")):(document.querySelector(".logoArea").parentNode.style.display="none",document.body.style.background="#f5f5f5",document.querySelector(".con").style.marginLeft="20px")},window.onscroll=function(){document.getElementsByTagName("nav")[0].style.marginTop=document.documentElement.scrollTop+"px"}}},ce={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",{attrs:{id:"Main"}},[t("sidebar"),this._v(" "),t("div",[this._m(0),this._v(" "),t("router-view")],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("a",{staticClass:"controlNav"},[t("i",{staticClass:"fa fa-bars"})])])}]};var de=a("vSla")(re,ce,!1,function(e){a("pGh7")},null,null).exports,ue=a("aozt"),pe=a.n(ue),he=a("YaEn");function me(e){return 0==e?"优惠券":1==e?"代金券":2==e?"折扣券":3==e?"兑换券":4==e?"买N送N券":5==e?"满就送券":6==e?"第二个半价券":void 0}function ve(e){return 0==e||""==e?"[未发放]":"[已发放]"}function fe(e){return 0==e?"[未过期]":1==e?"[已过期]":void 0}oe.default.config.productionTip=!1,oe.default.prototype.axios=pe.a,oe.default.prototype.$message=ne.a,oe.default.prototype.$confirm=se.a.confirm,oe.default.prototype.$alert=se.a.alert,oe.default.prototype.$msgbox=se.a,te()(s).forEach(function(e){oe.default.filter(e,s[e])}),oe.default.component(ne.a),oe.default.component(se.a),oe.default.use(W.a),oe.default.use(Z.a),oe.default.use(K.a),oe.default.use(Y.a),oe.default.use(H.a),oe.default.use(U.a),oe.default.use(G.a),oe.default.use(R.a),oe.default.use(O.a),oe.default.use(M.a),oe.default.use(F.a),oe.default.use(T.a),oe.default.use(N.a),oe.default.use(D.a),oe.default.use(k.a),oe.default.use(I.a),oe.default.use(w.a),oe.default.use(_.a),oe.default.use(g.a),oe.default.use(v.a),oe.default.use(h.a),oe.default.use(u.a),oe.default.use(c.a),oe.default.use(l.a),oe.default.use(n.a),new oe.default({el:"#App",router:he.a,components:{App:de},template:"<App/>"})},O73I:function(e,t,a){"use strict";var s={name:"PlayPlanModify",data:function(){return{title:"播放计划修改记录",planName:"计划名称",tableData:[{modifier:"IDO品牌宣传广告",modifierTime:"张三（135 2156 1353）",modifierContent:"1. 时间：修改前“2018.7.17 13:00-14:00”,修改后“2018.7.17 13:30-14:00”"}]}},components:{record:a("bGMF").a}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"PlanModify"},[t("section",{staticClass:"con"},[t("record",{attrs:{title:this.title,tableData:this.tableData,planName:this.planName}})],1)])},staticRenderFns:[]},n=a("vSla")(s,i,!1,null,null,null);t.a=n.exports},OLlm:function(e,t){},P9l9:function(e,t,a){"use strict";t.o=function(e){return Object(s.a)({url:"/api/location/provinces",method:"get",data:e})},t.k=function(e){return Object(s.a)({url:"/api/location/citys",method:"get",data:e})},t.i=function(e){return Object(s.a)({url:"/api/permission/businessType/list",method:"get",data:e})},t.a=function(e){return Object(s.a)({url:"/api/shopType/findAllShopType",method:"get",data:e})},t.n=function(e){return Object(s.a)({url:"/api/member/findAllMemberLevel",method:"get",data:e})},t.b=function(e){return Object(s.a)({url:"/api/game/findList",method:"get",data:e})},t.y=function(e){return Object(s.a)({url:"/api/permission/memberShop/list",method:"get",data:e})},t.t=function(e){return Object(s.a)({url:"/api/permission/memberShop/shopList",method:"get",data:e})},t.x=function(e){return Object(s.a)({url:"/api/permission/memberShop/load",method:"get",data:e})},t.s=function(e){return Object(s.a)({url:"/api/permission/memberShop/activate",method:"get",data:e})},t.w=function(e){return Object(s.a)({url:"/api/permission/memberShop/update",method:"get",data:e})},t.f=function(e){return Object(s.a)({url:"/api/shop/permission/queryByType",method:"get",data:e})},t.r=function(e){return Object(s.a)({url:"/api/staff/role/findAllRoles",method:"get",data:e})},t.l=function(e){return Object(s.a)({url:"/api/staff/role/createRole",method:"post",data:e})},t.m=function(e){return Object(s.a)({url:"/api/permission/custom/findNavByShop",method:"get",data:e})},t.v=function(e){return Object(s.a)({url:"/api/permission/custom/update",method:"post",data:e})},t.u=function(e){return Object(s.a)({url:"/api/shop/permission/findNavByKind",method:"get",data:e})},t.z=function(e){return Object(s.a)({url:"/api/shop/permission/saveShopPermission",method:"post",data:e})},t.A=function(e){return Object(s.a)({url:"/api/shop/permission/updateShopPermission",method:"post",data:e})},t.h=function(e){return Object(s.a)({url:"/api/permission/version/list",method:"get",data:e})},t.p=function(e){return Object(s.a)({url:"/api/permission/version/publish",method:"get",data:e})},t.q=function(e){return Object(s.a)({url:"/api/permission/version/reset",method:"get",data:e})},t.j=function(e){return Object(s.a)({url:"/api/shop/permission/findShopNav",method:"get",data:e})},t.g=function(e){return Object(s.a)({url:"/api/shop/permission/update",method:"post",data:e})},t.d=function(e){return Object(s.a)({url:"/api/shop/permission/delete",method:"get",data:e})},t.c=function(e){return Object(s.a)({url:"/api/shop/permission/create",method:"post",data:e})},t.e=function(e){return Object(s.a)({url:"/api/shop/permission/detail",method:"get",data:e})};var s=a("AVkl")},Pa9X:function(e,t){},QHIq:function(e,t){},Qin7:function(e,t){},RUED:function(e,t){},Rgvj:function(e,t,a){"use strict";var s=a("5YEj"),i={name:"Data",data:function(){return{eachrtsList:[],timeData:["08-01","08-02","08-03","08-04","08-05","08-06","08-07"],allNum:[120,181,501,234,290,430,240],hasNum:[10,131,101,134,90,230,210],lianNum:[1110,50,401,100,200,200,30]}},mounted:function(){this.charts()},methods:{charts:function(){var e=this;this.eachrtsList=[{totalTit:"总数",total:432,newAddTit:"上周新增",newAdd:123,data:[134,10,52,200,47,67,45,34]},{totalTit:"脸脸所有",total:432,newAddTit:"上周新增",newAdd:123,data:[820,932,901,934,1290,1330,1320]},{totalTit:"脸脸运营",total:432,newAddTit:"上周新增",newAdd:123,data0:[120,132,101,134,90,230,210],data1:[20,182,191,234,290,330,310]}],this.$nextTick(function(){e.myChart1=s.init(document.getElementById("allData0")),e.myChart2=s.init(document.getElementById("allData1")),e.myChart3=s.init(document.getElementById("allData2")),e.myChart4=s.init(document.getElementById("allData3"));for(var t=e,a=[],i=[],n=0;n<2;n++){var o={type:"line",smooth:!0,symbolSize:5,name:"",itemStyle:{normal:{color:""}}};0===n?(o.name="总量屏",o.itemStyle.normal.color="#5B13AC",o.data=e.eachrtsList[2].data0):(o.name="脸脸屏",o.itemStyle.normal.color="#1B8AB6",o.data=e.eachrtsList[2].data1),a.push(o)}for(var l=0;l<3;l++){var r={type:"line",smooth:!0,symbolSize:5,name:"",itemStyle:{normal:{backgroundColor:""}},areaStyle:{normal:{}}};0===l?(r.name="总屏数",r.data=[120,150,200,250,300,330,400]):1===l?(r.name="脸脸所有",r.data=[70,80,90,130,160,180,210]):(r.name="脸脸运营数",r.data=[50,70,110,120,140,150,190]),i.push(r)}e.option1={color:["#21FFFF"],tooltip:{trigger:"axis"},grid:{left:"0%",right:"1%",bottom:"5%",height:"100px",containLabel:!0},xAxis:{type:"category",data:t.eachrtsList[0].data,show:!1},yAxis:[{show:!1,axisLine:{show:!1},type:"value"}],series:[{name:"上周新增",type:"bar",barWidth:"5%",data:t.eachrtsList[0].data,smooth:!0,symbolSize:5}]},e.option2={tooltip:{trigger:"axis"},xAxis:{type:"category",data:t.eachrtsList[1].data,show:!1},yAxis:{show:!1,axisLine:{show:!1},type:"value"},series:[{name:"上周新增",type:"line",smooth:!0,symbolSize:5,data:t.eachrtsList[1].data,itemStyle:{normal:{color:"#5B13AC"}}}]},e.option3={tooltip:{trigger:"axis"},xAxis:{type:"category",data:t.eachrtsList[2].data0,show:!1},yAxis:{type:"value",show:!1,axisLine:{show:!1}},series:a},e.option4={color:["#492B98","#1B8AB6","#273FA5"],title:{text:"屏幕趋势（台）"},tooltip:{trigger:"axis"},legend:{data:["总屏数","脸脸所有","脸脸运营数"],x:"center",y:"bottom"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"],show:!1}],yAxis:[{type:"value"}],series:i},e.myChart1.setOption(e.option1),e.myChart2.setOption(e.option2),e.myChart3.setOption(e.option3),e.myChart4.setOption(e.option4)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box boxData"},e._l(e.eachrtsList,function(t,s){return a("div",{staticClass:"boxList"},[a("div",{staticClass:"boxListHead"},[a("div",{staticClass:"boxHeadLeft"},[a("span",[e._v("123")]),e._v(" "),a("div",{staticClass:"boxLeft"},[a("h3",{staticClass:"boxLeftTit"},[e._v(e._s(t.totalTit))]),e._v(" "),a("h4",{staticStyle:{color:"#9394B5"}},[e._v(e._s(t.newAddTit))])])]),e._v(" "),a("div",{staticClass:"boxHeadRight"},[a("h1",{staticClass:"boxLeftTit"},[e._v(e._s(t.total))]),e._v(" "),a("h3",[e._v(e._s(t.newAdd))])])]),e._v(" "),a("div",{staticClass:"allData",attrs:{id:"allData"+s}})])})),e._v(" "),e._m(1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("数据")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"box box1"},[t("div",{staticClass:"ecahrtData",attrs:{id:"allData3"}})])}]};var o=a("vSla")(i,n,!1,function(e){a("3kyz")},null,null);t.a=o.exports},TxnS:function(e,t){},Upza:function(e,t){},V4pV:function(e,t){},W5aE:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"AppList",data:function(){return{pData:{shopId:this.$route.query.shopId},data:{},edit:{},error:{businessTypeIdError:"",memberLevelIdError:""}}},components:{page:s.a},mounted:function(){var e=this;i.n().then(function(t){e.data.memberLevel=t.data.object}),e.Initial()},methods:{ClearError:function(){this.error={businessTypeIdError:"",memberLevelIdError:""}},Initial:function(){var e=this;i.x({shopId:e.pData.shopId}).then(function(t){if(0==(t=PF.JsonFormat(t.data)).status){var a=e.data;e.data=t.object,e.edit=t.object,e.$set(e.data,"memberLevel",a.memberLevel)}else n({title:"商家详情服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){console.log(e),n("商家详情请求服务器失败","","error")})},Submit:function(){var e=this;if(e.ClearError(),""===e.edit.memberLevelId)return e.error.memberLevelIdError="请选择商家类型",PF.GoTo("MemberLevelId");i.w({shopId:e.pData.shopId,businessTypeId:e.edit.businessTypeId,memberLevelId:e.edit.memberLevelId}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.$router.push({path:"/shop"}):n({title:"保存失败服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("保存失败请求服务器失败","","error")})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("form",[a("h2",{staticClass:"title1"},[e._v("商家基本信息")]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("商家ID：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.shopId))])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("商家名称：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.shopName))])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("地点属性：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.shopTypeName))])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("经营类目：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v("\n            "+e._s(e.data.category1Name)+"\n            "+e._s(e.data.category2Name?"/"+e.data.category2Name:"")+"\n            "+e._s(e.data.category3Name?"/"+e.data.category3Name:"")+"\n          ")])]),e._v(" "),a("div",{staticClass:"form-group mb25"},[a("label",{staticClass:"w100"},[e._v("地址：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.address))])]),e._v(" "),a("h2",{staticClass:"title1"},[e._v("商家账户信息")]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("业态：")]),e._v(" "),a("span",[a("em",{staticClass:"word l normal mt4 mr25"},[e._v(e._s(e.data.businessTypeName))])])]),e._v(" "),a("div",{staticClass:"form-group mb40"},[a("label",{staticClass:"w100",attrs:{id:"MemberLevelId"}},[e._v("等级：")]),e._v(" "),a("span",[e._l(e.data.memberLevel,function(t){return a("label",{key:t.$index},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.memberLevelId,expression:"edit.memberLevelId"}],attrs:{type:"radio",name:"radio2"},domProps:{value:t.sid,checked:e._q(e.edit.memberLevelId,t.sid)},on:{change:function(a){e.$set(e.edit,"memberLevelId",t.sid)}}}),e._v(" "),a("em",{staticClass:"word l normal mr25 ml-10"},[e._v(e._s(t.name))])])}),e._v(" "),a("em",{staticClass:"notice mt6"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.memberLevelIdError,expression:"error.memberLevelIdError"}]},[e._v("* "+e._s(e.error.memberLevelIdError))])])],2)]),e._v(" "),a("div",{staticClass:"form-group"},[a("span",{staticClass:"ml115"}),e._v(" "),a("button",{staticClass:"btn mw100",attrs:{type:"button"},on:{click:e.Submit}},[e._v("保存")])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("figure",[a("figcaption",[e._v("编辑商家")]),e._v(" "),a("div",{staticClass:"crumbs"},[a("span",[e._v("商家管理")]),e._v(" "),a("a",{attrs:{href:"/shop"}},[e._v("商家列表")]),e._v(" "),a("a",[e._v("编辑商家")])]),e._v(" "),a("a",{staticClass:"btn5  btn5-change",attrs:{href:"/shop"}},[a("i",{staticClass:"fa fa-reply"}),e._v(" 返回")])])}]},r=a("vSla")(o,l,!1,null,null,null);t.a=r.exports},XRqg:function(e,t){},XZGR:function(e,t,a){"use strict";t.k=function(e){return Object(s.a)({url:"/steyr/api/device/findList",method:"get",data:e})},t.z=function(e){return Object(s.a)({url:"/steyr/api/screen/findList",method:"get",data:e})},t.d=function(e){return Object(s.a)({url:"/steyr/api/device/loadInfo",method:"get",data:e})},t.q=function(e){return Object(s.a)({url:"/steyr/api/device/loadInfoByNumber",method:"get",data:e})},t.E=function(e){return Object(s.a)({url:"/steyr/api/shop/loadName",method:"get",data:e})},t.e=function(e){return Object(s.a)({url:"/steyr/api/device/save",method:"post",data:e})},t.B=function(e){return Object(s.a)({url:"/steyr/api/screen/save",method:"post",data:e})},t.g=function(e){return Object(s.a)({url:"/steyr/api/screen/loadInfo",method:"get",data:e})},t.A=function(e){return Object(s.a)({url:"/steyr/api/device/screen/loadInfo",method:"get",data:e})},t.I=function(e){return Object(s.a)({url:"/fussen/api/upload/token",method:"get",data:e})},t.w=function(e){return Object(s.a)({url:"/fussen/api/material/saveMaterial",method:"post",data:e})},t.u=function(e){return Object(s.a)({url:"/fussen/api/material/saveCircleMaterial",method:"post",data:e})},t.l=function(e){return Object(s.a)({url:"/fussen/api/material/findMaterials",method:"get",data:e})},t.r=function(e){return Object(s.a)({url:"/fussen/api/material/loadMaterial",method:"get",data:e})},t.x=function(e){return Object(s.a)({url:"/fussen/api/material/tag/saveTag",method:"post",data:e})},t.p=function(e){return Object(s.a)({url:"/fussen/api/material/tag/findTags",method:"get",data:e})},t.v=function(e){return Object(s.a)({url:"/fussen/api/tag/saveGroup",method:"post",data:e})},t.j=function(e){return Object(s.a)({url:"/fussen/api/tag/findGroupList",method:"get",data:e})},t.s=function(e){return Object(s.a)({url:"/fussen/api/tag/loadTagGroup",method:"get",data:e})},t.f=function(e){return Object(s.a)({url:"/fussen/api/tag/disableGroup",method:"post",data:e})},t.h=function(e){return Object(s.a)({url:"/fussen/api/tag/enableGroup",method:"post",data:e})},t.F=function(e){return Object(s.a)({url:"/fussen/api/tag/saveTag",method:"post",data:e})},t.C=function(e){return Object(s.a)({url:"/fussen/api/screen/save",method:"post",data:e})},t.y=function(e){return Object(s.a)({url:"/fussen/api/screen/findPage",method:"get",data:e})},t.m=function(e){return Object(s.a)({url:"/fussen/api/screen/findPageUnuse",method:"get",data:e})},t.D=function(e){return Object(s.a)({url:"/fussen/api/shop/findList",method:"get",data:e})},t.H=function(e){return Object(s.a)({url:"/fussen/api/shop/updateWallah",method:"post",data:e})},t.a=function(e){return Object(s.a)({url:"/fussen/api/plan/savePlan",method:"post",data:e})},t.t=function(e){return Object(s.a)({url:"/fussen/api/plan/findList",method:"get",data:e})},t.n=function(e){return Object(s.a)({url:"/fussen/api/plan/findScreenList",method:"get",data:e})},t.o=function(e){return Object(s.a)({url:"/fussen/api/plan/findShopList",method:"get",data:e})},t.G=function(e){return Object(s.a)({url:"/fussen/api/plan/updatePlan",method:"post",data:e})},t.b=function(e){return Object(s.a)({url:"/fussen/api/plan/delPlan",method:"post",data:e})},t.c=function(e){return Object(s.a)({url:"/fussen/api/plan/delPlanByMaterial",method:"post",data:e})},t.i=function(e){return Object(s.a)({url:"/steyr/api/screen/exchange",method:"post",data:e})};var s=a("AVkl")},YaEn:function(e,t,a){"use strict";(function(e){var s=a("IvJb"),i=a("zO6J"),n=a("9xaq"),o=(a("CKXZ"),a("0+jS"),a("utd2")),l=a("C2r9"),r=a("x9S0"),c=a("W5aE"),d=a("sd8k"),u=a("dRhn"),p=a("93n0"),h=a("/BUs"),m=a("mxCl"),v=a("iX4B"),f=a("bIT2"),g=a("Kfb9"),b=a("oIyP"),_=a("sLxB"),y=a("7rTu"),w=a("2YM8"),C=a("ghTz"),I=a("I7tS"),S=a("O73I"),k=a("H77w"),x=a("iOpU"),D=a("dBRM"),A=a("kGl/"),N=a("Rgvj"),L=a("BERp"),T=a("5axn"),j=a("jcXq"),F=a("2++a");s.default.use(i.a),t.a=new i.a({mode:"history",base:e,linkActiveClass:"active",scrollBehavior:function(e,t,a){if(e.hash)return{selector:e.hash}},routes:[{path:"/",redirect:"/shop"},{path:"/shop",component:n.a,children:[{path:"/",name:"ShopList",component:o.a},{path:"shopActiveList",name:"ShopActiveList",component:l.a},{path:"shopActive",name:"ShopActive",component:r.a},{path:"shopEdit",name:"ShopEdit",component:c.a}]},{path:"/menu",name:"Menu",component:g.a},{path:"/role",name:"Role",component:d.a},{path:"/business",name:"Business",component:u.a},{path:"/memberLevel",name:"MemberLevel",component:p.a},{path:"/address",name:"Address",component:h.a},{path:"/authVersionList",component:n.a,children:[{path:"/",name:"AuthVersionList",component:m.a},{path:"useShopList",name:"UseShopList",component:v.a},{path:"checkAuth",name:"CheckAuth",component:f.a}]},{path:"/screenManage",name:"ScreenManage",component:b.a},{path:"/cloud",component:n.a,children:[{path:"/",name:"CloudList",component:_.a},{path:"cloudSeedDetail",name:"CloudSeedDetail",component:y.a},{path:"cloudSeedPlan",name:"CloudSeedPlan",component:w.a},{path:"cloudPlanModify",name:"CloudPlanModify",component:C.a}]},{path:"/materialManage",component:n.a,children:[{path:"/",name:"MaterialManageList",component:k.a},{path:"materialModify",name:"MaterialModify",component:x.a}]},{path:"/playPlan",component:n.a,children:[{path:"/",name:"PlayPlanList",component:I.a},{path:"playPlanModify",name:"PlayPlanModify",component:S.a}]},{path:"/data",name:"Data",component:N.a},{path:"/baseLabel",component:n.a,children:[{path:"/",name:"BaseLabelConfig",component:D.a},{path:"baseLabelList",name:"BaseLabelList",component:A.a}]},{path:"/test",name:"Test",component:L.a},{path:"/test1",name:"Test1",component:T.a},{path:"/test3",name:"Test3",component:j.a},{path:"/equipMent",name:"EquipMent",component:F.a}]})}).call(t,"/")},Zf6I:function(e,t){},bGMF:function(e,t,a){"use strict";var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"record"},[a("figure",[a("div",{staticClass:"crumbs"},[a("span",[e._v(e._s(e.title))])])]),e._v(" "),a("div",{staticClass:"box"},[a("h3",{staticClass:"head"},[a("span",[e._v("【"+e._s(e.planName)+"】")]),e._v("修改记录")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],attrs:{data:e.tableData,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",prop:"modifier",label:"修改人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"modifierTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"modifierContent",label:"修改内容"}})],1)],1)])},staticRenderFns:[]};var i=a("vSla")({name:"Record",props:["title","tableData","planName"],data:function(){return{load_data:!1}},mounted:function(){},methods:{}},s,!1,function(e){a("/y7I")},null,null);t.a=i.exports},bIT2:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"UseShopList",data:function(){return{pData:{versionId:this.$route.query.versionId,versionNo:this.$route.query.versionNo,checked1:[],checked2:[],activeTab:"firstTab"},search:{pageNo:1,pageRow:20,businessTypeId:2,shopTypeId:0,memberLevelId:0,roleIdList:""},data:{businessType:null,shopType:null,memberLevel:null,role:null},defaultProps:{label:"name",children:"childs"},dataList1:[],dataList2:[]}},components:{page:s.a},mounted:function(){var e=this;i.i().then(function(t){e.data.businessType=t.data.object}),i.a().then(function(t){e.data.shopType=t.data.object}),i.n().then(function(t){e.data.memberLevel=t.data.object}),i.r().then(function(t){e.data.role=t.data.object}),e.Initial()},methods:{Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,this.search.businessTypeId=2,this.search.shopTypeId=0,this.search.memberLevelId=0,this.search.roleIdList="",this.Initial()},Initial:function(){var e=this;e.dataList1=[],e.dataList2=[],e.pData.checked1=[],e.pData.checked2=[],i.u({kind:0}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.CheckAuth(t.object,"手机端",0):n({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家所有权限列表请求服务器失败","","error")}),i.u({kind:1}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.CheckAuth(t.object,"PC端",1):n({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家所有权限列表请求服务器失败","","error")})},CheckAuth:function(e,t,a){var s=this;i.j({versionId:s.pData.versionId,businessTypeId:s.search.businessTypeId,shopTypeId:s.search.shopTypeId,memberLevelId:s.search.memberLevelId,roleIdList:s.search.roleIdList,clientType:a}).then(function(a){if(0==(a=PF.JsonFormat(a.data)).status){if(a.object&&0!=a.object.length)for(var i=0;i<a.object.length;i++)s.Arr(a.object[i],t);"手机端"==t?s.dataList1=e:"PC端"==t&&(s.dataList2=e)}else n({title:"权限树服务器返回错误",text:a.errorMsg,type:"error"})}).catch(function(e){n("权限树请求服务器失败","","error")})},Arr:function(e,t){for(var a=0;a<e.childs.length;a++)""!=e.childs[a].childs?this.Arr(e.childs[a],t):"手机端"==t?this.pData.checked1.push(e.childs[a].sid):"PC端"==t&&this.pData.checked2.push(e.childs[a].sid)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[a("figure",[a("figcaption",[e._v("版本："+e._s(e.pData.versionNo)+" 查看权限")]),e._v(" "),a("div",{staticClass:"crumbs"},[a("span",[e._v("商家管理")]),e._v(" "),a("a",{attrs:{href:"/authVersionList"}},[e._v("权限版本管理")]),e._v(" "),a("a",[e._v("版本："+e._s(e.pData.versionNo)+" 查看权限")])]),e._v(" "),e._m(0)]),e._v(" "),a("div",{staticClass:"box"},[a("form",[a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("业态：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.businessTypeId,expression:"search.businessTypeId"}],staticClass:"w140",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"businessTypeId",t.target.multiple?a:a[0])}}},e._l(e.data.businessType,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])}))]),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("等级：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.memberLevelId,expression:"search.memberLevelId"}],staticClass:"w140",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"memberLevelId",t.target.multiple?a:a[0])}}},e._l(e.data.memberLevel,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])}))]),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("地点：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.shopTypeId,expression:"search.shopTypeId"}],staticClass:"w140",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"shopTypeId",t.target.multiple?a:a[0])}}},e._l(e.data.shopType,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])}))]),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("角色：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.roleIdList,expression:"search.roleIdList"}],staticClass:"w140",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"roleIdList",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("超级管理员")]),e._v(" "),e._l(e.data.role,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn l w85 mr15",attrs:{type:"button"},on:{click:e.Search}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")]),e._v(" "),a("button",{staticClass:"btn2 l w85",attrs:{type:"button"},on:{click:e.Reset}},[e._v("重置")])])])]),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"scrollY h520"},[a("div",{staticClass:"w45p l ml5p"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}})],1),e._v(" "),a("div",{staticClass:"relative"},[a("div",{staticClass:"absolute w100p h100p zIndex99"}),e._v(" "),a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.dataList1,"default-checked-keys":e.pData.checked1,props:e.defaultProps}})],1)],1),e._v(" "),a("div",{staticClass:"w45p l ml5p"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"PC权限",name:"firstTab"}})],1),e._v(" "),a("div",{staticClass:"relative"},[a("div",{staticClass:"absolute w100p h100p zIndex99"}),e._v(" "),a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.dataList2,"default-checked-keys":e.pData.checked2,props:e.defaultProps}})],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"btn5  btn5-change",attrs:{href:"/authVersionList"}},[t("i",{staticClass:"fa fa-reply"}),this._v(" 返回")])}]},r=a("vSla")(o,l,!1,null,null,null);t.a=r.exports},bW5w:function(e,t){},badV:function(e,t){},"bn/Z":function(e,t){e.exports="data:image/gif;base64,R0lGODlhKAAoAPePAPb29v39/X9+gu3t7n9/g+3u7/b3+Nvb3eTk5fv7++3u7oB/g+/w8Pj5+e7v8PLz9IaFiX9+g+7u76OjpvP09bq6vJybnvf3+KurrsLCxKuqrfj4+Jycn4aGisrKzPn5+f7+/qOjpfDx8tPT1Y2MkPP09O7v79vc3e/w8cLCxcrKzfHx8vT09PX19fDx8ff4+LKytYeGivX29vX19vr6+5SUmPHy8oaFitHQ0u3t7d3d3ri4uvT09aysr9HR0snJy8PCxfv8/I6NkauqrvPz9P7+//n6+vDw8bKztaSjpo2NkcnJyvLz88XFx+jo6O/v8JSTmNPT1Pj4+Zybn62usI2MkZWUmN/f4PT19bq6vbOztayrrujo6fz8/IGAhPr7+/Dw8JSTl4GBhZ2cn5SUl8nIyq2tsMPDxZ6docLDxaOipfLy8tPS1IKBhp6eoeXk5bKytP/+/8vKzfPz88XExrOytYKBhfn5+srLzfr6+srLzLu6vMvLzcXEx/j5+vX298rJy/Hy8/Hx8a6usIKChqOipoGAhdPS1bu6veDf4Pb294OChq2sr+zt7v///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgCPACwAAAAAKAAoAAAI/wAfORpIsKDBgU7EiHFysGHBRwIdOkKAw+AVhVcMlkEg0RFEiVzC1BhR8KKYjANBZBAggKPDjw5XhAmjpiTGgiwFRJEI0yEVkSQHmkTpaA/LGB17NkQws6bQmwPDsEyTNCJCIgZ/hnE5dCCfowa7fHhoFYeaJC4HMg1D5enJqCwzFLzAxckcgj3TFCqkpiJBrY0cAdCg4YKjETkLznHC+Aleqx/6uCnkJsMGtWxfHARAQkCFgQGeMHbyJMBjgyMmq0EyoONAGQAG0sgx+i7Zg1w0TE7i2mBdJ1wMG1RK8AGSQkh6F6Sdg0ZD4gQ/jKCgnGAXHqafP8qw48eBwNWVf//gAYZLDogw0sOBA6PJiBnhw84ZMHo0RBxZ0uuHcyB+wSP1AcfFETDN4MQIGaSng38E8cBYDmsA0MVA0DkCHoMDfZDdbRgyCF0CYHSYoXYD0aUDH2ekkZZ/DjoB4QUTevTIAXqkYaONGfSH4WL1cTEgRDfe6EMimmHYxRr0BQgRH3yMgECIIh70wRxPmFehI100cll41204nFUFAXCADzpWx1yMXx4kyAg++BBUdb9xMVaaBMXRSJtkKhLfbKPxQCeWFLV5RYw8nPCGl6DRN2doox2xYU9X4MlFQQiccIIUjoRWmiM0MNYaQTw6ccRpA3HhpiAFKWLpGxkyNmeSc5ZpWJdtMhZERKwDvWGpno584GqrTnxqnXAUgnmQqoZG92updeF60JW5WrqGsk7ECoCnVUkkhaWJFORrtQX56ASazxpb0LYnTEstrtc64dxL5p6r7roG8eDsn9V16q5/EPXr778ABywwwAEBACH5BAUKAI8ALAEAAAAjACYAAAj/AB8JHEiwoEAuYcI0Msiw4UAnIwoiSIjA4BWHDBupUXOC4MQwFQU6wiFGjBOMBYls7OGRIsEwBMQ8QUmwyI6NHQV+DPnIBwEvamgWdOKmEEudLgfGvIix0YyCN9WcfLRT4JWfQQnmOEDwAJwdUwU62bgDKUiBaryIYSrQhwABgwbigAEDDleBNjcOeHRhh5YNj5yIAUpQw1sBFgYamUv3Rx6xbrI0MHghLVMAFg4LcFFQB10YGTijdORIp2YMDRvtoFtWqEDNVF445JEBtOtHRg7fxZhHx9PbObTkCECQT5kRicDcvp2muXMfOi4sx3hAj3PniaajvJBDB58zaXhqlqepfLz58wy7EEHP8IOENwd8+GgUh73ARPHly8chHr0PHDjopwMXH9gn0AEHXNHIegYWBAIIBQVwRAINFpQAAif0Z6AiV5xwAlsGOnKEhxlKUWEAXJDoBHGPfODEXug5QSKMAg3ghBM0oDfAhzwQ5OKL9ilCIUE2OlFghQL9yAWSAxUJAJOPdHHjklDScOOTULbYI3oBAQAh+QQFCgCPACwBAAAAJgAhAAAI/wAfCRxIsKDARmrUDDDIsKHBRjoKOknopCAOBA4zuoABB+NALm7UVBw4IkyYRhkbzoABAxFBJ4UKjRSoxqSIlAwdNeHo8RFMNzNLhqGCs2EjOC0HTizEZWDNMD1TgrlQcCcclI9AihSIwCRRgk+uMEyUpkkOgkdhNBEIU6ZAKiajjiBBIAOIggfS6E00UCdLF49eZEDUIKtXghnEiCEAx2CCAxn0juhyEE6TPAY3wPV4QYMXxYNeNESg9wwfFkUHvrGgWEwZqU30rk39KMbiGFcc4ZTCxzRtEBa8WGBAOwECqrQdlDGg2+CBEVe4EKGNEwRkCwRi+NjOXcebD9QJ5pbYEUaA+fOJDnDn3jS8QCvn47t5BGKDoDfqfTSK4/5RhvNKIHFACZQZNF1/j3ygBwIb3IXggwYFoAiEGSWwRiMIHHDCEc1R+FEiJ4QoYnseDiSiiG8MkECJBCGQiBNHTMhiTh0OxEOBMxbURQ5OnJUjQR9w4YQTJP7Iw5A90vCjQEcg+cSSTCI5B5QCzUEkclQmiOOPAQEAIfkEBQoAjwAsAQAAACYAIQAACP8AHwkcSLCgQBcwYLgwyLChQTAICjaCA6NRwRFcHGpkkSZNxoGNYMCxOPCEGjUDNDa80FEPwYkVCZo5+UBlQx8dPz4KObKkm0I7bDYE0xIkRZKPzBQq5EToIyIfCuJMA0YgT5JO1AAtuCKiQS4+RggiSDSND6tHBe4o5EbnIx0WwvxwRLAIAh943U5l8SiPBw95HhX4mYXgjzBhyCAy2AUBDrxXBhL1kcDghyxMBW7QUgNxlgYM4zTC6+OAIqFFBHLRgDgMDpVERuAd4VRg3DAWvKr8cKB0bUdJaiQRUbtLo8q1G/h40RDBFScDTtdW6UjHIw0xLJzYzv1No8DTBz6deaTGixgCYrwQ4JKIO/eU4R+ByCCmvn0hcB45SsCjEYIDJxxBV3xl1GfBDiMIOGBB0sWn3xWOROjghA45EhWFBzjUxQVr5OCEEzxMmIEAAhBghg85CLQCFx+26MQcE4ZA4owlJuHihwOs0cWEOYTgBY0k5sDFE3NcSOFAL+TQhBokeqFRANNBWRAIj3xg5JFYZqnlllx26eWXWV4ZEAAh+QQFCgCPACwBAAAAJgAmAAAI/wAfCRxIsKBAFmnSsDDIsKFBIo3iEASTEExBHY0calTkw4eEiRUHgkAAA4YLjQ0/dDwAYiDFNBYHIkICYwbKhjpw4Pgo8GXMkSWb3GxIZGXLRz5l0sw4VFGCizqJ9Az5qFHQgkScMBxw4goPgkV96JgKU2CTkkwFIkhSCEdBR1xOyB1AUEdHRY+6jBjx1MXVgTgKFVLTx2CAuHKdBBBYVEcXg3nOMv2AaLAboQwdHZF7AoGUoY4ENkIyuNAIlIquyL0ydKAGN4UmcBmaAEHn1o+KkEZCAXeAI7gZjzDSMAeXJzw+BL+J4IcWCxqcSJ8+YM7j5QJXpKASprv3FVymT54Hjt3RD+/e1WQR2AXAmhzSv2J/hKO7hgwnRBRhGED5fLX/BSjgTVdcMOBNZYghhgU74ODAgQaBAIcYBCiooBBwQEjQExm4YaGFGr7lyBVlaCCEBRpd11oOGbRAUGiOhKahGALEkEOIDAmgowBR4EgQCCPsKEAGPhK0hhI7WgFAkQIBEMaOSTA5UBM6hiClQBuc4MOVXHbp5ZcN0aBRQAAh+QQFCgCPACwEAAAAIwAmAAAI/wAfCRxIkKAiHz4UFVzIcKGiI44IEkFIpCACMA0bSjlxYo1EigMdcUmThkXGhQk4JooocKKPigP1kLxwcuEbjh5bgnwkkqSPmg5VsnQJ85HMNBhPfuhS8OYJhY+ICgTjs2CLRgTnOOFCc6Aijm90vhTog2RSgU52wDgAQuATJ3DnEHQqReCVK0xZVBUI4gCMvzgIvoX7xOuJNwFQlk2ax8NfGDiMFNQKNwcNoARRZHiso+EFLnC5YB6oFsYOrBlp5HCSY7TAzRlmYObB1PUMHXlc62boxAciDUh2ZySiYkchNcjVuBHeEAfyQm6gm+nDnOEI6EhUIAjEsnrBIqK9i5YfLxDBBvLNw4TRkGFETvSOsqifH0YNIvSPVvygQl89foFFFIEADju4oQF5T5RhwH8EgWABARY4weBAMYhBQAxsMejIGxaIYSF6AIQhQBQCAaCBFx4e6F1fAggQxkAgZOAhASp6R0KLfBA0AgkEZNCWd2e0+GJIDlyBXosC5DhhAD0IOeFASBq5JAYtIvCkQFos8UJGAQEAIfkEBQoAjwAsCgAAAB0AJwAACP8AHwkcKFDKiRNSCCpcOJAGAIWKDipS2GgNw4ZOnDwcGPHExIESfPj4yJBGRi4EO5J8dACHjw8XBQ7IuPGRyoE5XOqIKfBDxgEcJQ5s6YMIT5kZYdoU+miNToUXwCz06QToUo8CdYg0irNJmkSOFObISONRgIwBbIrcKdBRojRpMhxYeKEqwy5auSYYcQbugS9HebbgAzcNgsBHvaZp4gIxT0d8zvC54PjoBQQJKmsG0ejAjx0ZNBOcMaIJjNOoRQsEcQD1aSRZcKjOejrDCCczZg901Ei3b81OlP4WOKKQGiQqTnDV3cSNmufPzfTRTQTHDjeFsD//HZbLCEQ9kKiUXoHjxfCBGmok6X3eQhgoU3SE9V2kUZIw+H+ovqDGywiBDWhRA35aNHAUABZYAIAjTnghhgUDFfEDfjVocdQBAgjgg0D9EXAFQSe498N8Fy2R4VyPXCGGF2ooJMJhF2bYxED9ifGhaGec2BYOK7YoGoYCpEFQGASI4YRoaei4Go9G8lSWQkAKSRAOTpDomB4ZwlhZQAAh+QQFCgCPACwKAAAAHQAnAAAI/wAfCRwokIYTJzQIKlzIcOCHgx8UHlHUsOKjh04iDlxz4oQUiwwxahSYqGMCkAtFbuz4BmVKiANLnqDokqDKR4pYKvxABOXNNx1pChQ0wgcXkF2ePBEoRedALj584EBQU2AAoDS7XInqA8HJqgoBHIiKoxFYhkV9jOh5duHYAyPb2jQrF6UjF4lGlOFT94IOH2kCC5brKJHgwBn0HKiLIDAfHTku1B0IZrLlmo3yXB6oAwaMDCMQ8LCMw7NpJFlw1J1xoI9p05cdNdLhIUuGtkRGaN7sCIkaJAM2P9LgplASqpYdPUJSqJAa1QwPCCAhY+EGKmF0CPyAqFBxRLsJLn8SIAC5Bg1LuYQJo4Ggj+ITECmUTv7LoytiCFwRiD0McoEIJFGIDwoRQN5i94khxn6PILAeFQo94MR85AmggED4LThQf/81VOFtGCrI4CMjPGhRDhXmMFCGIz6ixnpHNeQDeSCGqKFAjpQYBl0NHcCIZCuKqNAIPFblhIITghUQACH5BAUKAI8ALAQAAQAjACYAAAj/AB8JHEiwoEGBPD4cXMhwIQAnTmg0nNiQCxcnXShqLPjQyZGNIAVajBhyY8cBBRMoKnkwB0SFA3lcOYGS5UAaEGsKHHCiJxebBAc4gRnASc8TXAIAPSgFwdGPSw/OPHFlZdSDThEkuLowwRGlXDUS4XJlxIGwjz680eGjrVu0XNy2ZTMCAdpGOHwceCMIJtpHRP4K3ghm62CBCNKk4aODywXBBxRLzqDnbNgLiaJIlnzYxZsRfPhwzJAj5AwdGnOIERADZJEMMDK4aHhAgG0BAEDugAFjh5OFSG4LuBISBWwYcCwPBJBEeA4Qj66IUZO74IcdhRIJzOOBNwwPBK3cj9YAXaAaMWJ+X9ihZcWjRmrUIBkI4oB38AJ32B70YqB0MRZAh0AYYdj1CHZq/DaQE7sdUF4Dehg40HkE4IAYgQZy4UYhOxSERSMTOYFeGOUNWOBAWRTixk8ggQCHGBUOZKKEJxTCYUhPjFjeIzMS1EN8IG4kYowyYkjQCW6ooZNGV5ThCEE9HhkWFwQGCVJAACH5BAUKAI8ALAEABgAmACEAAAj/AB8JHEiwoMGDBLsAQMiwIUIAXJzMcUix4RonGI9U3FhwAEYnRxxx5JggIsaFIzma5EIj5cgcTnIEcDkywAWRNHM+UuTxCgKdCBM0enOiqFGEa3IOMGo0ERegB48URdCISAKoDBVh3TrwAFAiXRDm8GEmhgABO0DQbITDx4E3Ej4IVHO27tkdNIsg8MGXL5sRCOzWteAk5wcuOvr2PRvDTQYTX7gSaZRoxIEAL4wUdFTGwMgLCK5uBGCBgAWOjvic4cOiopMYYgjEwFmxSZo0TXI4xCFGjJcwhTm24HM7TSKEjuAQ6K1GhkgEYahsMJinCYzgCUacuT0iLEEQcHqLm9lBm0qYMI0ebciAiMgjFzBgZBjoKNHtMyMMZpDtgzb0MBoI5IQahTz1iHUwpDdQDrYlQptAjuDwREHm1ZDfIwOqEVwj8TVR0AVgbNTIeWrgNKAbBh4Yn4IpOZJFGBYO5EQhhQQHAgId0rQCibQ54UaNBCGCBAwuuMQFjBcKxEUhGg50Y3xFuoQADgWdmKJACDDA1SON0DhASgEBACH5BAUKAI8ALAEADQAmABoAAAj/AB8JHEiwoMGDAA4KjCHAQoYDCiNKfPRhzgAnOQRo3BhjR46JEWmsyeGkpEkhG1OaAanwiEmTOdY8anACjpWNPVge5FFywJwLAQyCwILAh06FH44qXUrwClOCioIevDAigxsxYso4enrkxAkEjVYkELjDAtazYp4+csTFq9sTibhgJXDWwg61jxIMePPWq1k3Ga442ooX6hEuiRAMJkxQxwalHxopNaAhjAalB3wcUMSykYUwYSwUOTrCh48RgiaOAB1GDRelADKbfq0QERnQVAwIdKJmxx2DCXyk+fioyxXTPpwWdJSFdQqCO9SoGfAojwcPMx6xSHOGD0EuyJUTevwRegRB3mqQbG0EB4bkR8LTgCEoqDTtgiNEFIyu5oTARjDA8R4YaaRhFEEfEKHTANL1MNoj7Lk3UHzzPdWEG/0NBKCAArFV4IFLEaFGIQ5q2N57AulRIAtMNSKdfxoGiKKHabDIlBPmERQhigJxYWNhA7kAAwwuLBUQACH5BAUKAI8ALAEABgAmACEAAAj/AB8JfHQgx8CDCBMqXChwhwABfBhKnHgwzEMBOyhqfLQmIQALF5UA2Ehy4AsOF2MgKMkSx0UBI1lubBDl4SKZLG0geVOyi0QLYQaVcYJzoxcCYpLGUJNBQlGGGmIknUoAzlOGjpzgGGTBi5gyVyc6cnThStizaAeufPqB4QYdP6iECYOjKA8nTnIcAUBDYAYNcwOTQVT0CN7DTrg8CRxYQwYuRbvMGcAFsZMkYaj8WJuWBo8VXAwuPNGWZIIjAUh+QKIGSUkEJxAk0DhAg5tCSRyRvHLixBVFE0+4UaOGSoGSUmD3PsKwj5pChXb4EdgITpM8Cbvo8CFIYAAnvU9wlkmNUEWh4SoONoEBw8WjLiNGXHikyIePAwcHhIeMEIcaDQcUMVB1MGQgIBhppAGGQNv5QMRBPPA2QEJFnPAAQuvBsRaCCgpEhH06IJQAcBq5wB4iuj3C4YIM2vcgTjjAoOFAKw4kAYg4zcBeFimqmCCLAh2Agw8klmTijDT+OBAIOdhXZEmNhHhQjQdJ8GRYLCTIAksBAQAh+QQFCgCPACwBAAEAIwAmAAAI/wAfCRxIEEEZgggTKlwo8IAAAQcZSpyI4KGABhMzKpRhMaLGjw0tgpR45QlBFhYPjFSYgUCMKwQdPlyZUIOYmx7BWERAk6ABDV5uDnohkM9DFz0Jgshwk4AFkxuIJk04ggQBMR0cTV3o6I0Fp1slGijjIOwjDWqy4GhkNmGYt28tUPmxou0jJBbgwv1hVyCXEYg0vMXRl2CRFzwLK57oRPEHBDh2FFIzwq4KJGoya+5jV7ObQm6QqGDbFombHTi4LGaIgMfILq4z3skAI8PIHE5y0JDoYgcMGDtGcnHihMsFhSAQ/EaCCCnILriJz0mI4zeMJnkEgknjI0HCAG9OxJN+dIS4E5MDR1ivPNBHmjQsBF658uGRlBMnEgvkYR79owNw7IAACANtlwYfWhHhgw9ECBTeCYoQ9MFw0wmU3AwIuZeGao8oyKBAiuD3BkJd1CcRC+/pMZCHDTqIX4QjHfAehx0u2OIja4g40gUpEsQiQYngJwVIKG7oo40DOZLjCUOCBIZ+Av1I0BpNbqXIgjBmFBAAIfkEBQoAjwAsAQAAAB0AJwAACP8AHwkcSLCgwAMCBCAwyLCgExwFEQpY0rDiFTFiIA5skvBAxYZOMKpxNFDimY8MHanBeGVgmo4oGV4Uo6ZkwjQxEawgqJKlwJcCPH78EcbCwoE4RB68iVJLmKcaHzkKQ0CMk0dvSAgBgHKDlhpPszQQOIIm15gEixB9qmGnI5JoGZ6w8NRCkbgVizRKEkYDXpQNfKD4KxCJmSYjBhBmqKZx4yRZcDxYLDDDhEJuChVqHJVygRN9kGQeQdmgIz9XS6vG22j1ozxODvSBAUNH6REZaOuG0fnvbtoZRrgonbvPgdauK3K5kPxRFz5n+CRn0SRNmiarHXGxnkYPi9UHMliK95FAIBEfOrowHOCEeUTutgfq8OFD0aMATpyUp+GECxeDiVzHBVyPnOeDUIqccIJ9j7DnxFkDaeeefPRJIFCCCwr0QX6KoaQIfQeAcKGCDDaY3wcfFYGADzjkMBCGJW7oRIcNfQCiiCNmOJCDNFT0YYsEwUgQACd+REQjcQRJYkEA9EiYFApK0VBAADs="},dBRM:function(e,t,a){"use strict";var s=a("XZGR"),i=a("QI2T"),n={name:"BaseLabelConfig",data:function(){return{load_data:!0,disabled:!1,tabArr:[],centerDialogVisible:!1,diaTitle:"",groupId:"",page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},tabNumber:"",name:"",desc:"",tagRequired:0,tagOption:0,statusCN:"正常",inputVisible:!1,inputValue:"",dynamicTags:[],tableData:[]}},mounted:function(){this.load_data=!0,this.findGroupList(1)},methods:{pageChange:function(e){this.load_data=!0,this.page.pageNo=e,this.findGroupList(e)},newLabel:function(){this.centerDialogVisible=!0,this.diaTitle="新建标签类"},addLabel:function(e){this.load_data=!0,this.tabNumber=e.$index;var t=e.row;this.groupId=t.groupId,this.name=t.name,this.desc=t.desc,"多选"===t.tagOptionCN?this.tagOption=1:this.tagOption=0,"必选"===t.tagRequiredCN?this.tagRequired=1:this.tagRequired=0,this.centerDialogVisible=!0,this.diaTitle="新增标签",this.loadTagGroup(t.groupId)},edit:function(e){this.tabNumber=e.$index;var t=e.row;this.groupId=t.groupId,this.name=t.name,this.desc=t.desc,"多选"===t.tagOptionCN?this.tagOption=1:this.tagOption=0,"必选"===t.tagRequiredCN?this.tagRequired=1:this.tagRequired=0,this.centerDialogVisible=!0,this.diaTitle="编辑标签"},normal:function(e){var t=this;this.tabNumber=e.$index,this.$confirm("禁用后该标签将无法使用，是否禁用？","提示",{confirmButtonText:"禁用",cancelButtonText:"取消",type:"warning"}).then(function(){t.load_data=!0,t.disableGroup(e.row.groupId)}).catch(function(){})},cancelDisable:function(e){var t=this;this.tabNumber=e.$index,this.$confirm("取消禁用后该标签可正常使用，是否取消？","提示",{confirmButtonText:"取消禁止",cancelButtonText:"取消",type:"warning"}).then(function(){t.load_data=!0,t.enableGroup(e.row.groupId)}).catch(function(){})},handleClose:function(e){console.log(e),this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.dynamicTags.push(e),this.inputVisible=!1,this.inputValue=""},sava:a("Y0Uy").debounce(function(){if("新建标签类"===this.diaTitle)if(""===this.name)this.$message({message:"请输入标签类名称",type:"warning"});else{var e={};e.name=this.name,e.desc=this.desc,e.tagRequired=this.tagRequired,e.tagOption=this.tagOption,this.saveGroup(e)}else if("新增标签"===this.diaTitle){if(""!==this.tabNumber)for(var t in this.dynamicTags){var a={};a.groupId=this.groupId,a.tagId="",a.name=this.dynamicTags[t],this.tagSaveTag(a)}this.centerDialogVisible=!1}else if("编辑标签"===this.diaTitle&&""!==this.tabNumber)if(""===this.name)this.$message({message:"请输入标签类名称",type:"warning"});else{var s={};s.groupId=this.groupId,s.name=this.name,s.desc=this.desc,s.tagRequired=this.tagRequired,s.tagOption=this.tagOption,this.saveGroup(s)}},300),cancel:function(){this.dynamicTags=[],this.tabArr=[],this.tabNumber="",this.name="",this.desc="",this.tagRequired=0,this.tagOption=0,this.centerDialogVisible=!1},saveTag:function(e){var t=data;s.x({name:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,t.tableData[t.tabNumber].name=t.name,t.tableData[t.tabNumber].desc=t.desc,t.centerDialogVisible=!1):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},saveGroup:function(e){var t=this;s.v(e).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,t.centerDialogVisible=!1,"新建标签类"===t.diaTitle?(t.findGroupList(1),t.$message({message:"新建标签类成功",type:"success"})):(t.$message({message:"编辑标签成功",type:"success"}),t.tableData[t.tabNumber].name=t.name,t.tableData[t.tabNumber].desc=t.desc)):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1})),t.groupId="",t.tabArr=[],t.name="",t.desc="",t.dynamicTags=[],t.tagRequired=0,t.tagOption=0}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},tagSaveTag:function(e){var t=this;s.F(e).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,t.centerDialogVisible=!1,t.findGroupList(1)):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1})),t.groupId="",t.tabArr=[],t.name="",t.desc="",t.dynamicTags=[],t.tagRequired=0,t.tagOption=0}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},disableGroup:function(e){var t=this;s.f({groupId:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,""!==t.tabNumber&&(t.tableData[t.tabNumber].statusCN="已禁用"),t.tabNumber=""):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},enableGroup:function(e){var t=this;s.h({groupId:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,""!==t.tabNumber&&(t.tableData[t.tabNumber].statusCN="正常"),t.tabNumber="",t.tabNumber=""):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},findGroupList:function(e){var t=this;s.j({pageNo:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object&&(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.tableData=a.object.objects)):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},loadTagGroup:function(e){var t=this;s.s({groupId:e}).then(function(e){var a=e.data;0===a.status&&(t.load_data=!1,t.tabArr=a.object.tags)}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"baseConfig"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"matrialBtn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.newLabel}},[e._v("新建标签类")])],1),e._v(" "),a("el-table",{staticClass:"tableData",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"标签类名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"desc",label:"标签类描述"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"标签数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"BaseLabelList",query:{sid:t.row.groupId}}}},[a("p",{staticStyle:{color:"#409EFF"}},[e._v(e._s(t.row.tagCount))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tagRequiredCN",label:"是否多选"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"tagOptionCN",label:"是否必选"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"statusCN",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",disabled:e.disabled="正常"!==t.row.statusCN},on:{click:function(a){e.addLabel(t)}}},[e._v("新增标签")]),e._v(" "),a("router-link",{attrs:{to:{name:"BaseLabelList",query:{sid:t.row.groupId}}}},[a("el-button",{attrs:{type:"text",disabled:e.disabled="正常"!==t.row.statusCN}},[e._v("查看标签")])],1),e._v(" "),a("el-button",{attrs:{type:"text",disabled:e.disabled="正常"!==t.row.statusCN},on:{click:function(a){e.edit(t)}}},[e._v("编辑")]),e._v(" "),"正常"===t.row.statusCN?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.normal(t)}}},[e._v("禁用")]):e._e(),e._v(" "),"已禁用"===t.row.statusCN?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.cancelDisable(t)}}},[e._v("取消禁用")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.diaTitle,visible:e.centerDialogVisible,inline:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新建标签类"===e.diaTitle||"编辑标签"===e.diaTitle,expression:"diaTitle === '新建标签类' || diaTitle === '编辑标签'"}],attrs:{label:"标签类名称：",required:!0}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新增标签"===e.diaTitle,expression:"diaTitle === '新增标签'"}],attrs:{label:"标签类名称："}},[e._v(e._s(e.name))]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新建标签类"===e.diaTitle||"编辑标签"===e.diaTitle,expression:"diaTitle === '新建标签类' || diaTitle === '编辑标签'"}],attrs:{label:"标签类描述："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入内容"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新建标签类"===e.diaTitle||"新增标签"===e.diaTitle,expression:"diaTitle === '新建标签类' || diaTitle === '新增标签'"}],attrs:{label:"是否必选："}},[a("el-radio-group",{model:{value:e.tagRequired,callback:function(t){e.tagRequired=t},expression:"tagRequired"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新建标签类"===e.diaTitle||"新增标签"===e.diaTitle,expression:"diaTitle === '新建标签类' || diaTitle === '新增标签'"}],attrs:{label:"是否多选："}},[a("el-radio-group",{model:{value:e.tagOption,callback:function(t){e.tagOption=t},expression:"tagOption"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新增标签"===e.diaTitle,expression:"diaTitle === '新增标签'"}],attrs:{label:"标签："}},[e._l(e.tabArr,function(t){return a("el-tag",[e._v(e._s(t.name))])}),e._v(" "),e._l(e.dynamicTags,function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose(t)}}},[e._v(e._s(t))])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm(t):null}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+新增")])],2)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sava}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("基础标签设置")])])])}]};var l=a("vSla")(n,o,!1,function(e){a("5XuS")},null,null);t.a=l.exports},"dLd/":function(e,t,a){e.exports=a.p+"static/img/logo.26a4c3e.png"},dRhn:function(e,t,a){"use strict";var s=a("js5j"),i=a("hRKE"),n=a.n(i),o=a("P9l9"),l=a("QI2T"),r={name:"BusinessAuth",data:function(){return{pData:{show:!1,activeTab:"firstTab",checked1:[],checked2:[],disabled:!1},data1:[],data2:[],defaultProps:{label:"name",children:"childs"},saveTree1:"",saveTree2:"",boxShow:!0,c1:[],c2:[]}},props:["show","business"],watch:{show:function(e,t){1==e?(this.boxShow=!0,this.pData=this.business,this.$set(this.pData,"show",this.show),this.$set(this.pData,"activeTab","firstTab"),this.$set(this.pData,"checked1",[]),this.$set(this.pData,"checked2",[]),this.$set(this.pData,"disabled",!1),this.c1=[],this.c2=[],this.Initial()):this.pData.show=this.show}},methods:{TreeClick:function(e,t){"firstTab"==this.pData.activeTab?(this.saveTree1=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked1=t.checkedKeys):(this.saveTree2=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked2=t.checkedKeys)},Initial:function(){var e=this;o.u({kind:0}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.AuthTree(t.object,"手机端",0):l({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")}),o.u({kind:1}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?e.AuthTree(t.object,"PC端",1):l({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("商家所有权限列表请求服务器失败","","error")})},handleClick:function(e,t){},AuthTree:function(e,t,a){var s=this;o.f({id:this.pData.sid,permissionType:0,clientType:a}).then(function(a){if(0==(a=PF.JsonFormat(a.data)).status){if(a.object&&0!=a.object.length)for(var i=0;i<a.object.length;i++)"手机端"==t?s.c1.push(a.object[i].sid):"PC端"==t&&s.c2.push(a.object[i].sid),s.Arr(a.object[i],t);else"手机端"==t?s.c1="空值":"PC端"==t&&(s.c2="空值");"手机端"==t?s.data1=e:"PC端"==t&&(s.data2=e)}else l({title:"业态权限列表服务器返回错误",text:a.errorMsg,type:"error"})}).catch(function(e){l("业态权限列表请求服务器失败","","error")})},Arr:function(e,t){for(var a=0;a<e.childs.length;a++)""!=e.childs[a].childs?(this.Arr(e.childs[a],t),"手机端"==t?this.c1.push(e.childs[a].sid):"PC端"==t&&this.c2.push(e.childs[a].sid)):"手机端"==t?(this.pData.checked1.push(e.childs[a].sid),this.c1.push(e.childs[a].sid)):"PC端"==t&&(this.pData.checked2.push(e.childs[a].sid),this.c2.push(e.childs[a].sid))},AddDisabled:function(e){for(var t=0;t<e.childs.length;t++)""!=e.childs[t].childs?(e.childs[t].disabled=!0,this.AddDisabled(e.childs[t])):e.childs[t].disabled=!0},UpData:function(){var e=this;e.pData.disabled=!0,o.A().then(function(t){0==(t=PF.JsonFormat(t.data)).status?(l({title:"更新权限成功",type:"success"}),e.Close()):l({title:"更新权限服务器返回错误",text:t.errorMsg,type:"error"}),e.pData.disabled=!1}).catch(function(t){l("更新权限请求服务器失败","","error"),e.pData.disabled=!1})},Submit:function(e){var t=this,a="",s=0;return!t.pData.disabled&&(!t.pData.disabled&&(""!==t.saveTree1||1!=t.c1.length&&t.c1&&"空值"!=t.c1?""!==t.saveTree2||1!=t.c2.length&&t.c2&&"空值"!=t.c2?"object"==n()(t.saveTree1)&&0==t.saveTree1.length?(l("设置手机端权限","","error"),!1):"object"==n()(t.saveTree2)&&0==t.saveTree2.length?(l("设置PC端权限","","error"),!1):(t.pData.disabled=!0,o.z({id:t.pData.sid,permissionIdList:t.saveTree1?t.saveTree1:t.c1,permissionType:0,clientType:0}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?s++:(l({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"}),t.pData.disabled=!1)}).catch(function(e){l("保存权限请求服务器失败","","error"),t.pData.disabled=!1}),o.z({id:t.pData.sid,permissionIdList:t.saveTree2?t.saveTree2:t.c2,permissionType:0,clientType:1}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?s++:(l({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"}),t.pData.disabled=!1)}).catch(function(e){l("保存权限请求服务器失败","","error"),t.pData.disabled=!1}),void(a=setInterval(function(){2==s&&(clearInterval(a),l({title:"保存成功",text:"2秒后自动关闭",type:"success",timer:2e3}).then(function(a){if(t.pData.disabled=!1,e)t.Close();else{var s;for(s=0;s<t.data1.length;s++)t.AddDisabled(t.data1[s]),t.data1[s].disabled=!0;for(s=0;s<t.data2.length;s++)t.AddDisabled(t.data2[s]),t.data2[s].disabled=!0;t.pData.checked1=t.saveTree1?t.pData.checked1.concat(t.saveTree1):t.pData.checked1,t.pData.checked2=t.saveTree2?t.pData.checked2.concat(t.saveTree1):t.pData.checked2,t.boxShow=!1,t.pData.activeTab="firstTab"}}))},500))):(l("设置PC端权限","","error"),!1):(l("设置手机端权限","","error"),!1)))},Close:function(){this.$emit("Close")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show,expression:"pData.show"}],staticClass:"box2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.boxShow,expression:"boxShow"}],staticClass:"box2con change"},[a("h3",[e._v("业态："+e._s(e.pData.name)+"，功能权限")]),e._v(" "),a("div",{staticClass:"plane3"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PC权限",name:"secondTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr35",attrs:{type:"button",disabled:e.pData.disabled},on:{click:function(t){e.Submit(!1)}}},[e._v("更新")]),e._v(" "),a("a",{staticClass:"pointer mr35",attrs:{type:"button",disabled:e.pData.disabled},on:{click:function(t){e.Submit(!0)}}},[e._v("保存")]),e._v(" "),a("a",{staticClass:"pointer",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])]),e._v(" "),e.boxShow?e._e():a("div",{staticClass:"box2con change"},[a("h3",[e._v("更新功能权限")]),e._v(" "),a("div",{staticClass:"text-center blue mb25"},[e._v("权限将更新到最新正在使用的权限版本，是否更新？")]),e._v(" "),a("div",{staticClass:"plane4"},[a("div",{staticClass:"w45p l ml20"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"w45p r mr20"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"PC权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr35 mt20",attrs:{type:"button",disabled:e.pData.disabled},on:{click:e.UpData}},[e._v("立即更新")]),e._v(" "),a("a",{staticClass:"pointer",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[]},d=a("vSla")(r,c,!1,null,null,null).exports,u=a("QI2T"),p={name:"Business",data:function(){return{pData:{show:!1,class:""},search:{pageNo:1},dataList:""}},components:{page:s.a,businessAuth:d},mounted:function(){this.Initial()},methods:{Initial:function(){var e=this;e.dataList="",o.i({pageNo:e.search.pageNo}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):u({title:"业态列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){u("业态列表请求服务器失败","","error")})},EditAuth:function(e){this.pData.show=!0,this.pData.business=e},Close:function(e){this.pData.show=!1}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(1)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(2),e._v(" "),e._l(e.dataList,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",{domProps:{innerHTML:e._s(t.description)}}),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.EditAuth(t)}}},[e._v("编辑权限")])])])})],2)]):e._e()]),e._v(" "),a("businessAuth",{attrs:{show:e.pData.show,business:e.pData.business},on:{Close:e.Close}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("业态管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("业态")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("描述")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("操作")])])}]},m=a("vSla")(p,h,!1,null,null,null);t.a=m.exports},dTto:function(e,t,a){"use strict";var s=a("XZGR"),i=a("QI2T"),n={name:"screenList",props:["screenDialog","addScreenList","openScreen","saveScreenStyle","tabList"],data:function(){return{load_data:!1,oldSelect:[],screenTab:[],multipleSelectionAll:[],multipleSelection:[],idKey:"screenId",daySelect:!1,dayCopyStart:"",dayCopyEnd:"",page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},formData:{screenName:"",storeName:""},storeList:[{label:"全部门店",options:[{value:"全部门店",label:"全部门店"}]},{label:"有屏门店",options:[{value:"西溪印象城",label:"西溪印象城"},{value:"古墩印象城",label:"古墩印象城"}]},{label:"无屏门店",options:[{value:"龙首印象城",label:"龙首印象城"}]}]}},watch:{tabList:function(e){this.getGoodsList(1),this.screenTab=e.objects,this.page.pageRow=e.pageRow,this.page.pageNo=e.pageNo,this.page.total=e.total,this.page.lastPage=e.lastPage,this.openScreen.saveScreenStyle?(this.$refs.multipleTable.clearSelection(),this.multipleSelectionAll=[],this.multipleSelection=[]):"newOpen"===this.openScreen.screenStyle&&(this.multipleSelectionAll=this.addScreenList,this.oldSelect=_.cloneDeep(this.addScreenList))}},methods:{pageChange:function(e){this.page.pageNo=e,this.changePageCoreRecordData(),this.screenFindPage(e)},seachScreens:function(){this.changePageCoreRecordData(),this.page.pageNo=1,this.page.total=0,this.screenFindPage(1)},clearScreens:function(){for(var e in this.formData)this.formData[e]="";this.changePageCoreRecordData(),this.page.pageNo=1,this.page.total=0,this.screenFindPage(1)},handleSelectionChange:function(e){var t=this;this.multipleSelection=e,setTimeout(function(){t.changePageCoreRecordData()},50)},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var e=this.idKey,t=[];this.multipleSelectionAll.forEach(function(a){t.push(a[e])}),this.$refs.multipleTable.clearSelection();for(var a=0;a<this.screenTab.length;a++)t.indexOf(this.screenTab[a][e])>=0&&this.$refs.multipleTable.toggleRowSelection(this.screenTab[a],!0)}},changePageCoreRecordData:function(){var e=this.idKey,t=this;if(this.multipleSelectionAll.length<=0)this.multipleSelectionAll=this.multipleSelection;else{var a=[];this.multipleSelectionAll.forEach(function(t){a.push(t[e])});var s=[];this.multipleSelection.forEach(function(i){s.push(i[e]),a.indexOf(i[e])<0&&t.multipleSelectionAll.push(i)});var i=[];this.screenTab.forEach(function(t){s.indexOf(t[e])<0&&i.push(t[e])}),i.forEach(function(s){if(a.indexOf(s)>=0)for(var i=0;i<t.multipleSelectionAll.length;i++)if(t.multipleSelectionAll[i][e]==s){t.multipleSelectionAll.splice(i,1);break}})}},toggleSelection:function(){var e=this;this.$nextTick(function(){e.$refs.multipleTable.clearSelection(),e.multipleSelectionAll=[],e.multipleSelection=[]})},getGoodsList:function(e){var t=this;this.page.currentPage=e,setTimeout(function(){t.setSelectRow()},50)},chooseScreen:a("Y0Uy").debounce(function(){this.load_data=!1;var e=[];"newOpen"===this.openScreen.screenStyle?this.$emit("closeScreen",this.multipleSelectionAll,!1):(this.openScreen.screenStyle,this.$refs.multipleTable.clearSelection(),this.multipleSelectionAll=[],this.multipleSelection=[],this.$emit("closeScreen",e,!1))},300),nextCopy:function(){this.daySelect=!0},prevCopy:function(){this.daySelect=!1},cancelChoose:function(){this.load_data=!1;var e=[];"newOpen"===this.openScreen.screenStyle?this.$emit("closeScreen",this.oldSelect,!1):(this.openScreen.screenStyle,this.$refs.multipleTable.clearSelection(),this.multipleSelectionAll=[],this.multipleSelection=[],this.$emit("closeScreen",e,!1))},screenFindPage:function(e){var t=this;s.y({pageNo:e,operationShopId:t.openScreen.operationShopId,screenName:t.formData.screenName}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.screenTab=a.object.objects,setTimeout(function(){t.setSelectRow()},50)):(t.page.pageNo=1,t.page.total=0,t.screenTab=[],setTimeout(function(){t.setSelectRow()},50))):(t.load_data=!1,i({text:a.errorMessage,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen-list"},[a("el-dialog",{attrs:{title:e.openScreen.screeName,visible:e.screenDialog,width:"50%",inline:!0,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.screenDialog=t}}},[a("div",{staticClass:"screentTitle"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.multipleSelectionAll.length&&"newOpen"!==e.openScreen.screenStyle,expression:"multipleSelectionAll.length !== 0 && openScreen.screenStyle !=='newOpen'"}]},[e._v("播放计划将复制到以下屏")]),e._v(" "),a("div",{staticClass:"screenHead"},[a("div",{staticClass:"screenLeft"},e._l(e.multipleSelectionAll,function(t){return a("el-tag",[e._v(e._s(t.screenName))])})),e._v(" "),0!==e.multipleSelectionAll.length?a("span",{on:{click:e.toggleSelection}},[e._v("清空")]):e._e()])]),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.daySelect,expression:"!daySelect"}],staticStyle:{width:"100%"},attrs:{inline:!0,"label-position":"top","label-width":"80px"}},[a("el-form-item",{attrs:{label:"屏名称"}},[a("el-input",{attrs:{placeholder:"输入屏名称进行搜索"},model:{value:e.formData.screenName,callback:function(t){e.$set(e.formData,"screenName",t)},expression:"formData.screenName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"门店名称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.storeName,callback:function(t){e.$set(e.formData,"storeName",t)},expression:"formData.storeName"}},e._l(e.storeList,function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.seachScreens}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clearScreens}},[e._v("清空")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.screenTab},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55","aria-checked":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"screenName",label:"屏名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"门店名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.useShopName))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ratio",label:"分辨率"}})],1),e._v(" "),a("div",{staticClass:"pageAtion"},[a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.daySelect,expression:"daySelect"}],staticStyle:{width:"100%"},attrs:{inline:!0}},[a("p",[e._v("播放计划将在所选屏的一下时间选择播放")]),e._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.dayCopyStart,callback:function(t){e.dayCopyStart=t},expression:"dayCopyStart"}}),e._v("-\n          "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.dayCopyEnd,callback:function(t){e.dayCopyEnd=t},expression:"dayCopyEnd"}})],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"newOpen"===e.openScreen.screenStyle,expression:"openScreen.screenStyle === 'newOpen'"}],attrs:{type:"primary"},on:{click:e.chooseScreen}},[e._v("选择")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"copyDay"===e.openScreen.screenStyle&&!e.daySelect,expression:"openScreen.screenStyle === 'copyDay' && !daySelect"}],attrs:{type:"primary"},on:{click:e.nextCopy}},[e._v("下一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.daySelect,expression:"daySelect"}],attrs:{type:"primary"}},[e._v("复制")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.daySelect,expression:"daySelect"}],attrs:{type:"primary"},on:{click:e.prevCopy}},[e._v("上一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"copyWeek"===e.openScreen.screenStyle,expression:"openScreen.screenStyle === 'copyWeek'"}],attrs:{type:"primary"},on:{click:e.chooseScreen}},[e._v("复制")]),e._v(" "),a("el-button",{on:{click:e.cancelChoose}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var l=a("vSla")(n,o,!1,function(e){a("5H3V")},null,null);t.a=l.exports},dV8Z:function(e,t){},ghTz:function(e,t,a){"use strict";var s={name:"CloudPlanModify",data:function(){return{title:"播放计划修改记录",planName:"计划名称",tableData:[{modifier:"IDO品牌宣传广告",modifierTime:"张三（135 2156 1353）",modifierContent:"1. 时间：修改前“2018.7.17 13:00-14:00”,修改后“2018.7.17 13:30-14:00”"}]}},components:{record:a("bGMF").a}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"PlanModify"},[t("section",{staticClass:"con"},[t("record",{attrs:{title:this.title,tableData:this.tableData,planName:this.planName}})],1)])},staticRenderFns:[]},n=a("vSla")(s,i,!1,null,null,null);t.a=n.exports},iOpU:function(e,t,a){"use strict";var s={name:"MaterialModify",data:function(){return{title:"播放计划修改记录",planName:"计划名称",tableData:[{modifier:"IDO品牌宣传广告",modifierTime:"张三（135 2156 1353）",modifierContent:"1. 时间：修改前“2018.7.17 13:00-14:00”,修改后“2018.7.17 13:30-14:00”"}]}},components:{record:a("bGMF").a}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"PlanModify"},[t("section",{staticClass:"con"},[t("record",{attrs:{title:this.title,tableData:this.tableData,planName:this.planName}})],1)])},staticRenderFns:[]},n=a("vSla")(s,i,!1,null,null,null);t.a=n.exports},iX4B:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"UseShopList",data:function(){return{pData:{versionId:this.$route.query.versionId,versionNo:this.$route.query.versionNo},search:{pageNo:1,pageRow:20,shopId:"",shopName:"",provinceEncode:"",cityEncode:""},data:{province:"",city:""},dataList:""}},components:{page:s.a},mounted:function(){var e=this;i.o().then(function(t){t=PF.JsonFormat(t.data),e.data.province=t.data}),e.Initial()},methods:{Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,document.querySelector("#shopId").value="",document.querySelector("#shopName").value="",this.search.provinceEncode="",this.search.cityEncode="",this.Initial()},Initial:function(){var e=this;e.dataList="",this.search.shopId=document.querySelector("#shopId").value,this.search.shopName=document.querySelector("#shopName").value,i.y({pageRow:e.search.pageRow,pageNo:e.search.pageNo,shopId:e.search.shopId,shopName:e.search.shopName,provinceEncode:e.search.provinceEncode,cityEncode:e.search.cityEncode,versionId:e.pData.versionId}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):n({title:"商家列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家列表请求服务器失败","","error")})},ChangeCity:function(e){var t=this;t.search.cityEncode="",t.data.city="",i.k({provinceId:e}).then(function(e){e=PF.JsonFormat(e.data),t.data.city=e.data})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[a("figure",[a("figcaption",[e._v("版本："+e._s(e.pData.versionNo)+" 使用商家列表")]),e._v(" "),a("div",{staticClass:"crumbs"},[a("span",[e._v("商家管理")]),e._v(" "),a("a",{attrs:{href:"/authVersionList"}},[e._v("权限版本管理")]),e._v(" "),a("a",[e._v("版本："+e._s(e.pData.versionNo)+" 使用商家列表")])]),e._v(" "),e._m(0)]),e._v(" "),a("div",{staticClass:"box"},[a("form",[e._m(1),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("商家区域：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.provinceEncode,expression:"search.provinceEncode"}],staticClass:"w100",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"provinceEncode",t.target.multiple?a:a[0])},function(t){e.ChangeCity(e.search.provinceEncode)}]}},[a("option",{attrs:{value:""}},[e._v("--省--")]),e._v(" "),e._l(e.data.province,function(t){return a("option",{key:t.$index,domProps:{value:t.encoding,selected:t.selected}},[e._v(e._s(t.name))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.cityEncode,expression:"search.cityEncode"}],staticClass:"w100",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"cityEncode",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("--市--")]),e._v(" "),e._l(e.data.city,function(t){return a("option",{key:t.$index,domProps:{value:t.encoding}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn l w85 mr15",attrs:{type:"button"},on:{click:e.Search}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")]),e._v(" "),a("button",{staticClass:"btn2 l w85",attrs:{type:"button"},on:{click:e.Reset}},[e._v("清空")])])])]),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(3)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[e._v("\n      共有 "+e._s(e.dataList.total)+" 个商家使用 "+e._s(e.pData.versionNo)+" 版本\n      "),a("table",{staticClass:"tab"},[e._m(4),e._v(" "),e._l(e.dataList.objects,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.shopId))]),e._v(" "),a("td",[e._v(e._s(t.shopName))]),e._v(" "),a("td",[e._v("\n            "+e._s(t.provinceName)+"\n            "+e._s(t.cityName?"-"+t.cityName:"")+"\n          ")]),e._v(" "),a("td",[e._v("\n            "+e._s(t.category1Name)+"\n            "+e._s(t.category2Name?"/"+t.category2Name:"")+"\n            "+e._s(t.category3Name?"/"+t.category3Name:"")+"\n          ")]),e._v(" "),a("td",[e._v(e._s(t.businessTypeName))]),e._v(" "),a("td",[e._v(e._s(t.memberLevelName))]),e._v(" "),a("td",[e._v(e._s(t.shopTypeName))])])})],2),e._v(" "),a("div",{staticClass:"hidden mt20"},[a("page",{attrs:{dataList:e.dataList,search:e.search},on:{Change:e.Change}})],1)]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"btn5  btn5-change",attrs:{href:"/authVersionList"}},[t("i",{staticClass:"fa fa-reply"}),this._v(" 返回")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家名称：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopName",onfocus:"PF.CutString(this,60)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家ID：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopId",maxlength:"8",oninput:"PF.Integer(this)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("商家ID")]),e._v(" "),a("th",[e._v("商家名称")]),e._v(" "),a("th",[e._v("所在城市")]),e._v(" "),a("th",[e._v("类型")]),e._v(" "),a("th",[e._v("商家业态")]),e._v(" "),a("th",[e._v("商家等级")]),e._v(" "),a("th",[e._v("地点属性")])])}]},r=a("vSla")(o,l,!1,null,null,null);t.a=r.exports},jcXq:function(e,t,a){"use strict";var s=a("ZLEe"),i=a.n(s),n=a("3cXf"),o=a.n(n),l=a("XZGR"),r=a("QI2T"),c=a("6ROu"),d={name:"Test",data:function(){return{currentFirstDate:"",arrs:[],value55:[],tagsList:[],tags:[],weekList:[],optionss:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],dataObj:{token:""},tableData3:[],screenList:[],subscreenList:[],currentBack:[],tab4:[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 118 弄"},{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 151 弄"}],tab7:[{id:"2",date:"2016-05-03",name:"王小二",address:"上海市普陀区金沙江路 151 弄"}],tableData5:[{id:"3",date:"2016-05-05",name:"王小r二",address:"上海市普陀区金沙"},{id:"4",date:"2016-05-056",name:"王3二",address:"上海市普陀区金沙"}],tableData6:[[{id:"0",date:"2016-05-03",name:"王小",address:"上海市普陀区金沙江路 118 弄"},{id:"1",date:"2016-05-06",name:"王虎",address:"上海市普陀区金沙江路 151 弄"}],[{id:"3",date:"2016-05-05",name:"王小r二",address:"上海市普陀区金沙"},{id:"4",date:"2016-05-056",name:"王3二",address:"上海市普陀区金沙"}],[{id:"2",date:"2016-05-03",name:"王小二",address:"上海市普陀区金沙江路 151 弄"}]]}},mounted:function(){var e=this;this.tableData3=this.tab4,this.subscreenList=this.tableData6,this.subscreenList.forEach(function(t,a){e.currentBack[a]=[],e.screenList[a]=[],t.map(function(s){var i=e.getIndexById(s.id,e.tableData3);e.currentBack[a].push(i),e.screenList[a]=t}),e.subscreenList=JSON.parse(o()(e.screenList)),e.currentBack[a]&&e.currentBack[a].map(function(t){e.$nextTick(function(){void 0!=e.tableData3[t]&&e.$refs.multipleTable.toggleRowSelection(e.tableData3[t])})})}),this.ass(),this.todays(),this.setDate(new Date)},methods:{todays:function(){var e=c().format("E");c().subtract(e+7-1,"days").format("YYYY/MM/DD"),c().subtract(e,"days").format("YYYY/MM/DD")},formatDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1+"-")+e.getDate()},addDate:function(e,t){return e.setDate(e.getDate()+t),e},setDate:function(e){var t=e.getDay()-1;e=this.addDate(e,-1*t),this.currentFirstDate=new Date(e);for(var a=[],s=0;s<7;s++)a.push(this.formatDate(0==s?e:this.addDate(e,1)));this.weekList=a},nows:function(){this.setDate(new Date)},prev:function(){this.setDate(this.addDate(this.currentFirstDate,-7))},next:function(){this.setDate(this.addDate(this.currentFirstDate,7))},ass:function(){this.tagsList=[[{tagOption:0,tagId:1,tagRequired:0,groupId:1}],[{tagOption:0,tagId:2,tagRequired:1,groupId:2}],[{tagOption:1,tagId:12,tagRequired:0,groupId:3}],[{tagOption:1,tagId:12,tagRequired:1,groupId:4},{tagOption:1,tagId:23,tagRequired:1,groupId:4},{tagOption:1,tagId:243,tagRequired:1,groupId:4},{tagOption:1,tagId:123,tagRequired:1,groupId:4}]],this.tags=[{tagOption:0,tagId:1,tagRequired:0,groupId:1},{tagOption:0,tagId:2,tagRequired:1,groupId:2},[{tagOption:1,tagId:12,tagRequired:0,groupId:3}],[{tagOption:1,tagId:123,tagRequired:1,groupId:4}]];var e=[];for(var t in this.tags)if(Array.isArray(this.tags[t]))if(0===this.tags[t].length)1===this.tagsList[t][0].tagRequired&&(1,r({text:"必选想不能为空",allowOutsideClick:!1}));else for(var a in this.tags[t]){var s={groupId:this.tags[t][a].groupId,tagId:this.tags[t][a].tagId};e.push(s)}else if(0===i()(this.tags[t]).length)1===this.tagsList[t][0].tagRequired&&(1,r({text:"必选想不能为空",allowOutsideClick:!1}));else{var n={};for(var o in this.tags[t])n.groupId=this.tags[t].groupId,n.tagId=this.tags[t].tagId;e.push(n)}},getIndexById:function(e,t){for(var a=-1,s=0;s<t.length;s++)if(t[s].id==e){a=s;break}return a},handleSelectionChange:function(e){var t=this,a=this.currentPage-1;this.currentBack[a]=[],this.screenList[a]=[],e.map(function(s){var i=t.getIndexById(s.id,t.tableData3);t.currentBack[a].push(i),t.screenList[a]=e}),this.subscreenList=JSON.parse(o()(this.screenList))},toggleSelection:function(e){var t=this;this.$nextTick(function(){t.$refs.multipleTable.clearSelection(),t.subscreenList=[],t.subscreenList=[],t.currentBack=[]})},pageChange:function(e){var t=this;this.currentPage=e,this.tableData3=2===e?this.tableData5:3===e?this.tab7:this.tab4,this.currentBack[this.currentPage-1]&&this.currentBack[this.currentPage-1].map(function(e){t.$nextTick(function(){void 0!=t.tableData3[e]&&t.$refs.multipleTable.toggleRowSelection(t.tableData3[e])})})},firstInto:function(){var e=this.currentPage-1;this.currentBack[e]=[]},handleClose:function(e,t,a){},handleImageScucess:function(e){console.log(e)},aaa:function(){var e=this;l.I().then(function(t){e.dataObj.token=t.data.object,console.log(e.dataObj.token)}).catch(function(e){console.log(e),reject(!1)})},handlePreview:function(){},getToken:function(){var e=this;l.I().then(function(t){var a=t.data;0===a.status?(e.diaLogChange=!0,e.load_data=!1,e.uploadToken=a.object):(e.load_data=!1,r({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(t){console.log(t),e.load_data=!1,r({text:"请求服务器失败",allowOutsideClick:!1})})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"test"},[a("section",{staticClass:"con"},[a("div",{staticClass:"box",attrs:{data:e.screenList}},[e._l(e.subscreenList,function(t,s){return a("p",{key:s},e._l(t,function(t,s){return a("el-tag",{key:s},[e._v("\n          "+e._s(t.name)+"\n        ")])}))}),e._v(" "),0!==e.subscreenList.length?a("el-button",{on:{click:function(t){e.toggleSelection()}}},[e._v("清空")]):e._e(),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}})],1),e._v(" "),a("el-pagination",{attrs:{"page-size":2,layout:"total, prev, pager, next",total:5,"prev-text":"上页","next-text":"下页"},on:{"current-change":e.pageChange}}),e._v(" "),a("div",{on:{click:e.aaa}},[a("el-upload",{attrs:{data:e.dataObj,action:"https://up.qiniup.com/","before-upload":e.handlePreview,"on-success":e.handleImageScucess}},[a("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.value55,callback:function(t){e.value55=t},expression:"value55"}},e._l(e.optionss,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e}})})),e._v(" "),a("div",[a("span",{on:{click:e.prev}},[e._v("prev")]),a("span",{on:{click:e.nows}},[e._v("本周")]),a("span",{on:{click:e.next}},[e._v("next")])]),e._v("\n      "+e._s(e.weekList)+"\n    ")],2)])])},staticRenderFns:[]},p=a("vSla")(d,u,!1,null,null,null);t.a=p.exports},js5j:function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement;return(this._self._c||e)("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper, ->","pager-count":5,"current-page":this.search.pageNo,"page-sizes":[20],"page-size":this.dataList.pageRow,total:this.dataList.total},on:{"size-change":this.Change,"current-change":this.Change}})},staticRenderFns:[]},i=a("vSla")({name:"Page",data:function(){return{}},props:["dataList","search"],mounted:function(){},methods:{Change:function(e){this.$emit("Change",e)}}},s,!1,null,null,null);t.a=i.exports},"kGl/":function(e,t,a){"use strict";var s=a("XZGR"),i=a("QI2T"),n={name:"BaseLabelList",data:function(){return{load_data:!0,centerDialogVisible:!1,inputVisible:!1,labelStatu:!0,groupId:"",groupName:"",tagName:"",tagId:"",title:"",inputValue:"",dynamicTags:[],tableData:[]}},mounted:function(){this.load_data=!0;var e=this.$route.query.sid;void 0===e?this.loadTagGroup(0):this.loadTagGroup(e)},methods:{newLabel:function(){this.title="新增标签",this.centerDialogVisible=!0,this.labelStatu=!0},edit:function(e){this.title="编辑标签",this.tagName=e.row.name,this.tagId=e.row.tagId,this.centerDialogVisible=!0,this.labelStatu=!1},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.dynamicTags.push(e),this.inputVisible=!1,this.inputValue=""},sava:a("Y0Uy").debounce(function(){if(this.labelStatu)for(var e in this.load_data=!0,this.dynamicTags){var t={};t.groupId=this.groupId,t.name=this.dynamicTags[e],this.tagSaveTag(t)}else if(""===this.tagName)this.$message({message:"请输入内容",type:"warning"});else{this.load_data=!0;var a={};a.groupId=this.groupId,a.name=this.tagName,a.tagId=this.tagId,this.tagSaveTag(a)}},300),cancel:function(){this.dynamicTags=[],this.tagName="",this.tagId="",this.centerDialogVisible=!1},loadTagGroup:function(e){var t=this;s.s({groupId:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,t.groupId=a.object.groupId,t.groupName=a.object.name,t.tableData=a.object.tags):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})},tagSaveTag:function(e){var t=this;s.F(e).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,t.loadTagGroup(t.groupId),t.centerDialogVisible=!1,"新增标签"==t.title?t.$message({message:"新增标签成功",type:"success"}):t.$message({message:"编辑标签成功",type:"success"})):(t.load_data=!1,i({text:a.errorMsg,allowOutsideClick:!1})),t.dynamicTags=[],t.tagName="",t.tagId=""}).catch(function(e){t.load_data=!1,i({text:"请求服务器失败",allowOutsideClick:!1})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"labelList"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"matrialBtn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.newLabel}},[e._v("新建标签")])],1),e._v(" "),a("el-table",{staticClass:"tableData",attrs:{data:e.tableData,"element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"标签名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.edit(t)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.centerDialogVisible,inline:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",[e.labelStatu?e._e():a("el-form-item",{attrs:{label:"标签名称",required:!0}},[a("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入"},model:{value:e.tagName,callback:function(t){e.tagName=t},expression:"tagName"}})],1),e._v(" "),e.labelStatu?a("el-form-item",{attrs:{label:"标签类名称"}},[e._v(e._s(e.groupName))]):e._e(),e._v(" "),e.labelStatu?a("el-form-item",{attrs:{label:"标签"}},[e._l(e.tableData,function(t){return a("el-tag",[e._v(e._s(t.name))])}),e._v(" "),e._l(e.dynamicTags,function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleClose(t)}}},[e._v(e._s(t))])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm(t):null}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+新增")])],2):e._e()],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sava}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("标签列表")])])])}]};var l=a("vSla")(n,o,!1,function(e){a("Kpgg")},null,null);t.a=l.exports},mtHx:function(e,t){},mxCl:function(e,t,a){"use strict";var s=a("a3Yh"),i=a.n(s),n=a("js5j"),o=a("P9l9"),l=a("QI2T"),r={name:"PushAuth",data:function(){return{pData:{show:!1,versionId:""},create:{description:""},error:{descriptionError:""}}},props:["show","versionId","versionNo"],watch:{show:function(e,t){this.pData.show=this.show,this.pData.versionId=this.versionId,this.pData.versionNo=this.versionNo,document.querySelector("#description").value=""}},methods:{Submit:function(){var e=this;if(e.create.description=document.querySelector("#description").value,!e.create.description)return e.error.descriptionError="请输入发布描述",PF.GoTo("description");o.p({versionId:e.pData.versionId,description:e.create.description}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?l({title:"发布成功",text:"2秒后自动关闭",type:"success",timer:2e3}).then(function(t){e.Close("success")}):l({title:"发布权限服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){l("发布权限请求服务器失败","","error")})},Close:function(e){this.$emit("Close",e)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show,expression:"pData.show"}],staticClass:"box2"},[a("div",{staticClass:"box2con w560"},[a("h3",[e._v("发布"+e._s(e.pData.versionNo)+"权限版本")]),e._v(" "),a("div",{staticClass:"text-center orange mb25"},[e._v("发布后开通的商户，其功能权限将按新版权限设置。")]),e._v(" "),a("div",{staticClass:"form-group2 mb25"},[a("label",{staticClass:"w100"},[e._v("版本描述：")]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"ml115 text-left mt10"},[a("em",{staticClass:"notice text-left"},[e._v("限200个字符或100个汉字"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.descriptionError,expression:"error.descriptionError"}],staticClass:"ml20"},[e._v("* "+e._s(e.error.descriptionError))])])])]),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w100 mr55",attrs:{type:"button"},on:{click:e.Submit}},[e._v("立即发布")]),e._v(" "),a("button",{staticClass:"btn2 w100",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("textarea",{staticClass:"w350",attrs:{id:"description",onfocus:"PF.CutString(this,200)"}})])}]},d=a("vSla")(r,c,!1,null,null,null).exports,u=a("QI2T"),p={name:"AuthVersionList",data:function(){return{pData:{show:!1},search:{pageNo:1,pageRow:20},dataList:""}},components:{page:n.a,pushAuth:d},mounted:function(){this.Initial()},methods:i()({Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,this.Initial()},Initial:function(){var e=this;e.dataList="",o.h({pageNo:e.search.pageNo,pageRow:e.search.pageRow}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo,e.dataList.objects.forEach(function(e,t){try{e.description=e.description.replace(/\n/g,"<br>")}catch(e){}}))):u({title:"权限版本列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){u("权限版本列表请求服务器失败","","error")})},UseShopList:function(e){this.$router.push({path:"/authVersionList/useShopList",query:{versionNo:e.versionNo,versionId:e.versionId}})},Check:function(e){this.$router.push({path:"/authVersionList/checkAuth",query:{versionNo:e.versionNo,versionId:e.versionId}})},Push:function(e){this.pData.show=!0,this.pData.versionId=e.versionId,this.pData.versionNo=e.versionNo},Close:function(e){"success"==e&&this.Initial(),this.pData.show=!1}},"Reset",function(e){u({title:"确定重置版本"+e.versionNo+" 权限？",type:"warning",showCancelButton:!0}).then(function(t){t.value&&o.q({versionId:e.versionId}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?u({title:"重置成功",text:"2秒后自动关闭",type:"success",timer:2e3}):u({title:"重置权限服务器返回错误",text:e.errorMsg,type:"error"})}).catch(function(e){u("重置权限请求服务器失败","","error")})})})},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[""==e.dataList?a("div",{staticClass:"text-center"},[e._m(1)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(2),e._v(" "),e._l(e.dataList.objects,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.versionNo))]),e._v(" "),a("td",{staticClass:"wb text-left",domProps:{innerHTML:e._s(t.description)}}),e._v(" "),a("td",[e._v(e._s(t.statusDesc))]),e._v(" "),a("td",[a("a",{staticClass:"pointer",on:{click:function(a){e.UseShopList(t)}}},[e._v(e._s(t.useShopCount))])]),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.Check(t)}}},[e._v("查看权限")]),e._v(" "),0==t.status?a("a",{on:{click:function(a){e.Push(t)}}},[e._v("发布版本")]):e._e(),e._v(" "),0==t.status?a("a",{on:{click:function(a){e.Reset(t)}}},[e._v("重置权限")]):e._e()])])})],2),e._v(" "),a("div",{staticClass:"hidden mt20"},[a("page",{attrs:{dataList:e.dataList,search:e.search},on:{Change:e.Change}})],1)]):e._e()]),e._v(" "),a("pushAuth",{attrs:{show:e.pData.show,versionId:e.pData.versionId,versionNo:e.pData.versionNo},on:{Close:e.Close}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("权限版本管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",{attrs:{width:"13%"}},[e._v("版本号")]),e._v(" "),a("th",{attrs:{width:"40%"}},[e._v("描述")]),e._v(" "),a("th",{attrs:{width:"12%"}},[e._v("状态")]),e._v(" "),a("th",{attrs:{width:"15%"}},[e._v("使用商家")]),e._v(" "),a("th",[e._v("操作")])])}]},m=a("vSla")(p,h,!1,null,null,null);t.a=m.exports},nlrN:function(e,t){},oIyP:function(e,t,a){"use strict";var s=a("XZGR"),i=a("/k80"),n=a("QI2T"),o={name:"ScreenManage",data:function(){return{centerDialogVisible:!1,load_data:!0,activeName:"nowUser",tabIndex:"",tagsList:[],tagsList1:[],nowUserIndex:0,noUserIndex:0,changesOption:{},page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},screen:{operationShopName:"",operationShopId:"",useShopName:"",useShopId:"",screenName:"",fzr:0,operation:"",groupId:"",tagId:"",workarea:["330000","330100","330106"],areaChoose:i.regionData,fzrList:[{label:"全部",value:"0"},{label:"脸脸",value:"1"},{label:"商家",value:"2"}],operatorList:[{label:"全部",value:""},{label:"脸脸运营",value:0},{label:"商户运营",value:1}],screenLabelList:[{label:"全部",value:"0"},{label:"脸脸",value:"1"},{label:"商家",value:"2"}]},tableData:[],tableData1:[],dialogInfo:{tags:[],tags1:[],disabled:!1,screenName:"",screenId:"",centerId:"",radio:0,operationShopId:"",operationShopName:"",useShopId:"",useShopName:""}}},mounted:function(){this.load_data=!0;var e=this.$route.query.shopId;this.screen.operationShopId=e,this.screenFindPage(1)},methods:{tabClick:function(){for(var e in this.page)this.page[e]="pageNo"===e?1:0;this.load_data=!0,"nowUser"===this.activeName&&(this.nowUserIndex+=1,1===this.nowUserIndex?(this.noUserIndex=0,this.page.pageNo=1,this.screenFindPage(1)):this.load_data=!1),"noUser"===this.activeName&&(this.noUserIndex+=1,1===this.noUserIndex?(this.nowUserIndex=0,this.page.pageNo=1,this.findPageUnuse(1)):this.load_data=!1)},seachScreen:function(){this.load_data=!0,this.page.pageNo=1,"nowUser"===this.activeName?this.screenFindPage(1,"选择运营"):this.findPageUnuse(1)},clearScreen:function(){this.load_data=!0,this.page.pageNo=1,"nowUser"==this.activeName?(this.screen.operationShopName="",this.screen.operationShopId="",this.screen.useShopName="",this.screen.useShopId="",this.screen.screenName="",this.screen.operation="",this.screen.groupId="",this.tagId="",this.screenFindPage(1,"选择运营")):this.findPageUnuse(1)},operationChange:function(){this.page.pageNo=1,this.load_data=!0,"nowUser"==this.activeName&&this.screenFindPage(1,"选择运营")},pageChange:function(e){this.page.pageNo=e,this.load_data=!0,"nowUser"===this.activeName?this.screenFindPage(e):"noUser"===this.activeName&&this.findPageUnuse(e)},operationOwer:function(){this.shopLoadName(this.dialogInfo.operationShopId,"运营id")},useOwer:function(){this.shopLoadName(this.dialogInfo.useShopId,"使用id")},save:a("Y0Uy").debounce(function(){var e=this;if(0==this.dialogInfo.radio&&(this.dialogInfo.operationShopId=40261649,this.dialogInfo.operationShopName="脸脸集团"),""===this.dialogInfo.screenName)this.$message({message:"请输入屏屏名称",type:"warning"});else if(""==this.dialogInfo.operationShopName)this.$message({message:"请输入运营商户ID",type:"warning"});else{var t=0,a=0,s=[],i=[],n=this.dialogInfo.tags;for(var o in this.tagsList)for(var l in this.tagsList[o])if(1==this.tagsList[o][l].tagRequired){i.push(this.tagsList[o][l]);break}if(i.length>0)for(var r in i){if(!(n.length>0)){t=1,this.$message({message:"必选项不能为空",type:"warning"});break}for(var c in n)if(n[c].groupId==i[r].groupId){a=1,s.push(n[c]);break}0==a&&(t=1,this.$message({message:"必选项不能为空",type:"warning"}))}if(n.length>0)for(var d in n)0===n[d].tagRequired&&s.push(n[d]);var u=this.dialogInfo.tags1;for(var p in this.tagsList1)if(0==u[p].length){if(1==this.tagsList1[p][0].tagRequired){t=1,this.$message({message:"必选项不能为空",type:"warning"});break}}else for(var h in u[p])s.push(u[p][h]);if(0==t){var m=[];for(var v in s){var f={tagId:s[v].tagId,groupId:s[v].groupId};m.push(f)}this.changesOption.radio==this.dialogInfo.radio?0==this.changesOption.radio?this.screenSave(m):this.changesOption.operationShopId==this.dialogInfo.operationShopId?this.screenSave(m):this.$confirm("运营权发生修改，保存后屏对应的所有计划将被删除，是否保存？","提示",{confirmButtonText:"立即保存",cancelButtonText:"取消",type:"warning",showClose:!1,closeOnClickModal:!1}).then(function(){e.screenSave(m)}).catch(function(){}):this.$confirm("运营权发生修改，保存后屏对应的所有计划将被删除，是否保存？","提示",{confirmButtonText:"立即保存",cancelButtonText:"取消",type:"warning",showClose:!1,closeOnClickModal:!1}).then(function(){e.screenSave(m)}).catch(function(){})}}},300),cancel:function(){this.centerDialogVisible=!1,this.dialogInfo.screenName="",this.dialogInfo.screenId="",this.dialogInfo.centerId="",this.dialogInfo.radio=0,this.dialogInfo.operationShopId="",this.dialogInfo.operationShopName="",this.dialogInfo.useShopId="",this.dialogInfo.useShopName=""},handleChange:function(e){},edit:function(e){this.load_data=!0,this.tabIndex=e.$index;var t=e.row;this.centerDialogVisible=!0,this.dialogInfo.radio=t.operation?t.operation:0,this.dialogInfo.operationShopId=t.operationShopId,this.dialogInfo.operationShopName=t.operationShopName,this.dialogInfo.screenName=t.screenName,this.dialogInfo.useShopId=t.useShopId,this.dialogInfo.useShopName=t.useShopName,this.dialogInfo.screenId=t.screenId,this.dialogInfo.centerId=t.centerId,this.findGroupList(1),this.changesOption.radio=this.dialogInfo.radio,this.changesOption.operationShopId=this.dialogInfo.operationShopId},radioChange:function(e){0===e?this.dialogInfo.disabled=!1:(0==this.changesOption.radio&&(this.dialogInfo.operationShopId="",this.dialogInfo.operationShopName=""),this.dialogInfo.disabled=!0),this.dialogInfo.radio=e},screenFindPage:function(e,t){var a=this;s.y({pageNo:e,operationShopName:a.screen.operationShopName,operationShopId:a.screen.operationShopId,useShopName:a.screen.useShopName,useShopId:a.screen.useShopId,operation:a.screen.operation,screenName:a.screen.screenName,groupId:a.screen.groupId,tagId:a.screen.tagId}).then(function(e){var t=e.data;0===t.status?(a.load_data=!1,t.object?(a.page.pageRow=t.object.pageRow,a.page.pageNo=t.object.pageNo,a.page.total=t.object.total,a.page.lastPage=t.object.lastPage,a.tableData=t.object.objects):(a.page.pageNo=1,a.page.total=0,a.tableData=[])):(a.load_data=!1,n({text:t.errorMessage,allowOutsideClick:!1}))}).catch(function(e){a.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})},findPageUnuse:function(e){var t=this;s.m({pageNo:e,ownerShopId:t.screen.operationShopId}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.tableData1=a.object.objects):(t.page.pageNo=1,t.page.total=0,t.tableData1=[])):(t.load_data=!1,n({text:a.errorMessage,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})},findGroupList:function(e){var t=this;s.j({pageNo:e}).then(function(e){var a=e.data;if(0===a.status){if(t.tagsList=[],t.tagsList1=[],t.dialogInfo.tags=[],t.dialogInfo.tags1=[],t.load_data=!1,a.object){var s=a.object.objects;for(var i in s)t.loadTagGroup(s[i].groupId)}}else t.load_data=!1,n({text:a.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})},loadTagGroup:function(e){var t=this;s.s({groupId:e}).then(function(e){var a=e.data;if(0===a.status){t.load_data=!1;var s=a.object.tags;if(s.length>0){var i=[],o=[];for(var l in s){var r={};r.groupId=a.object.groupId,r.groupName=a.object.name,r.tagRequired=a.object.tagRequired,r.tagOption=a.object.tagOption,r.tagId=s[l].tagId,r.tagName=s[l].name,0==a.object.tagOption?i.push(r):o.push(r)}i.length>0&&t.tagsList.push(i),o.length>0&&t.tagsList1.push(o)}}else t.load_data=!1,n({text:a.errorMsg,allowOutsideClick:!1})}).catch(function(e){t.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})},screenSave:function(e){var t=this;s.C({screenId:t.dialogInfo.screenId,centerId:t.dialogInfo.centerId,operation:t.dialogInfo.radio,operationShopId:t.dialogInfo.operationShopId,useShopId:t.dialogInfo.useShopId,tags:e}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,t.centerDialogVisible=!1,t.dialogInfo.screenName="",t.dialogInfo.screenId="",t.dialogInfo.centerId="",t.dialogInfo.radio=0,t.dialogInfo.operationShopId="",t.dialogInfo.operationShopName="",t.dialogInfo.useShopId="",t.dialogInfo.useShopName="","nowUser"===t.activeName?(t.page.pageNo=1,t.page.total=0,t.screenFindPage(1)):(t.nowUserIndex=1,t.noUserIndex=0,t.findPageUnuse(1),t.page.pageNo=1,t.page.total=0,t.activeName="nowUser",t.screenFindPage(1)),t.$message({message:"编辑屏幕成功",type:"success"})):(t.load_data=!1,n({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})},shopLoadName:function(e,t){var a=this;s.E({shopId:e}).then(function(e){var s=e.data;0===s.status?(a.load_data=!1,s.object?"运营id"===t?a.dialogInfo.operationShopName=s.object:a.dialogInfo.useShopName=s.object:("运营id"===t?(a.dialogInfo.operationShopName="",a.dialogInfo.operationShopId=""):(a.dialogInfo.useShopName="",a.dialogInfo.useShopId=""),n({text:"查无此ID",allowOutsideClick:!1}))):(a.load_data=!1,n({text:s.errorMsg,allowOutsideClick:!1}))}).catch(function(e){a.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ScreenManage"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"运营商户名称"}},[a("el-input",{attrs:{placeholder:"输入计划标题"},model:{value:e.screen.operationShopName,callback:function(t){e.$set(e.screen,"operationShopName",t)},expression:"screen.operationShopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运营商户ID"}},[a("el-input",{attrs:{placeholder:"运营商ID"},model:{value:e.screen.operationShopId,callback:function(t){e.$set(e.screen,"operationShopId",t)},expression:"screen.operationShopId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用商户名称"}},[a("el-input",{attrs:{placeholder:"使用商户名称"},model:{value:e.screen.useShopName,callback:function(t){e.$set(e.screen,"useShopName",t)},expression:"screen.useShopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用商户ID"}},[a("el-input",{attrs:{placeholder:"使用商户ID"},model:{value:e.screen.useShopId,callback:function(t){e.$set(e.screen,"useShopId",t)},expression:"screen.useShopId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"屏名称"}},[a("el-input",{attrs:{placeholder:"输入屏名称"},model:{value:e.screen.screenName,callback:function(t){e.$set(e.screen,"screenName",t)},expression:"screen.screenName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"负责人"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:e.screen.fzr,callback:function(t){e.$set(e.screen,"fzr",t)},expression:"screen.fzr"}},e._l(e.screen.fzrList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"运营权"}},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.operationChange},model:{value:e.screen.operation,callback:function(t){e.$set(e.screen,"operation",t)},expression:"screen.operation"}},e._l(e.screen.operatorList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"屏标签"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:e.screen.groupId,callback:function(t){e.$set(e.screen,"groupId",t)},expression:"screen.groupId"}},e._l(e.screen.screenLabelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"地区选择"}},[a("el-cascader",{attrs:{options:e.screen.areaChoose,"change-on-select":""},on:{change:e.handleChange},model:{value:e.screen.workarea,callback:function(t){e.$set(e.screen,"workarea",t)},expression:"screen.workarea"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.seachScreen}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.clearScreen}},[e._v("清空")])],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"使用中",name:"nowUser"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"未使用",name:"noUser"}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"nowUser"===e.activeName,expression:"activeName === 'nowUser'"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"screenName",label:"屏名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"screenSelfId",label:"物理屏ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ratio",label:"分辨率"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"visitTime",label:"上次访问时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"屏标签",prop:"tags"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运营权"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.operation?a("p",[e._v("脸脸运营")]):e._e(),e._v(" "),1==t.row.operation?a("p",[e._v("商户运营")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运营商户\\ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.operationShopName)),t.row.operationShopId?a("span",[e._v("("+e._s(t.row.operationShopId)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"使用商户\\ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.useShopName)),t.row.useShopId?a("span",[e._v("("+e._s(t.row.useShopId)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"负责人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.wallahName)),""!=t.row.wallahPhone?a("span",[e._v("("+e._s(t.row.wallahPhone)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.edit(t)}}},[e._v("编辑")]),e._v(" "),a("router-link",{attrs:{to:{name:"CloudSeedPlan",query:{shopId:t.row.operationShopId,screenId:t.row.screenId}}}},[a("el-button",{attrs:{type:"text"}},[e._v("播放计划")])],1)]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"noUser"===e.activeName,expression:"activeName === 'noUser'"}],attrs:{data:e.tableData1}},[a("el-table-column",{attrs:{align:"center",prop:"screenName",label:"屏名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"screenSelfId",label:"物理屏ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ratio",label:"分辨率"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"上次访问时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"屏标签",prop:"tags"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运营权"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.operation?a("p",[e._v("脸脸运营")]):e._e(),e._v(" "),1==t.row.operation?a("p",[e._v("商户运营")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运营商户\\ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.operationShopName)),t.row.operationShopId?a("span",[e._v("("+e._s(t.row.operationShopId)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"使用商户\\ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.useShopName)),t.row.useShopId?a("span",[e._v("("+e._s(t.row.useShopId)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"负责人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.wallahName)),""!=t.row.wallahPhone?a("span",[e._v(e._s(t.row.wallahPhone)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.edit(t)}}},[e._v("编辑")]),e._v(" "),a("router-link",{attrs:{to:{name:"CloudSeedPlan",query:{shopId:t.row.operationShopId,screenId:t.row.screenId}}}},[a("el-button",{attrs:{type:"text"}},[e._v("播放计划")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑屏幕",visible:e.centerDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"屏幕名称",required:!0}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.dialogInfo.screenName,callback:function(t){e.$set(e.dialogInfo,"screenName",t)},expression:"dialogInfo.screenName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运营权",required:!0}},[a("el-radio-group",{on:{change:e.radioChange},model:{value:e.dialogInfo.radio,callback:function(t){e.$set(e.dialogInfo,"radio",t)},expression:"dialogInfo.radio"}},[a("el-radio",{attrs:{label:0}},[e._v("脸脸运营")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("商户运营")])],1)],1),e._v(" "),1==e.dialogInfo.radio?a("el-form-item",{attrs:{label:"运营商户ID",required:!0,"label-width":"100px"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"number",placeholder:"输入所属商户ID"},on:{blur:e.operationOwer},model:{value:e.dialogInfo.operationShopId,callback:function(t){e.$set(e.dialogInfo,"operationShopId",t)},expression:"dialogInfo.operationShopId"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1):e._e(),e._v(" "),1==e.dialogInfo.radio?a("el-form-item",{attrs:{label:"运营商户","label-width":"100px"}},[a("span",[e._v(e._s(e.dialogInfo.operationShopName))])]):e._e(),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"diaScreen",attrs:{"element-loading-text":"拼命加载中"}},[a("span",{staticClass:"screenLabel"},[e._v("屏标签")]),e._v(" "),a("div",{staticClass:"diaScreenss"},[e._l(e.tagsList,function(t,s){return a("div",[0==t[0].tagOption?a("el-form-item",{key:s,attrs:{label:t[0].groupName,required:1==t[0].tagRequired,"label-width":"80px"}},[a("el-select",{attrs:{placeholder:"全部","value-key":"tagId",clearable:!0},model:{value:e.dialogInfo.tags[s],callback:function(t){e.$set(e.dialogInfo.tags,s,t)},expression:"dialogInfo.tags[index]"}},e._l(t,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagName,value:e}})}))],1):e._e()],1)}),e._v(" "),e._l(e.tagsList1,function(t,s){return a("div",[1==t[0].tagOption?a("el-form-item",{key:s,attrs:{label:t[0].groupName,required:1==t[0].tagRequired,"label-width":"80px"}},[a("el-select",{attrs:{placeholder:"全部",multiple:"","value-key":"tagId"},model:{value:e.dialogInfo.tags1[s],callback:function(t){e.$set(e.dialogInfo.tags1,s,t)},expression:"dialogInfo.tags1[index]"}},e._l(t,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagName,value:e}})}))],1):e._e()],1)})],2)]),e._v(" "),a("el-form-item",{attrs:{label:"当前使用商户ID","label-width":"100px"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"number",placeholder:"输入所属商户ID"},on:{blur:e.useOwer},model:{value:e.dialogInfo.useShopId,callback:function(t){e.$set(e.dialogInfo,"useShopId",t)},expression:"dialogInfo.useShopId"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"当前使用商户","label-width":"100px"}},[a("span",[e._v(e._s(e.dialogInfo.useShopName))])])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("屏列表")])])])}]};var r=a("vSla")(o,l,!1,function(e){a("1awW")},null,null);t.a=r.exports},pFZ8:function(e,t,a){var s={"./af":"nqC2","./af.js":"nqC2","./ar":"tHRT","./ar-dz":"2iw2","./ar-dz.js":"2iw2","./ar-kw":"soBb","./ar-kw.js":"soBb","./ar-ly":"zjQ3","./ar-ly.js":"zjQ3","./ar-ma":"11uP","./ar-ma.js":"11uP","./ar-sa":"yM2J","./ar-sa.js":"yM2J","./ar-tn":"k9UU","./ar-tn.js":"k9UU","./ar.js":"tHRT","./az":"H/ZR","./az.js":"H/ZR","./be":"NcWj","./be.js":"NcWj","./bg":"ux43","./bg.js":"ux43","./bm":"SHxi","./bm.js":"SHxi","./bn":"mhJc","./bn.js":"mhJc","./bo":"LyiZ","./bo.js":"LyiZ","./br":"eXAx","./br.js":"eXAx","./bs":"e6JA","./bs.js":"e6JA","./ca":"Nq9b","./ca.js":"Nq9b","./cs":"UHZy","./cs.js":"UHZy","./cv":"A9HL","./cv.js":"A9HL","./cy":"VZG9","./cy.js":"VZG9","./da":"ucoA","./da.js":"ucoA","./de":"crTT","./de-at":"Tz0t","./de-at.js":"Tz0t","./de-ch":"thUw","./de-ch.js":"thUw","./de.js":"crTT","./dv":"3FyJ","./dv.js":"3FyJ","./el":"soCQ","./el.js":"soCQ","./en-au":"dDC6","./en-au.js":"dDC6","./en-ca":"a+lM","./en-ca.js":"a+lM","./en-gb":"M9nR","./en-gb.js":"M9nR","./en-ie":"Mg3b","./en-ie.js":"Mg3b","./en-il":"FnyN","./en-il.js":"FnyN","./en-nz":"k7mD","./en-nz.js":"k7mD","./eo":"jXmb","./eo.js":"jXmb","./es":"6C4d","./es-do":"obsI","./es-do.js":"obsI","./es-us":"6PAY","./es-us.js":"6PAY","./es.js":"6C4d","./et":"vuD1","./et.js":"vuD1","./eu":"u5y6","./eu.js":"u5y6","./fa":"tFrz","./fa.js":"tFrz","./fi":"X+Ax","./fi.js":"X+Ax","./fo":"Rh5s","./fo.js":"Rh5s","./fr":"TOjj","./fr-ca":"ruqB","./fr-ca.js":"ruqB","./fr-ch":"00Y2","./fr-ch.js":"00Y2","./fr.js":"TOjj","./fy":"SRJb","./fy.js":"SRJb","./gd":"0IH4","./gd.js":"0IH4","./gl":"xKUt","./gl.js":"xKUt","./gom-latn":"mXUA","./gom-latn.js":"mXUA","./gu":"KJ90","./gu.js":"KJ90","./he":"Lb8N","./he.js":"Lb8N","./hi":"zKrU","./hi.js":"zKrU","./hr":"c7Tt","./hr.js":"c7Tt","./hu":"nPYQ","./hu.js":"nPYQ","./hy-am":"xP+R","./hy-am.js":"xP+R","./id":"b/5h","./id.js":"b/5h","./is":"NBPu","./is.js":"NBPu","./it":"j638","./it.js":"j638","./ja":"+4ei","./ja.js":"+4ei","./jv":"zTBq","./jv.js":"zTBq","./ka":"0yQz","./ka.js":"0yQz","./kk":"bHch","./kk.js":"bHch","./km":"WKL0","./km.js":"WKL0","./kn":"3YHI","./kn.js":"3YHI","./ko":"Q+Dq","./ko.js":"Q+Dq","./ky":"CcNt","./ky.js":"CcNt","./lb":"M5Vs","./lb.js":"M5Vs","./lo":"o/Sk","./lo.js":"o/Sk","./lt":"cLY9","./lt.js":"cLY9","./lv":"RGDN","./lv.js":"RGDN","./me":"FD3J","./me.js":"FD3J","./mi":"GwqZ","./mi.js":"GwqZ","./mk":"uQI5","./mk.js":"uQI5","./ml":"T6pu","./ml.js":"T6pu","./mn":"yxpo","./mn.js":"yxpo","./mr":"bPiS","./mr.js":"bPiS","./ms":"2OOo","./ms-my":"KSMX","./ms-my.js":"KSMX","./ms.js":"2OOo","./mt":"Nh9e","./mt.js":"Nh9e","./my":"/XOG","./my.js":"/XOG","./nb":"Ae3M","./nb.js":"Ae3M","./ne":"I2Mq","./ne.js":"I2Mq","./nl":"q8N+","./nl-be":"iNpx","./nl-be.js":"iNpx","./nl.js":"q8N+","./nn":"i67k","./nn.js":"i67k","./pa-in":"adWD","./pa-in.js":"adWD","./pl":"+rcL","./pl.js":"+rcL","./pt":"oklR","./pt-br":"gJMY","./pt-br.js":"gJMY","./pt.js":"oklR","./ro":"sk37","./ro.js":"sk37","./ru":"+4Xv","./ru.js":"+4Xv","./sd":"Jt7/","./sd.js":"Jt7/","./se":"oN7S","./se.js":"oN7S","./si":"+QYi","./si.js":"+QYi","./sk":"egU1","./sk.js":"egU1","./sl":"aGJs","./sl.js":"aGJs","./sq":"GtSw","./sq.js":"GtSw","./sr":"KvrN","./sr-cyrl":"maSq","./sr-cyrl.js":"maSq","./sr.js":"KvrN","./ss":"rkEC","./ss.js":"rkEC","./sv":"goqJ","./sv.js":"goqJ","./sw":"C+kv","./sw.js":"C+kv","./ta":"fqly","./ta.js":"fqly","./te":"E4H0","./te.js":"E4H0","./tet":"/++u","./tet.js":"/++u","./tg":"Hw/J","./tg.js":"Hw/J","./th":"OxV8","./th.js":"OxV8","./tl-ph":"26rn","./tl-ph.js":"26rn","./tlh":"ZWUx","./tlh.js":"ZWUx","./tr":"Ygbz","./tr.js":"Ygbz","./tzl":"cYDi","./tzl.js":"cYDi","./tzm":"RfCZ","./tzm-latn":"ZY5v","./tzm-latn.js":"ZY5v","./tzm.js":"RfCZ","./ug-cn":"2gWI","./ug-cn.js":"2gWI","./uk":"II8x","./uk.js":"II8x","./ur":"CREB","./ur.js":"CREB","./uz":"G9HU","./uz-latn":"Swdd","./uz-latn.js":"Swdd","./uz.js":"G9HU","./vi":"gkPr","./vi.js":"gkPr","./x-pseudo":"9yAS","./x-pseudo.js":"9yAS","./yo":"3Xqy","./yo.js":"3Xqy","./zh-cn":"HZyc","./zh-cn.js":"HZyc","./zh-hk":"ITl9","./zh-hk.js":"ITl9","./zh-tw":"RXqC","./zh-tw.js":"RXqC"};function i(e){return a(n(e))}function n(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(s)},i.resolve=n,e.exports=i,i.id="pFZ8"},pGh7:function(e,t){},pghe:function(e,t){},psC7:function(e,t,a){"use strict";var s={name:"Preview",props:["previewMateria","previewInfo"],data:function(){return{scr:"",matrialGroupType:"",indexMa:0}},watch:{previewInfo:function(e){var t=e.options[0];this.matrialGroupType=t.type,4===this.matrialGroupType?this.$message({message:"本地文件无法预览",type:"warning"}):3===t.type?window.open(t.url):this.scr=t.url}},methods:{previewList:function(e,t){this.indexMa=t,this.matrialGroupType=e.type,4===this.matrialGroupType?this.$message({message:"本地文件无法预览",type:"warning"}):3===e.type?window.open(e.url):this.scr=e.url},closeList1:function(){if(this.indexMa=0,5==this.previewInfo.type){var e=document.getElementById("myVideo"),t=document.getElementById("myAudio");t&&t.pause(),e&&e.pause()}else if(1==this.previewInfo.type){var a=document.getElementById("myAudio1");a&&a.pause()}else if(2==this.previewInfo.type){var s=document.getElementById("myVideo1");s&&s.pause()}this.$emit("closePreview",!1)},shouDown:function(){if(this.indexMa=0,5==this.previewInfo.type){var e=document.getElementById("myVideo"),t=document.getElementById("myAudio");t&&t.pause(),e&&e.pause()}this.$emit("closePreview",!1)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"preview"},[a("el-dialog",{attrs:{title:"素材预览",visible:e.previewMateria,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.previewMateria=t},close:e.closeList1}},[5===e.previewInfo.type?[a("div",{staticClass:"materilGroup clear"},[a("div",{staticClass:"materilGroupLeft"},[a("div",{staticClass:"materilGroupHead"},[a("h3",{staticStyle:{"font-size":"22px"}},[e._v(e._s(e.previewInfo.name))]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:e.shouDown}})]),e._v(" "),a("ul",{staticClass:"materilGroupList"},e._l(e.previewInfo.options,function(t,s){return a("li",{class:e.indexMa==s?"activeColor":"",on:{click:function(a){e.previewList(t,s)}}},[a("p",[e._v(e._s(t.name))]),e._v(" "),a("p",{staticStyle:{"padding-top":"10px"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:""!==t.planTimeHours||"--"!==t.planTimeHours,expression:"item.planTimeHours !=='' || item.planTimeHours !=='--'"}]},[e._v(e._s(t.hour)+"小时")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:""!==t.planTimeMinutes||"--"!==t.planTimeMinutes,expression:"item.planTimeMinutes !=='' || item.planTimeMinutes !=='--'"}]},[e._v(e._s(t.minute)+"分钟")])])])})),e._v(" "),a("div",{staticClass:"materilBtn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.shouDown}},[e._v("关闭")])],1)]),e._v(" "),a("div",{staticClass:"materilGroupRight"},[0===e.matrialGroupType?a("div",{staticClass:"prevDiv"},[a("img",{attrs:{src:e.scr,alt:""}})]):e._e(),e._v(" "),2===e.matrialGroupType?a("video",{ref:"video",staticClass:"previewImg",attrs:{src:e.scr,controls:"controls",autoplay:"autoplay",loop:"loop",id:"myVideo"}}):e._e(),e._v(" "),1===e.matrialGroupType?a("audio",{ref:"audio",staticClass:"audioStyle",attrs:{src:e.scr,controls:"controls",autoplay:"autoplay",loop:"loop",id:"myAudio"}}):e._e()])])]:e._e(),e._v(" "),5!==e.previewInfo.type?[0===e.previewInfo.type?a("div",{staticClass:"prevDiv"},[a("img",{attrs:{src:e.previewInfo.url,alt:""}})]):e._e(),e._v(" "),2===e.previewInfo.type?a("video",{staticClass:"previewImg",attrs:{src:e.previewInfo.url,controls:"controls",autoplay:"autoplay",loop:"loop",id:"myVideo1"}}):e._e(),e._v(" "),1===e.previewInfo.type?a("audio",{staticClass:"audioStyle",attrs:{src:e.previewInfo.url,controls:"controls",autoplay:"autoplay",loop:"loop",id:"myAudio1"}}):e._e()]:e._e()],2)],1)},staticRenderFns:[]};var n=a("vSla")(s,i,!1,function(e){a("AA2/")},null,null);t.a=n.exports},"q4I+":function(e,t){},"r1F+":function(e,t){},"rnj/":function(e,t){},sLxB:function(e,t,a){"use strict";var s=a("XZGR"),i=a("/k80"),n=a("QI2T"),o={name:"CloudList",data:function(){return{load_data:!0,shopName:"",shopId:"",mrchant:0,page:{pageRow:0,pageNo:1,totalPageNo:0,total:0},workarea:["330000","330100","330106"],areaChoose:i.regionData,mrchantList:[{name:"全部",value:0},{name:"是",value:1},{name:"否",value:2}],tableData:[]}},mounted:function(){this.load_data=!0,this.shopFindList(1)},methods:{handleChange:function(e){},searchs:function(){this.load_data=!0,this.page.pageNo=1,this.shopFindList(1)},clearClod:function(){this.shopId="",this.shopName="",this.load_data=!0,this.page.pageNo=1,this.shopFindList(1)},pageChange:function(e){this.page.pageNo=e,this.load_data=!0,this.shopFindList(e)},shopFindList:function(e){var t=this;s.D({pageNo:e,shopId:t.shopId,shopName:t.shopName}).then(function(e){var a=e.data;0===a.status?(t.load_data=!1,a.object?(t.page.pageRow=a.object.pageRow,t.page.pageNo=a.object.pageNo,t.page.total=a.object.total,t.page.lastPage=a.object.lastPage,t.tableData=a.object.objects):(t.page.pageNo=1,t.page.pageRow=20,t.page.total=0,t.tableData=[])):(t.load_data=!1,n({text:a.errorMsg,allowOutsideClick:!1}))}).catch(function(e){t.load_data=!1,n({text:"请求服务器失败",allowOutsideClick:!1})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cloudList"},[a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.load_data,expression:"load_data"}],staticClass:"box",attrs:{"element-loading-text":"拼命加载中"}},[a("el-form",{attrs:{inline:!0,"label-position":"top"}},[a("el-form-item",{attrs:{label:"商户名称"}},[a("el-input",{attrs:{placeholder:"输入商户名称"},model:{value:e.shopName,callback:function(t){e.shopName=t},expression:"shopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商户ID"}},[a("el-input",{attrs:{type:"number",placeholder:"输入商户ID",oninput:"if(value.length>8)value=value.slice(0,8)"},model:{value:e.shopId,callback:function(t){e.shopId=t},expression:"shopId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否脸脸自有商户"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:e.mrchant,callback:function(t){e.mrchant=t},expression:"mrchant"}},e._l(e.mrchantList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"地区选择"}},[a("el-cascader",{attrs:{options:e.areaChoose,"change-on-select":""},on:{change:e.handleChange},model:{value:e.workarea,callback:function(t){e.workarea=t},expression:"workarea"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchs}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.clearClod}},[e._v("清空")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{aligin:"center",prop:"shopName",label:"商户名称"}}),e._v(" "),a("el-table-column",{attrs:{aligin:"center",prop:"shopId",label:"商户ID"}}),e._v(" "),a("el-table-column",{attrs:{aligin:"center",prop:"location",label:"地区"}}),e._v(" "),a("el-table-column",{attrs:{aligin:"center",label:"负责人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.wallahName)),""!=t.row.wallahPhone?a("span",[e._v("("+e._s(t.row.wallahPhone)+")")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{aligin:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"CloudSeedDetail",query:{shopId:t.row.shopId}}}},[a("el-button",{attrs:{type:"text"}},[e._v("详情")])],1),e._v(" "),a("router-link",{attrs:{to:{name:"ScreenManage",query:{shopId:t.row.shopId}}}},[a("el-button",{attrs:{type:"text"}},[e._v("屏管理")])],1),e._v(" "),a("router-link",{attrs:{to:{name:"MaterialManageList",query:{sid:t.$index}}}},[a("el-button",{attrs:{type:"text"}},[e._v("素材管理")])],1),e._v(" "),a("router-link",{attrs:{to:{name:"CloudSeedPlan",query:{shopId:t.row.shopId}}}},[a("el-button",{attrs:{type:"text"}},[e._v("播放计划")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{pageSize:e.page.pageRow,layout:"total, prev, pager, next",total:e.page.total,"prev-text":"上页","next-text":"下页","current-page":e.page.pageNo},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.page,"pageNo",t)}}})],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("div",{staticClass:"crumbs"},[t("span",[this._v("编播管理")])])])}]},r=a("vSla")(o,l,!1,null,null,null);t.a=r.exports},sd8k:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"CreateRole",data:function(){return{pData:{show:!1},create:{name:"",description:""},error:{nameError:"",descriptionError:""}}},props:["show"],watch:{show:function(e,t){document.querySelector("#name").value="",document.querySelector("#description").value="",this.ClearError(),this.pData.show=this.show}},methods:{ClearError:function(){this.error={nameError:"",descriptionError:""}},Submit:function(){var e=this;return e.ClearError(),e.create.name=document.querySelector("#name").value,e.create.description=document.querySelector("#description").value,e.create.name?e.create.description?void i.l({name:e.create.name,description:e.create.description}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?n({title:"创建成功",text:"2秒后自动关闭",type:"success",showCancelButton:!0,timer:"2000"}).then(function(t){e.Close("success")}):n({title:"创建角色服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("创建角色请求服务器失败","","error")}):(e.error.descriptionError="请输入角色描述",!1):(e.error.nameError="请输入角色名称",!1)},Close:function(e){this.$emit("Close",e)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show,expression:"pData.show"}],staticClass:"box2"},[a("div",{staticClass:"box2con w560"},[a("h3",[e._v("创建角色")]),e._v(" "),a("div",{staticClass:"form-group2 mb10"},[a("label",{staticClass:"w100"},[e._v("角色名称：")]),e._v(" "),a("span",[a("input",{attrs:{type:"text",id:"name",onfocus:"PF.CutString(this,50)"}}),e._v(" "),a("em",{staticClass:"notice"},[e._v("限50字符"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.nameError,expression:"error.nameError"}]},[e._v("* "+e._s(e.error.nameError))])])])]),e._v(" "),a("div",{staticClass:"form-group2 mb25"},[a("label",{staticClass:"w100"},[e._v("角色描述：")]),e._v(" "),a("span",[a("textarea",{staticClass:"w180",attrs:{id:"description",onfocus:"PF.CutString(this,200)"}}),e._v(" "),a("em",{staticClass:"notice text-left"},[e._v("限200个字符或100个汉字"),a("br"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.descriptionError,expression:"error.descriptionError"}],staticClass:"ml0"},[e._v("* "+e._s(e.error.descriptionError))])])])]),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w100 mr55",attrs:{type:"button"},on:{click:e.Submit}},[e._v("确定")]),e._v(" "),a("button",{staticClass:"btn2 w100",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[]},r=a("vSla")(o,l,!1,null,null,null).exports,c=a("QI2T"),d={name:"RoleAuth",data:function(){return{pData:{show2:!1,shopId:"",activeTab:"firstTab",checked:[],disabled:!1},data:[],defaultProps:{label:"name",children:"childs"},saveTree:""}},props:["show2","role"],watch:{show2:function(e,t){1==e?(this.pData=this.role,this.$set(this.pData,"show2",this.show2),this.$set(this.pData,"clientType",0),this.$set(this.pData,"activeTab","firstTab"),this.$set(this.pData,"checked",[]),this.$set(this.pData,"disabled",!1),this.handleClick()):this.pData.show2=this.show2}},methods:{TreeClick:function(e,t){this.saveTree=t.checkedKeys.concat(t.halfCheckedKeys)},handleClick:function(e,t){var a=this;switch(this.pData.activeTab){case"firstTab":a.pData.clientType=0;break;case"secondTab":a.pData.clientType=1}i.u({kind:a.pData.clientType}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?a.AuthTree(e.object):c({title:"商家所有权限列表服务器返回错误",text:e.errorMsg,type:"error"})}).catch(function(e){c("商家所有权限列表请求服务器失败","","error")})},AuthTree:function(e){var t=this;i.f({id:this.pData.sid,permissionType:3,clientType:t.pData.clientType}).then(function(a){if(0==(a=PF.JsonFormat(a.data)).status){if(a.object&&0!=a.object.length)for(var s=0;s<a.object.length;s++)t.Arr(a.object[s],name);t.data=e}else c({title:"角色权限列表服务器返回错误",text:a.errorMsg,type:"error"})}).catch(function(e){c("角色权限列表请求服务器失败","","error")})},Arr:function(e){for(var t=0;t<e.childs.length;t++)""!=e.childs[t].childs?this.Arr(e.childs[t]):this.pData.checked.push(e.childs[t].sid)},Submit:function(){var e=this;if(!this.saveTree.length)return c({title:"请选择权限",type:"error"}),!1;e.pData.disabled=!0,i.z({id:e.pData.sid,permissionIdList:this.saveTree,permissionType:3,clientType:e.pData.clientType}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?c({title:"保存成功",text:"2秒后自动关闭",type:"success",timer:2e3}).then(function(t){e.Close()}):(c({title:"保存权限服务器返回错误",text:t.errorMsg,type:"error"}),e.pData.disabled=!1)}).catch(function(t){c("保存权限请求服务器失败","","error"),e.pData.disabled=!1})},Close:function(){this.$emit("Close")}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show2,expression:"pData.show2"}],staticClass:"box2"},[a("div",{staticClass:"box2con change"},[a("h3",[e._v("角色："+e._s(e.pData.name)+"，功能权限")]),e._v(" "),a("div",{staticClass:"plane3"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"PC权限",name:"secondTab"}})],1),e._v(" "),a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data,"default-checked-keys":e.pData.checked,props:e.defaultProps},on:{check:e.TreeClick}})],1),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr55",attrs:{type:"button",disabled:e.pData.disabled},on:{click:e.Submit}},[e._v("确定")]),e._v(" "),a("button",{staticClass:"btn2 w85",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[]},p=a("vSla")(d,u,!1,null,null,null).exports,h=a("QI2T"),m={name:"Role",data:function(){return{pData:{show:!1,show2:!1,role:""},search:{pageNo:1},dataList:""}},components:{page:s.a,roleAuth:p,createRole:r},mounted:function(){this.Initial()},methods:{Initial:function(){var e=this;e.dataList="",i.r({pageNo:e.search.pageNo}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo,e.dataList.forEach(function(e,t){try{e.description=e.description.replace(/\n/g,"<br>")}catch(e){}}))):h({title:"角色列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){h("角色列表请求服务器失败","","error")})},Create:function(){this.pData.show=!0},EditAuth:function(e){this.pData.show2=!0,this.pData.role=e},Close:function(e){"success"==e&&this.Initial(),this.pData.show=!1,this.pData.show2=!1}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[a("roleAuth",{attrs:{show2:e.pData.show2,role:e.pData.role},on:{Close:e.Close}}),e._v(" "),a("createRole",{attrs:{show:e.pData.show},on:{Close:e.Close}}),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"form-group mb20"},[a("button",{staticClass:"btn w110 r",attrs:{type:"button"},on:{click:e.Create}},[e._v("创建角色")])]),e._v(" "),""==e.dataList?a("div",{staticClass:"text-center"},[e._m(1)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(2),e._v(" "),e._l(e.dataList,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",{domProps:{innerHTML:e._s(t.description)}}),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.EditAuth(t)}}},[e._v("编辑权限")])])])})],2)]):e._e()])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("角色管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("角色")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("描述")]),this._v(" "),t("th",{attrs:{width:"33%"}},[this._v("操作")])])}]},f=a("vSla")(m,v,!1,null,null,null);t.a=f.exports},"u8o/":function(e,t){},utd2:function(e,t,a){"use strict";var s=a("js5j"),i=a("P9l9"),n=a("QI2T"),o={name:"Auth",data:function(){return{pData:{show:!1,activeTab:"firstTab",checked1:[],checked2:[],disabled:!1},data1:[],data2:[],defaultProps:{label:"name",children:"childs"},saveTree1:[],saveTree2:[]}},props:["show","shop"],watch:{show:function(e,t){1==e?(this.pData=this.shop,this.$set(this.pData,"show",this.show),this.$set(this.pData,"activeTab","firstTab"),this.$set(this.pData,"checked1",[]),this.$set(this.pData,"checked2",[]),this.$set(this.pData,"disabled",!1),this.saveTree1=[],this.saveTree2=[],this.Initial()):this.pData.show=this.show}},methods:{TreeClick:function(e,t){"firstTab"==this.pData.activeTab?(this.saveTree1=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked1=t.checkedKeys):(this.saveTree2=t.checkedKeys.concat(t.halfCheckedKeys),this.pData.checked2=t.checkedKeys)},handleClick:function(e,t){},Initial:function(){var e=this;i.m({shopId:e.pData.shopId,clientType:0}).then(function(t){if(0==(t=PF.JsonFormat(t.data)).status){if(t.object)for(var a=0;a<t.object.length;a++)e.CustomType(t.object[a],"手机端");e.ShopAllAuth("手机端",0)}else n({title:"商家基础权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家基础权限列表请求服务器失败","","error")}),i.m({shopId:e.pData.shopId,clientType:1}).then(function(t){if(0==(t=PF.JsonFormat(t.data)).status){if(t.object)for(var a=0;a<t.object.length;a++)e.CustomType(t.object[a],"PC端");e.ShopAllAuth("PC端",1)}else n({title:"商家基础权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家基础权限列表请求服务器失败","","error")})},CustomType:function(e,t){for(var a=0;a<e.childs.length;a++)""!=e.childs[a].childs?this.CustomType(e.childs[a],t):null==e.childs[a].customType&&("手机端"==t?this.pData.checked1.push(e.childs[a].sid):"PC端"==t&&this.pData.checked2.push(e.childs[a].sid))},ShopAllAuth:function(e,t){var a=this;i.u({kind:t}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?"手机端"==e?a.data1=t.object:"PC端"==e&&(a.data2=t.object):n({title:"商家所有权限列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){n("商家所有权限列表请求服务器失败","","error")})},Submit:function(){var e=this,t="",a=0;if(e.pData.disabled)return!1;if(0==e.pData.checked1.length)return n("请选择手机端权限","","error"),!1;if(0==e.pData.checked2.length)return n("请选择PC端权限","","error"),!1;if(e.pData.disabled=!0,e.saveTree1.length>0?i.v({shopId:e.pData.shopId,permissionIdList:e.saveTree1,clientType:0}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?a++:n({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"})}).catch(function(e){n("保存权限请求服务器失败","","error")}):a++,e.saveTree2.length>0){for(var s=0;s<e.pData.checked2.length;s++)for(var o=0;o<e.saveTree2.length;o++)e.pData.checked2[s]==e.saveTree2[o].permissionId&&0==e.saveTree2[o].type&&e.saveTree2.splice(o,1);i.v({shopId:e.pData.shopId,permissionIdList:e.saveTree2,clientType:1}).then(function(e){0==(e=PF.JsonFormat(e.data)).status?a++:n({title:"保存权限服务器返回错误",text:e.errorMsg,type:"error"})}).catch(function(e){n("保存权限请求服务器失败","","error")})}else a++;t=setInterval(function(){a>=2&&(clearInterval(t),n({title:"保存成功",text:"2秒后自动关闭",type:"success",timer:2e3}).then(function(t){e.pData.disabled=!1,e.Close()}))},500)},Close:function(){this.$emit("Close")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pData.show,expression:"pData.show"}],staticClass:"box2"},[a("div",{staticClass:"box2con change"},[a("h3",[e._v("商家："+e._s(e.pData.shopName)+"  功能权限")]),e._v(" "),a("div",{staticClass:"plane3"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.pData.activeTab,callback:function(t){e.$set(e.pData,"activeTab",t)},expression:"pData.activeTab"}},[a("el-tab-pane",{attrs:{label:"手机权限",name:"firstTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data1,"default-checked-keys":e.pData.checked1,props:e.defaultProps},on:{check:e.TreeClick}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PC权限",name:"secondTab"}},[a("el-tree",{attrs:{"show-checkbox":"","default-expand-all":"","auto-expand-parent":!0,"node-key":"sid",data:e.data2,"default-checked-keys":e.pData.checked2,props:e.defaultProps},on:{check:e.TreeClick}})],1)],1)],1),e._v(" "),a("div",{staticClass:"form-group mb30"},[a("button",{staticClass:"btn w85 mr55",attrs:{type:"button"},on:{click:e.Submit}},[e._v("保存")]),e._v(" "),a("button",{staticClass:"btn2 w85",attrs:{type:"button"},on:{click:e.Close}},[e._v("取消")])])])])},staticRenderFns:[]},r=a("vSla")(o,l,!1,null,null,null).exports,c=a("QI2T"),d={name:"AppList",data:function(){return{search:{pageNo:1,pageRow:20,shopId:"",shopName:"",businessTypeId:"",shopTypeId:"",memberLevelId:""},pData:{doc:{size:1024e3,accept:["xls","xlsx"],name:"doc"},show:!1,shop:""},data:{businessType:null,shopType:null,memberLevel:null},dataList:""}},components:{page:s.a,auth:r},mounted:function(){var e=this;i.i().then(function(t){e.data.businessType=t.data.object}),i.a().then(function(t){e.data.shopType=t.data.object}),i.n().then(function(t){e.data.memberLevel=t.data.object}),e.Initial()},methods:{UpLoad:function(){document.querySelector(".el-upload__input").click()},beforeUpload:function(e){var t=e.name.toUpperCase().split(".")[1],a=!1,s="",i=void 0;for(i=0;i<this.pData.doc.accept.length;i++){if(this.pData.doc.accept[i]=this.pData.doc.accept[i].toUpperCase(),t==this.pData.doc.accept[i]){a=!0;break}s+=this.pData.doc.accept[i]+"/"}return a?this.pData.doc.size&&e.size>this.pData.doc.size?(c({title:"文件容量超过上限",type:"error"}),!1):void 0:(s=s.substring(0,s.length-1),c({title:"只能上传"+s+"格式文件",type:"error"}),!1)},UploadSuccess:function(e,t){if(0!=e.errorCode)c({title:"上传失败",text:e.errorMsg,type:"error"});else{if(e.object.length>0){for(var a=0,s="以下地点已激活，不可重复激活：";a<e.object.length;a++)s+=e.object[a]+"、";s=s.substring(0,s.length-1),c({title:"上传失败",text:s,type:"error"})}else c({title:"上传成功",type:"success"});this.Initial()}},Search:function(){this.search.pageNo=1,this.Initial()},Change:function(e){this.search.pageNo=e,this.Initial()},Reset:function(){this.search.pageNo=1,document.querySelector("#shopId").value="",document.querySelector("#shopName").value="",this.search.businessTypeId="",this.search.shopTypeId="",this.search.memberLevelId="",this.Initial()},Initial:function(){var e=this;e.dataList="",this.search.shopId=document.querySelector("#shopId").value,this.search.shopName=document.querySelector("#shopName").value,i.y({pageRow:e.search.pageRow,pageNo:e.search.pageNo,shopId:e.search.shopId,shopName:e.search.shopName,businessTypeId:e.search.businessTypeId,shopTypeId:e.search.shopTypeId,memberLevelId:e.search.memberLevelId}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?(e.dataList=t.object,t.object&&(e.search.pageNo=e.dataList.pageNo)):c({title:"商家列表服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){c("商家列表请求服务器失败","","error")})},ShopActive:function(){this.$router.push({path:"/shop/shopActiveList"})},ShopEdit:function(e){this.$router.push({path:"/shop/shopEdit",query:{shopId:e.shopId}})},ShopEditAuth:function(e){this.pData.show=!0,this.pData.shop=e},Close:function(){this.pData.show=!1}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("form",[a("el-upload",{staticClass:"none",attrs:{action:"/api/permission/memberShop/export",accept:"",data:{token:e.pData.token},"show-file-list":!1,"on-success":e.UploadSuccess,"before-upload":e.beforeUpload,disabled:!e.pData.edit}}),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("业态：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.businessTypeId,expression:"search.businessTypeId"}],staticClass:"w100",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"businessTypeId",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.data.businessType,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("地点属性：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.shopTypeId,expression:"search.shopTypeId"}],staticClass:"w100",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"shopTypeId",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.data.shopType,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"l form-group mb15"},[a("label",[e._v("等级：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.search.memberLevelId,expression:"search.memberLevelId"}],staticClass:"w100",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.search,"memberLevelId",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.data.memberLevel,function(t){return a("option",{key:t.$index,domProps:{value:t.sid}},[e._v(e._s(t.name))])})],2)]),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn w120 mr15",attrs:{type:"button"},on:{click:e.Search}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")]),e._v(" "),a("button",{staticClass:"btn2 w120",attrs:{type:"button"},on:{click:e.Reset}},[e._v("清空")])])],1)]),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"form-group mb20"},[a("button",{staticClass:"btn2 w110 l",attrs:{type:"button"},on:{click:e.ShopActive}},[a("i",{staticClass:"fa fa-magic"}),e._v(" 激活商家")]),e._v(" "),a("button",{staticClass:"btn2 w110 r",attrs:{type:"button"},on:{click:function(t){e.UpLoad()}}},[a("i",{staticClass:"fa fa-sign-in"}),e._v(" 批量导入")]),e._v(" "),a("a",{staticClass:"r mt8 gray mr15",attrs:{href:"../static/doc/示例.xlsx",target:"_blank"}},[e._v(" 示例格式")])]),e._v(" "),""==e.dataList?a("div",{staticClass:"text-center"},[e._m(3)]):e._e(),e._v(" "),null==e.dataList?a("div",{staticClass:"text-center"},[a("h2",{staticClass:"ptb10p"},[e._v("未查询到数据")])]):e._e(),e._v(" "),e.dataList?a("div",[a("table",{staticClass:"tab"},[e._m(4),e._v(" "),e._l(e.dataList.objects,function(t){return a("tr",{key:t.$index},[a("td",[e._v(e._s(t.shopName))]),e._v(" "),a("td",[e._v(e._s(t.shopId))]),e._v(" "),a("td",[e._v(e._s(t.businessTypeName))]),e._v(" "),a("td",[e._v(e._s(t.shopTypeName))]),e._v(" "),a("td",[e._v(e._s(t.memberLevelName))]),e._v(" "),a("td",{staticClass:"op"},[a("a",{on:{click:function(a){e.ShopEdit(t)}}},[e._v("编辑")]),e._v(" "),a("a",{staticClass:"mr25",on:{click:function(a){e.ShopEditAuth(t)}}},[e._v("编辑权限")]),e._v(" "),a("a",{attrs:{href:"http://qrcode-b.dface.cn/#/materielManage/shopMateriel?shopId="+t.shopId}},[e._v("店铺二维码")])])])})],2),e._v(" "),a("div",{staticClass:"hidden mt20"},[a("page",{attrs:{dataList:e.dataList,search:e.search},on:{Change:e.Change}})],1)]):e._e()]),e._v(" "),a("auth",{attrs:{show:e.pData.show,shop:e.pData.shop},on:{Close:e.Close}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",[t("figcaption",[this._v("商家列表")]),this._v(" "),t("div",{staticClass:"crumbs"},[t("span",[this._v("商家管理")]),this._v(" "),t("a",[this._v("商家列表")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家名称：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopName",onfocus:"PF.CutString(this,60)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l form-group mb15"},[t("label",[this._v("商家ID：")]),this._v(" "),t("input",{attrs:{type:"text",value:"",id:"shopId",maxlength:"8",oninput:"PF.Integer(this)"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"ptb10p"},[t("img",{staticClass:"w40 mr15",attrs:{src:a("bn/Z")}}),this._v("数据加载中...")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("商户名称")]),e._v(" "),a("th",[e._v("商户ID")]),e._v(" "),a("th",[e._v("业态")]),e._v(" "),a("th",[e._v("地点属性")]),e._v(" "),a("th",[e._v("等级")]),e._v(" "),a("th",[e._v("操作")])])}]},p=a("vSla")(d,u,!1,null,null,null);t.a=p.exports},x9S0:function(e,t,a){"use strict";var s=a("P9l9"),i=a("QI2T"),n={name:"ShopActive",data:function(){return{pData:{shopId:this.$route.query.shopId},data:{},create:{businessTypeId:2,memberLevelId:0},error:{businessTypeIdError:"",memberLevelIdError:""}}},mounted:function(){var e=this;s.i().then(function(t){e.data.businessType=t.data.object}),s.n().then(function(t){e.data.memberLevel=t.data.object}),e.Initial()},methods:{ClearError:function(){this.error={businessTypeIdError:"",memberLevelIdError:""}},Initial:function(){var e=this;s.x({shopId:e.pData.shopId}).then(function(t){if(0==(t=PF.JsonFormat(t.data)).status){var a=e.data;e.data=t.object,e.$set(e.data,"businessType",a.businessType),e.$set(e.data,"memberLevel",a.memberLevel)}else i({title:"商家详情服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){i("商家详情请求服务器失败","","error")})},Submit:function(){var e=this;return e.ClearError(),""===e.create.businessTypeId?(e.error.businessTypeIdError="请选择业态",PF.GoTo("BusinessTypeId")):""===e.create.memberLevelId?(e.error.memberLevelIdError="请选择商家类型",PF.GoTo("MemberLevelId")):void s.s({shopId:e.pData.shopId,businessTypeId:e.create.businessTypeId,memberLevelId:e.create.memberLevelId}).then(function(t){0==(t=PF.JsonFormat(t.data)).status?i({title:"激活成功",text:"2秒后自动关闭",type:"success",timer:"2000"}).then(function(t){"timer"!=t.dismiss&&1!=t.value||e.$router.push({path:"/shop"})}):i({title:"激活商家服务器返回错误",text:t.errorMsg,type:"error"})}).catch(function(e){i("激活商家请求服务器失败","","error")})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"con"},[e._m(0),e._v(" "),a("div",{staticClass:"box"},[a("form",[a("h2",{staticClass:"title1"},[e._v("商家基本信息")]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("商家ID：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.shopId))])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("商家名称：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.shopName))])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("地点属性：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.shopTypeName))])]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100"},[e._v("经营类目：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v("\n            "+e._s(e.data.category1Name)+"\n            "+e._s(e.data.category2Name?"/"+e.data.category2Name:"")+"\n            "+e._s(e.data.category3Name?"/"+e.data.category3Name:"")+"\n          ")])]),e._v(" "),a("div",{staticClass:"form-group mb25"},[a("label",{staticClass:"w100"},[e._v("地址：")]),e._v(" "),a("span",{staticClass:"mt8"},[e._v(e._s(e.data.address))])]),e._v(" "),a("h2",{staticClass:"title1"},[e._v("商家账户信息")]),e._v(" "),a("div",{staticClass:"form-group mb10"},[a("label",{staticClass:"w100",attrs:{id:"BusinessTypeId"}},[e._v("业态：")]),e._v(" "),a("span",[e._l(e.data.businessType,function(t){return"默认业态"!=t.name?a("label",{key:t.$index},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.create.businessTypeId,expression:"create.businessTypeId"}],attrs:{type:"radio",name:"radio"},domProps:{value:t.sid,checked:e._q(e.create.businessTypeId,t.sid)},on:{change:function(a){e.$set(e.create,"businessTypeId",t.sid)}}}),e._v(" "),a("em",{staticClass:"word l normal mr25 ml-10"},[e._v(e._s(t.name))])]):e._e()}),e._v(" "),a("em",{staticClass:"notice orange mt6"},[e._v("\n              激活后，商家业态不可更改\n              "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.businessTypeIdError,expression:"error.businessTypeIdError"}]},[e._v("* "+e._s(e.error.businessTypeIdError))])])],2)]),e._v(" "),a("div",{staticClass:"form-group mb40"},[a("label",{staticClass:"w100",attrs:{id:"MemberLevelId"}},[e._v("等级：")]),e._v(" "),a("span",[e._l(e.data.memberLevel,function(t){return a("label",{key:t.$index},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.create.memberLevelId,expression:"create.memberLevelId"}],attrs:{type:"radio",name:"radio2"},domProps:{value:t.sid,checked:e._q(e.create.memberLevelId,t.sid)},on:{change:function(a){e.$set(e.create,"memberLevelId",t.sid)}}}),e._v(" "),a("em",{staticClass:"word l normal mr25 ml-10"},[e._v(e._s(t.name))])])}),e._v(" "),a("em",{staticClass:"notice mt6"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.error.memberLevelIdError,expression:"error.memberLevelIdError"}]},[e._v("* "+e._s(e.error.memberLevelIdError))])])],2)]),e._v(" "),a("div",{staticClass:"form-group"},[a("span",{staticClass:"ml115"}),e._v(" "),a("button",{staticClass:"btn mw100",attrs:{type:"button"},on:{click:e.Submit}},[e._v("立即激活")])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("figure",[a("figcaption",[e._v("激活商家")]),e._v(" "),a("div",{staticClass:"crumbs"},[a("span",[e._v("商家管理")]),e._v(" "),a("a",{attrs:{href:"/shop"}},[e._v("商家列表")]),e._v(" "),a("a",{attrs:{href:"/shop/shopActiveList"}},[e._v("地点列表")]),e._v(" "),a("a",[e._v("激活商家")])]),e._v(" "),a("a",{staticClass:"btn5  btn5-change",attrs:{href:"/shop/shopActiveList"}},[a("i",{staticClass:"fa fa-reply"}),e._v(" 返回")])])}]},l=a("vSla")(n,o,!1,null,null,null);t.a=l.exports}},["NHnr"]);
//# sourceMappingURL=app.86f97cadeb7f9711582a.js.map